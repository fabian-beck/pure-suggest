{"version":3,"file":"js/app.be0e14ab.js","mappings":"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","sources":["webpack://pure/./src/App.vue","webpack://pure/./src/stores/interface.js","webpack://pure/./src/Cache.js","webpack://pure/./src/Publication.js","webpack://pure/./src/Filter.js","webpack://pure/./src/Util.js","webpack://pure/./src/stores/session.js","webpack://pure/./src/components/HeaderPanel.vue","webpack://pure/src/components/HeaderPanel.vue","webpack://pure/./src/components/HeaderPanel.vue?6b54","webpack://pure/./src/components/HeaderPanel.vue?5d9d","webpack://pure/./src/components/SelectedPublicationsComponent.vue","webpack://pure/./src/components/BoostKeywordsComponent.vue","webpack://pure/src/components/BoostKeywordsComponent.vue","webpack://pure/./src/components/BoostKeywordsComponent.vue?2f4c","webpack://pure/./src/components/BoostKeywordsComponent.vue?1e68","webpack://pure/./src/components/PublicationListComponent.vue","webpack://pure/./src/components/PublicationComponent.vue","webpack://pure/src/components/PublicationComponent.vue","webpack://pure/./src/components/PublicationComponent.vue?9249","webpack://pure/./src/components/PublicationComponent.vue?8dc0","webpack://pure/src/components/PublicationListComponent.vue","webpack://pure/./src/components/PublicationListComponent.vue?6721","webpack://pure/./src/components/PublicationListComponent.vue?0d16","webpack://pure/src/components/SelectedPublicationsComponent.vue","webpack://pure/./src/components/SelectedPublicationsComponent.vue?dc54","webpack://pure/./src/components/SelectedPublicationsComponent.vue?6993","webpack://pure/./src/components/SuggestedPublicationsComponent.vue","webpack://pure/src/components/SuggestedPublicationsComponent.vue","webpack://pure/./src/components/SuggestedPublicationsComponent.vue?ac5d","webpack://pure/./src/components/SuggestedPublicationsComponent.vue?18d6","webpack://pure/./src/components/NetworkVisComponent.vue","webpack://pure/src/components/NetworkVisComponent.vue","webpack://pure/./src/components/NetworkVisComponent.vue?c54d","webpack://pure/./src/components/NetworkVisComponent.vue?ec2e","webpack://pure/./src/components/QuickAccessBar.vue","webpack://pure/src/components/QuickAccessBar.vue","webpack://pure/./src/components/QuickAccessBar.vue?6c02","webpack://pure/./src/components/QuickAccessBar.vue?e306","webpack://pure/./src/components/SearchPanel.vue","webpack://pure/./src/PublicationSearch.js","webpack://pure/src/components/SearchPanel.vue","webpack://pure/./src/components/SearchPanel.vue?a36e","webpack://pure/./src/components/SearchPanel.vue?5c91","webpack://pure/./src/components/AboutPage.vue","webpack://pure/./src/components/AboutPage.vue?9303","webpack://pure/./src/components/KeyboardControlsPage.vue","webpack://pure/./src/components/KeyboardControlsPage.vue?e9d1","webpack://pure/./src/Keys.js","webpack://pure/src/App.vue","webpack://pure/./src/App.vue?51dd","webpack://pure/./src/App.vue?0e40","webpack://pure/./src/main.js","webpack://pure/webpack/bootstrap","webpack://pure/webpack/runtime/chunk loaded","webpack://pure/webpack/runtime/compat get default export","webpack://pure/webpack/runtime/define property getters","webpack://pure/webpack/runtime/global","webpack://pure/webpack/runtime/hasOwnProperty shorthand","webpack://pure/webpack/runtime/node module decorator","webpack://pure/webpack/runtime/jsonp chunk loading","webpack://pure/webpack/startup"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"app\"}},[_c('HeaderPanel',{attrs:{\"id\":\"header\"}}),_c('div',{class:{ 'network-expanded': _vm.interfaceStore.isNetworkExpanded },attrs:{\"id\":\"main\"},on:{\"click\":function($event){return _vm.sessionStore.clearActivePublication('clicked anywhere')}}},[_c('SelectedPublicationsComponent',{attrs:{\"id\":\"selected\"}}),_c('SuggestedPublicationsComponent',{attrs:{\"id\":\"suggested\"}}),_c('NetworkVisComponent',{attrs:{\"id\":\"network\",\"svgWidth\":1500,\"svgHeight\":600}})],1),_c('QuickAccessBar',{staticClass:\"is-hidden-desktop\",attrs:{\"id\":\"quick-access\"}}),_c('SearchPanel'),_c('b-modal',{model:{value:(_vm.interfaceStore.isAboutPageShown),callback:function ($$v) {_vm.$set(_vm.interfaceStore, \"isAboutPageShown\", $$v)},expression:\"interfaceStore.isAboutPageShown\"}},[_c('AboutPage')],1),_c('b-modal',{model:{value:(_vm.interfaceStore.isKeyboardControlsShown),callback:function ($$v) {_vm.$set(_vm.interfaceStore, \"isKeyboardControlsShown\", $$v)},expression:\"interfaceStore.isKeyboardControlsShown\"}},[_c('KeyboardControlsPage')],1),_c('b-loading',{attrs:{\"is-full-page\":true,\"can-cancel\":false},model:{value:(_vm.interfaceStore.isLoading),callback:function ($$v) {_vm.$set(_vm.interfaceStore, \"isLoading\", $$v)},expression:\"interfaceStore.isLoading\"}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { defineStore } from 'pinia'\r\n\r\nimport { ToastProgrammatic as Toast } from 'buefy'\r\nimport { SnackbarProgrammatic as Snackbar } from 'buefy'\r\nimport { DialogProgrammatic as Dialog } from 'buefy'\r\n\r\nexport const useInterfaceStore = defineStore('interface', {\r\n    state: () => {\r\n        return {\r\n            isLoading: false,\r\n            loadingToast: undefined,\r\n            isOverlay: false,\r\n            isNetworkExpanded: false,\r\n            isNetworkClusters: true,\r\n            isFilterPanelShown: false,\r\n            searchQuery: \"\",\r\n            isSearchPanelShown: false,\r\n            isAboutPageShown: false,\r\n            isKeyboardControlsShown: false,\r\n            feedbackInvitationShown: false,\r\n        }\r\n    },\r\n    getters: {\r\n        isMobile() {\r\n            return window.innerWidth <= 1023;\r\n        },\r\n    },\r\n    actions: {\r\n        clear() {\r\n            this.isOverlay = false;\r\n            this.isNetworkExpanded = false;\r\n            this.isNetworkClusters = true;\r\n            this.isFilterPanelShown = false;\r\n            window.scrollTo(0, 0);\r\n        },\r\n\r\n        startLoading() {\r\n            this.isLoading = true;\r\n        },\r\n\r\n        endLoading() {\r\n            this.isLoading = false;\r\n            if (this.loadingToast) {\r\n                this.loadingToast.close();\r\n                this.loadingToast = null;\r\n            }\r\n        },\r\n\r\n        updateLoadingToast(message, type) {\r\n            if (!this.loadingToast) {\r\n                this.loadingToast = Toast.open({\r\n                    indefinite: true,\r\n                });\r\n            }\r\n            this.loadingToast.message = message;\r\n            this.loadingToast.type = type;\r\n        },\r\n\r\n        showAbstract(publication) {\r\n            console.log(publication)\r\n            const _this = this;\r\n            const onClose = function () {\r\n                _this.isOverlay = false;\r\n                _this.activatePublicationComponent(\r\n                    document.getElementById(publication.doi)\r\n                );\r\n            };\r\n            this.isOverlay = true;\r\n            Dialog.alert({\r\n                message: `<div><b>${publication.title}</b></div><div><i>${publication.abstract}</i></div>`,\r\n                type: \"is-dark\",\r\n                hasIcon: true,\r\n                icon: \"text\",\r\n                confirmText: \"Close\",\r\n                canCancel: [\"escape\", \"outside\"],\r\n                onConfirm: onClose,\r\n                onCancel: onClose,\r\n            });\r\n        },\r\n\r\n        showMessage(message) {\r\n            showToastMessage({\r\n                message: message,\r\n            });\r\n        },\r\n\r\n        showImportantMessage(message) {\r\n            ({\r\n                duration: 5000,\r\n                message: message,\r\n                type: \"is-primary\",\r\n            });\r\n        },\r\n\r\n        showErrorMessage(errorMessage) {\r\n            showToastMessage({\r\n                duration: 5000,\r\n                message: errorMessage,\r\n                type: \"is-danger\",\r\n            }, console.error);\r\n        },\r\n\r\n        showConfirmDialog(message, confirm) {\r\n            this.isOverlay = true;\r\n            Dialog.confirm({\r\n                message: message,\r\n                onConfirm: () => {\r\n                    confirm();\r\n                    this.isOverlay = false;\r\n                },\r\n                onCancel: () => {\r\n                    this.isOverlay = false;\r\n                },\r\n            });\r\n        },\r\n\r\n        showFeedbackInvitation() {\r\n            this.feedbackInvitationShown = true;\r\n            Snackbar.open({\r\n                indefinite: true,\r\n                message:\r\n                    \"You have added the 10th publication to selectedwe invite you to share your <b>feedback</b> on the tool!\",\r\n                cancelText: \"Maybe later\",\r\n                onAction: this.openFeedback,\r\n            });\r\n        },\r\n\r\n        openSearch(query) {\r\n            this.searchQuery = query?query:\"\";\r\n            this.isSearchPanelShown = true;\r\n        },\r\n\r\n        openFeedback() {\r\n            this.isOverlay = true;\r\n            Dialog.confirm({\r\n                message:\r\n                    \"<p><b>We are interested in your opinion!</b></p><p>&nbsp;</p><p>What you like and do not like, what features are missing, how you are using the tool, bugs, criticism, ... anything.</p><p>&nbsp;</p><p>We invite you to provide feedback publicly. Clicking 'OK' will open a GitHub discussion in another tab where you can post a comment (account required). Alternatively, you can always send a private message to <a href='mailto:fabian.beck@uni-bamberg.de'>fabian.beck@uni-bamberg.de</a>.</p>\",\r\n                onConfirm: () => {\r\n                    window.open(\r\n                        \"https://github.com/fabian-beck/pure-suggest/discussions/214\"\r\n                    );\r\n                    this.isOverlay = false;\r\n                },\r\n                onCancel: () => {\r\n                    this.isOverlay = false;\r\n                },\r\n            });\r\n        },\r\n\r\n        activatePublicationComponent: function (publicationComponent) {\r\n            if (publicationComponent) {\r\n                publicationComponent.focus();\r\n            }\r\n        },\r\n\r\n    }\r\n})\r\n\r\nfunction showToastMessage(data, log = console.log) {\r\n    if (!data.message) return;\r\n    log(data.message);\r\n    Toast.open(data);\r\n}","import LZString from 'lz-string';\r\n\r\nexport async function cachedFetch(url, processData, fetchParameters = {}) {\r\n  try {\r\n    const data = JSON.parse(LZString.decompress(localStorage[url]));\r\n    if (!data) throw new Error(\"Cached data is empty\");\r\n    processData(data);\r\n  } catch (cannotLoadFromCacheError) {\r\n    try {\r\n      const response = await fetch(url, fetchParameters);\r\n      if (!response.ok) {\r\n        throw new Error(`Received response with status ${response.status}`);\r\n      }\r\n      const data = await response.json();\r\n      try {\r\n        localStorage[url] = LZString.compress(JSON.stringify(data));\r\n      } catch (error) {\r\n        console.log(\"Cache full (#elements: ${Object.keys(localStorage).length})! Removing elements...\")\r\n        try {\r\n          // local storage cache full, delete random elements\r\n          for (let i = 0; i < 100; i++) {\r\n            const randomStoredUrl = Object.keys(localStorage)[\r\n              Math.floor(Math.random() * Object.keys(localStorage).length)\r\n            ];\r\n            localStorage.removeItem(randomStoredUrl);\r\n          }\r\n          localStorage[url] = LZString.compress(JSON.stringify(data));\r\n        } catch (error2) {\r\n          console.error(\r\n            `Unable to cache information for \"${url}\" in local storage: ${error2}`\r\n          );\r\n        }\r\n      }\r\n      console.log(`Successfully fetched data for \"${url}\"`);\r\n      \r\n      processData(data);\r\n    } catch (error3) {\r\n      console.error(`Unable to fetch or process data for \"${url}\": ${error3}`)\r\n    }\r\n  }\r\n}\r\n\r\nexport function clearCache() {\r\n  localStorage.clear();\r\n}","import _ from \"lodash\";\r\n\r\nimport { cachedFetch } from \"./Cache.js\";\r\n\r\nexport default class Publication {\r\n    constructor(doi) {\r\n        // identifier\r\n        this.doi = doi.toLowerCase();\r\n        this.doiUrl = \"https://doi.org/\" + doi;\r\n        // meta-data\r\n        this.title = \"\";\r\n        this.titleHighlighted = \"\";\r\n        this.year = undefined;\r\n        this.author = undefined;\r\n        this.authorShort = undefined;\r\n        this.authorOrcid = undefined;\r\n        this.container = undefined;\r\n        this.volume = undefined;\r\n        this.issue = undefined;\r\n        this.page = undefined;\r\n        this.oaLink = undefined;\r\n        this.abstract = undefined;\r\n        // citation-related data\r\n        this.citationDois = [];\r\n        this.referenceDois = [];\r\n        this.citationCount = 0;\r\n        this.referenceCount = 0;\r\n        this.boostMatches = 0;\r\n        this.boostKeywords = []\r\n        this.boostFactor = 1;\r\n        this.score = 0;\r\n        this.scoreColor = \"#FFF\";\r\n        this.citationsPerYear = 0;\r\n        // tags\r\n        this.isSurvey = false;\r\n        this.isHighlyCited = false;\r\n        this.isNew = false;\r\n        this.isUnnoted = false;\r\n        this.isOpenAccess = false;\r\n        // interface properties\r\n        this.isActive = false;\r\n        this.isLinkedToActive = false;\r\n        this.isSelected = false;\r\n        this.isRead = false;\r\n        // loading state\r\n        this.wasFetched = false;\r\n    }\r\n\r\n    async fetchData() {\r\n        if (this.wasFetched) return\r\n        try {\r\n            await cachedFetch(\r\n                `https://opencitations.net/index/coci/api/v1/metadata/${this.doi}`,\r\n                message => {\r\n                    if (!message || message.length === 0) {\r\n                        console.error(`Unable to process metadata for DOI \"${this.doi}\" because of empty message.`);\r\n                        return;\r\n                    }\r\n                    const data = message[0];\r\n                    // title\r\n                    this.title = data.title;\r\n                    // author\r\n                    if (data.author) {\r\n                        const authorArray = data.author.split('; ');\r\n                        if (authorArray.length === 1) {\r\n                            this.authorShort = authorArray[0].split(', ')[0];\r\n                        } else if (authorArray.length === 2) {\r\n                            this.authorShort = `${authorArray[0].split(', ')[0]} and ${authorArray[1].split(', ')[0]}`;\r\n                        } else if (authorArray.length > 2) {\r\n                            this.authorShort = `${authorArray[0].split(', ')[0]} et al.`;\r\n                        }\r\n                        this.author = data.author.replace(/(,\\s+)(\\d{4}-\\d{4}-\\d{4}-\\d{3}[0-9X]{1})/g, \"\");\r\n                        this.authorOrcid = data.author.replace(/(,\\s+)(\\d{4}-\\d{4}-\\d{4}-\\d{3}[0-9X]{1})/g, \" <a href='https://orcid.org/$2'><img alt='ORCID logo' src='https://info.orcid.org/wp-content/uploads/2019/11/orcid_16x16.png' width='14' height='14' /></a>\");\r\n                    }\r\n                    // container (booktitle or journal) \r\n                    this.container = \"\";\r\n                    data.source_title.split(\" \").forEach(word => {\r\n                        let mappedWord = \"\";\r\n                        if (/\\(.+\\)/.test(word)) { // acronyms in brackets\r\n                            mappedWord = word.toUpperCase();\r\n                        } else if (/\\d+(st|nd|rd|th)/i.test(word)) { // 1st 2nd 3rd 4th etc.\r\n                            mappedWord = word.toLowerCase();\r\n                        } else if (/^M{0,4}(CM|CD|D?C{0,3})(XC|XL|L?X{0,3})(IX|IV|V?I{0,3})(\\.?)$/i.test(word)) { // roman numerals - see: https://regexpattern.com/roman-numerals/\r\n                            mappedWord = word.toUpperCase();\r\n                        } else {\r\n                            mappedWord = TITLE_WORD_MAP[word.toLowerCase()];\r\n                        }\r\n                        this.container += (mappedWord ? mappedWord : word) + \" \";\r\n                    });\r\n                    this.container = _.trim(this.container, '. ');\r\n                    this.container = cleanTitle(this.container);\r\n                    // bibString meta-data\r\n                    this.year = data.year;\r\n                    if (!this.year) {\r\n                        const match = this.doi.match(/\\.((19|20)\\d\\d)\\./);\r\n                        if (match) {\r\n                            this.year = match[1];\r\n                        }\r\n                    }\r\n                    this.volume = data.volume;\r\n                    this.issue = data.issue;\r\n                    this.page = data.page;\r\n                    this.oaLink = data.oa_link;\r\n                    // references and citations\r\n                    data.reference.split(\"; \").forEach(referenceDoi => {\r\n                        if (referenceDoi) {\r\n                            this.referenceDois.push(referenceDoi.toLowerCase());\r\n                        }\r\n                    });\r\n                    data.citation.split(\"; \").forEach(citationDoi => {\r\n                        if (citationDoi) {\r\n                            this.citationDois.push(citationDoi.toLowerCase());\r\n                        }\r\n                    });\r\n                    this.citationsPerYear = this.citationDois.length / (Math.max(1, CURRENT_YEAR - this.year));\r\n                }\r\n                , {\r\n                    headers: {\r\n                        authorization: \"aa9da96d-3c7b-49c1-a2d8-1c2d01ae10a5\",\r\n                    },\r\n                });\r\n            await cachedFetch(`https://api.crossref.org/v1/works/${this.doi}?mailto=fabian.beck@uni-bamberg.de`, response => {\r\n                const message = response.message;\r\n                if (message.abstract) {\r\n                    this.abstract = message.abstract.replaceAll(/<jats:/gi, \"<\").replaceAll(/<\\/jats:/gi, \"</\").replaceAll(/<.*?>abstract<.*?>/gi, \"\");\r\n                }\r\n                // use Crossref title as being often of better quality\r\n                if (message.title.length && message.title[0].length >= this.title.length) {\r\n                    this.title = message.title[0];\r\n                }\r\n                const subtitle = message.subtitle;\r\n                if (subtitle.length && this.title.toLowerCase().indexOf(subtitle[0].toLowerCase())) {\r\n                    // merging title and subtitle, while adding a colon only when title does not end with a non-alpha-numeric character (cleaning potential html tags first)\r\n                    const cleanedTitle = this.title.replaceAll(/<[^>]*>/g, \"\");\r\n                    this.title += `${cleanedTitle.match(/^.*\\W$/) ? \"\" : \":\"}  ${subtitle[0]}`;\r\n                }\r\n                if (!this.year) {\r\n                    if (message.created) {\r\n                        this.year = message.created[\"date-parts\"][0][0];\r\n                    }\r\n                }\r\n            });\r\n            this.title = cleanTitle(this.title);\r\n            this.gsUrl = `https://scholar.google.de/scholar?hl=en&q=${this.title\r\n                } ${this.author ? this.author : ''}`\r\n            // tags\r\n            if (this.referenceDois.length > 100) {\r\n                this.isSurvey = `more than 100 references (${this.referenceDois.length})`;\r\n            } else if (this.referenceDois.length >= 50 && /.*(survey|state|review|advances|future).*/i.test(this.title)) {\r\n                this.isSurvey = `more than 50 references (${this.referenceDois.length}) and \"${/(survey|state|review|advances|future)/i.exec(this.title)[0]}\" in the title`;\r\n            }\r\n            this.isHighlyCited = this.citationsPerYear > 10 ? `more than 10 citations per year (${this.citationsPerYear.toFixed(1)})` : false;\r\n            this.isNew = (CURRENT_YEAR - this.year) < 2 ? \"published within the last two calendar years\" : false;\r\n            this.isUnnoted = this.citationsPerYear < 1 ? `less than 1 citation per year (${this.citationsPerYear.toFixed(1)})` : false;\r\n            this.isOpenAccess = this.oaLink ? true : false;\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n        this.wasFetched = true;\r\n    }\r\n\r\n    updateScore(boostKeywords) {\r\n        this.boostMatches = 0;\r\n        this.boostFactor = 1;\r\n        // use an array to keep track of highlighted title fragements\r\n        let titleFragments = [this.title];\r\n        // iterate over all boost keywords\r\n        boostKeywords.forEach(boostKeyword => {\r\n            if (!boostKeyword) {\r\n                return\r\n            }\r\n            let index = -1;\r\n            boostKeyword.split(\"|\").forEach(alternativeKeyword => {\r\n                if (index >= 0) {\r\n                    return;\r\n                }\r\n                // iterate overa all title fragments\r\n                for (let i = 0; i < titleFragments.length; i++) {\r\n                    const titleFragment = titleFragments[i];\r\n                    // ignore already highlighted parts\r\n                    if (titleFragment.indexOf(\"<\") == 0) {\r\n                        continue\r\n                    }\r\n                    // search keyword in title fragement\r\n                    index = titleFragment.toLowerCase().indexOf(alternativeKeyword);\r\n                    if (index >= 0) {\r\n                        // split matched title fragement\r\n                        this.boostMatches += 1;\r\n                        this.boostKeywords.push(boostKeyword);\r\n                        this.boostFactor = this.boostFactor * 2;\r\n                        titleFragments[i] = [\r\n                            titleFragment.substring(0, index),\r\n                            \"<u style='text-decoration-color: hsl(48, 100%, 67%); text-decoration-thickness: 0.25rem;'>\" + titleFragment.substring(index, index + alternativeKeyword.length) + \"</u>\",\r\n                            titleFragment.substring(index + alternativeKeyword.length)\r\n                        ];\r\n                        break\r\n                    }\r\n                }\r\n                // flatten the array for matching the next keyword\r\n                titleFragments = titleFragments.flat();\r\n            });\r\n\r\n        });\r\n        // join highlighted title\r\n        this.titleHighlighted = titleFragments.join(\"\");\r\n        // update score\r\n        this.score = (this.citationCount + this.referenceCount) * this.boostFactor;\r\n        // update score color\r\n        let lightness = 100;\r\n        if (this.score >= 32) {\r\n            lightness = 60;\r\n        } else if (this.score >= 16) {\r\n            lightness = 72;\r\n        } else if (this.score >= 8) {\r\n            lightness = 80;\r\n        } else if (this.score >= 4) {\r\n            lightness = 90;\r\n        } else if (this.score >= 2) {\r\n            lightness = 95;\r\n        }\r\n        this.scoreColor = `hsl(0, 0%, ${lightness}%)`;\r\n    }\r\n\r\n    toBibtex() {\r\n        function protectAcronyms(s) {\r\n            let s2 = s;\r\n            let detectedAcronyms = [];\r\n            s.split(/\\W/).forEach(word => {\r\n                if (word.slice(1) != word.slice(1).toLowerCase() && !detectedAcronyms.includes(word)) {\r\n                    s2 = s2.replaceAll(word, `{${word}}`)\r\n                    detectedAcronyms.push(word);\r\n                }\r\n            });\r\n            return s2;\r\n        }\r\n\r\n        let type = \"misc\";\r\n        let bibString = \"\";\r\n        if (this.title) {\r\n            bibString += `\r\n    title = {${protectAcronyms(this.title)}},`;\r\n        }\r\n        if (this.author) {\r\n            bibString += `\r\n    author = {${this.author.replaceAll(\";\", \" and\")}},`;\r\n        }\r\n        if (this.year) {\r\n            bibString += `\r\n    year = {${this.year}},`;\r\n        }\r\n        if (this.volume) {\r\n            type = \"article\"\r\n            bibString += `\r\n    journal = {${this.container}},\r\n    volume = {${this.volume}},`;\r\n            if (this.issue) {\r\n                bibString += `\r\n    number = {${this.issue}},`;\r\n            }\r\n        } else if (this.container) {\r\n            const container = this.container.toLowerCase();\r\n            type = (container.indexOf(\"proceedings\") >= 0 || container.indexOf(\"conference\") >= 0 || container.indexOf(\"symposium\") >= 0 || container.indexOf(\"workshop\") >= 0) ? \"inproceedings\" : \"incollection\";\r\n            bibString += `\r\n    booktitle = {${this.container}},`;\r\n        }\r\n        if (this.page) {\r\n            bibString += `\r\n    pages = {${this.page}},`;\r\n        }\r\n        return `@${type}{${this.doi.replaceAll(/_/g, \"\")},${bibString}\r\n    doi = {${this.doi}}\r\n}`;\r\n    }\r\n\r\n    hasTag() {\r\n        return Publication.TAGS.some(tag => this[tag.value]);\r\n    }\r\n\r\n    getMetaString() {\r\n        let string = \"\"\r\n        if (this.title) string += this.title + \" \";\r\n        if (this.author) string += this.author + \" \";\r\n        if (this.container) string += this.container + \" \";\r\n        return string;\r\n    }\r\n\r\n    static get TAGS() {\r\n        return [{\r\n            value: \"isHighlyCited\",\r\n            name: \"Highly cited\"\r\n        },\r\n        {\r\n            value: \"isSurvey\",\r\n            name: \"Literature survey\"\r\n        },\r\n        {\r\n            value: \"isNew\",\r\n            name: \"New\"\r\n        },\r\n        {\r\n            value: \"isUnnoted\",\r\n            name: \"Unnoted\"\r\n        },\r\n        {\r\n            value: \"isOpenAccess\",\r\n            name: \"Open access\"\r\n        }];\r\n    }\r\n\r\n    static sortPublications(publicationList) {\r\n        publicationList.sort((a, b) => {\r\n            return b.score - 1 / ((b.year ? b.year : 0) + 2) - (a.score - 1 / ((a.year ? a.year : 0) + 2))\r\n        });\r\n    }\r\n\r\n}\r\n\r\nconst CURRENT_YEAR = new Date().getFullYear();\r\n\r\nconst TITLE_WORD_MAP = {\r\n    \"a\": \"a\",\r\n    \"an\": \"an\",\r\n    \"acm\": \"ACM\",\r\n    \"and\": \"and\",\r\n    \"by\": \"by\",\r\n    \"chi\": \"CHI\",\r\n    \"during\": \"during\",\r\n    \"for\": \"for\",\r\n    \"from\": \"from\",\r\n    \"ieee\": \"IEEE\",\r\n    \"ii\": \"II\",\r\n    \"iii\": \"III\",\r\n    \"in\": \"in\",\r\n    \"not\": \"not\",\r\n    \"of\": \"of\",\r\n    \"or\": \"or\",\r\n    \"on\": \"on\",\r\n    \"the\": \"the\",\r\n    \"their\": \"their\",\r\n    \"through\": \"through\",\r\n    \"to\": \"to\",\r\n    \"via\": \"via\",\r\n    \"with\": \"with\",\r\n    \"within\": \"within\",\r\n}\r\n\r\nfunction removeHtmlTags(string) {\r\n    return string.replaceAll(/<[^>]*>/g, \"\");\r\n}\r\n\r\nfunction cleanTitle(title) {\r\n    let cleanedTitle = \"\";\r\n    removeHtmlTags(title).split(\" \").forEach(word => {\r\n        const mappedWord = TITLE_WORD_MAP[word.toLowerCase()];\r\n        cleanedTitle += (mappedWord ? mappedWord : word) + \" \";\r\n    });\r\n    cleanedTitle = cleanedTitle.charAt(0).toUpperCase() + cleanedTitle.slice(1); // make first character uppercase\r\n    cleanedTitle = cleanedTitle.trim();\r\n    cleanedTitle = cleanedTitle.replaceAll(/--/g, \"\"); // en dash \r\n    cleanedTitle = cleanedTitle.replaceAll(/ - /g, \"  \"); // en dash\r\n    cleanedTitle = cleanedTitle.replaceAll(/---/g, \"\"); // em dash \r\n    cleanedTitle = cleanedTitle.replaceAll(/ ? ?/g, \"\"); // em dash \r\n    cleanedTitle = cleanedTitle.replaceAll(/&[A-Z]/g, match => match.toLowerCase()); // converting &-encoded charachters to lower case, e.g., \"&Amp;\" -> \"&amp;\"\r\n    if (cleanedTitle.length > 300) {\r\n        cleanedTitle = cleanedTitle.substring(0, 295) + \"[...]\";\r\n    }\r\n    return cleanedTitle;\r\n}","export default class Filter {\r\n\r\n    constructor() {\r\n        this.string = \"\";\r\n        this.yearStart = undefined;\r\n        this.yearEnd = undefined;\r\n        this.tag = \"\";\r\n    }\r\n\r\n    matchesString(publication) {\r\n        if (!this.string) return true;\r\n        return publication.getMetaString().toLowerCase().indexOf(this.string.toLowerCase()) >= 0;\r\n    }\r\n\r\n    isSpecificYearActive(yearNumeric) {\r\n        return (yearNumeric && yearNumeric >= 1000 && yearNumeric < 10000);\r\n    }\r\n\r\n    isYearActive () {\r\n        return this.isSpecificYearActive(Number(this.yearStart)) || this.isSpecificYearActive(Number(this.yearEnd));\r\n    }\r\n\r\n    matchesYearStart(publication) {\r\n        const yearStartNumeric = Number(this.yearStart);\r\n        if (!this.isSpecificYearActive(yearStartNumeric)) return true;\r\n        return yearStartNumeric <= Number(publication.year);\r\n    }\r\n\r\n    matchesYearEnd(publication) {\r\n        const yearEndNumeric = Number(this.yearEnd);\r\n        if (!this.isSpecificYearActive(yearEndNumeric)) return true;\r\n        return yearEndNumeric >= Number(publication.year);\r\n    }\r\n\r\n    matchesYear(publication) {\r\n        if (!publication.year) return false;\r\n        return this.matchesYearStart(publication) && this.matchesYearEnd(publication);\r\n    }\r\n\r\n    matchesTag(publication) {\r\n        if (!this.tag) return true;\r\n        return publication[this.tag];\r\n    }\r\n\r\n    matches(publication) {\r\n        return this.matchesString(publication)\r\n            && this.matchesTag(publication)\r\n            && this.matchesYear(publication);\r\n    }\r\n\r\n}","// https://stackoverflow.com/questions/3665115/how-to-create-a-file-in-memory-for-user-to-download-but-not-through-server?answertab=active#tab-top\r\nexport function saveAsFile(filename, mime, data) {\r\n  const blob = new Blob([data], { type: mime });\r\n  if (window.navigator.msSaveOrOpenBlob) {\r\n    window.navigator.msSaveBlob(blob, filename);\r\n  } else {\r\n    const elem = window.document.createElement(\"a\");\r\n    elem.href = window.URL.createObjectURL(blob);\r\n    elem.download = filename;\r\n    document.body.appendChild(elem);\r\n    elem.click();\r\n    document.body.removeChild(elem);\r\n  }\r\n}\r\n\r\n// https://stackoverflow.com/questions/49820013/javascript-scrollintoview-smooth-scroll-and-offset\r\nexport function scrollToTargetAdjusted(element, offsetY) {\r\n  var elementPosition = element.getBoundingClientRect().top;\r\n  var offsetPosition = elementPosition + window.pageYOffset - offsetY;\r\n\r\n  window.scrollTo({\r\n    top: offsetPosition,\r\n    behavior: \"smooth\",\r\n  });\r\n}\r\n\r\n// https://stackoverflow.com/questions/16801687/javascript-random-ordering-with-seed\r\nexport function shuffle(array, seed) {\r\n\r\n  function random(seed) {\r\n    var x = Math.sin(seed++) * 10000;\r\n    return x - Math.floor(x);\r\n  }\r\n\r\n  var m = array.length, t, i;\r\n  while (m) {\r\n    i = Math.floor(random(seed) * m--);\r\n    t = array[m];\r\n    array[m] = array[i];\r\n    array[i] = t;\r\n    ++seed\r\n  }\r\n  return array;\r\n}\r\n\r\n","import { defineStore } from 'pinia'\r\n\r\nimport { useInterfaceStore } from \"./interface.js\";\r\n\r\nimport Publication from \"./../Publication.js\";\r\nimport Filter from '../Filter.js';\r\nimport { shuffle, saveAsFile } from \"./../Util.js\"\r\nimport { clearCache } from \"./../Cache.js\";\r\n\r\nexport const useSessionStore = defineStore('session', {\r\n  state: () => {\r\n    return {\r\n      interfaceStore: useInterfaceStore(),\r\n      selectedPublications: [],\r\n      selectedQueue: [],\r\n      excludedPublicationsDois: [],\r\n      excludedQueue: [],\r\n      suggestion: \"\",\r\n      maxSuggestions: 50,\r\n      boostKeywordString: \"\",\r\n      activePublication: \"\",\r\n      readPublicationsDois: new Set(),\r\n      filter: new Filter(),\r\n      addQuery: \"\",\r\n    }\r\n  },\r\n  getters: {\r\n    selectedPublicationsDois: (state) => asDois(state.selectedPublications),\r\n    selectedPublicationsCount: (state) => state.selectedPublications.length,\r\n    excludedPublicationsCount: (state) => state.excludedPublicationsDois.length,\r\n    suggestedPublications: (state) => state.suggestion ? state.suggestion.publications : [],\r\n    suggestedPublicationsFiltered: (state) =>\r\n      state.suggestedPublications.filter(publication => state.filter.matches(publication)),\r\n    publications: (state) => state.selectedPublications.concat(state.suggestedPublications),\r\n    publicationsFiltered: (state) => state.selectedPublications.concat(state.suggestedPublicationsFiltered),\r\n    yearMax: (state) => Math.max(...state.publicationsFiltered.filter(publication => publication.year).map(publication => Number(publication.year))),\r\n    yearMin: (state) => Math.min(...state.publicationsFiltered.filter(publication => publication.year).map(publication => Number(publication.year))),\r\n    unreadSuggestionsCount: (state) => state.suggestedPublicationsFiltered.filter(\r\n      (publication) => !publication.isRead\r\n    ).length,\r\n    boostKeywords: (state) => state.boostKeywordString.toLowerCase().split(/,\\s*/).map(keyword => keyword.trim()),\r\n    isKeywordLinkedToActive: (state) => (keyword) => state.activePublication && state.activePublication.boostKeywords.includes(keyword),\r\n    uniqueBoostKeywords: (state) => [...new Set(state.boostKeywords)],\r\n    isUpdatable: (state) => state.selectedQueue.length > 0 || state.excludedQueue.length > 0,\r\n    isEmpty: (state) =>\r\n      state.selectedPublicationsCount === 0\r\n      && state.excludedPublicationsCount === 0\r\n      && state.selectedQueue.length === 0\r\n      && !state.isUpdatable,\r\n    isSelected: (state) => (doi) => state.selectedPublicationsDois.includes(doi),\r\n    isExcluded: (state) => (doi) => state.excludedPublicationsDois.includes(doi),\r\n    isQueuingForSelected: (state) => (doi) => state.selectedQueue.includes(doi),\r\n    isQueuingForExcluded: (state) => (doi) => state.excludedQueue.includes(doi),\r\n    getSelectedPublicationByDoi: (state) => (doi) => state.selectedPublications.filter(publication => publication.doi === doi)[0],\r\n  },\r\n  actions: {\r\n    clear() {\r\n      this.selectedPublications = [];\r\n      this.selectedQueue = [];\r\n      this.excludedPublicationsDois = [];\r\n      this.excludedQueue = [];\r\n      this.suggestion = \"\";\r\n      this.maxSuggestions = 50;\r\n      this.boostKeywordString = \"\";\r\n      this.activePublication = \"\";\r\n      this.filter = new Filter();\r\n      this.addQuery = \"\";\r\n      // do not reset read publications as the user might to carry this information to the next session\r\n      this.interfaceStore.clear();\r\n    },\r\n\r\n    removeFromExcludedPublication(doi) {\r\n      this.excludedPublicationsDois = this.excludedPublicationsDois.filter(excludedDoi => excludedDoi != doi)\r\n    },\r\n\r\n    setBoostKeywordString(boostKeywordString) {\r\n      this.boostKeywordString = boostKeywordString;\r\n      this.updateScores();\r\n    },\r\n\r\n    queueForSelected(dois) {\r\n      if (!Array.isArray(dois)) dois = [dois];\r\n      this.excludedQueue = this.excludedQueue.filter(excludedDoi => !dois.includes(excludedDoi));\r\n      dois.forEach(doi => {\r\n        if (this.isSelected(doi) || this.selectedQueue.includes(doi)) return;\r\n        this.selectedQueue.push(doi);\r\n      });\r\n    },\r\n\r\n    queueForExcluded(doi) {\r\n      if (this.isExcluded(doi) || this.excludedQueue.includes(doi)) return\r\n      this.selectedQueue = this.selectedQueue.filter(seletedDoi => doi != seletedDoi);\r\n      this.excludedQueue.push(doi);\r\n    },\r\n\r\n    removeFromQueues(doi) {\r\n      this.selectedQueue = this.selectedQueue.filter(seletedDoi => doi != seletedDoi);\r\n      this.excludedQueue = this.excludedQueue.filter(excludedDoi => doi != excludedDoi);\r\n    },\r\n\r\n    clearQueues() {\r\n      this.excludedQueue = [];\r\n      this.selectedQueue = [];\r\n    },\r\n\r\n    async updateQueued() {\r\n      this.clearActivePublication();\r\n      if (this.excludedQueue.length) {\r\n        this.excludedPublicationsDois = this.excludedPublicationsDois.concat(this.excludedQueue);\r\n      }\r\n      this.selectedPublications = this.selectedPublications.filter(\r\n        publication => !this.excludedQueue.includes(publication.doi)\r\n      );\r\n      this.suggestion.publications = this.suggestion.publications.filter(\r\n        publication => (!this.selectedQueue.includes(publication.doi) && !this.excludedQueue.includes(publication.doi))\r\n      );\r\n      if (this.selectedQueue.length) {\r\n        this.addPublicationsToSelection(this.selectedQueue);\r\n      }\r\n      await this.updateSuggestions();\r\n      if (\r\n        !this.interfaceStore.feedbackInvitationShown &&\r\n        this.selectedPublications.length >= 10\r\n      ) {\r\n        this.interfaceStore.showFeedbackInvitation();\r\n      }\r\n      this.clearQueues();\r\n    },\r\n\r\n    async addPublicationsAndUpdate(dois) {\r\n      dois.forEach((doi) => this.removeFromQueues(doi));\r\n      await this.addPublicationsToSelection(dois);\r\n      await this.updateSuggestions();\r\n    },\r\n\r\n    async addPublicationsToSelection(dois) {\r\n      console.log(`Adding to selection publications with DOIs: ${dois}.`);\r\n      dois.forEach((doi) => {\r\n        doi = doi.toLowerCase();\r\n        if (this.isExcluded(doi)) {\r\n          this.removeFromExcludedPublication(doi);\r\n        }\r\n        if (!this.getSelectedPublicationByDoi(doi)) {\r\n          this.selectedPublications.push(new Publication(doi));\r\n        }\r\n      });\r\n    },\r\n\r\n    async updateSuggestions(maxSuggestions = 50) {\r\n      this.maxSuggestions = maxSuggestions;\r\n      this.interfaceStore.startLoading();\r\n      let publicationsLoaded = 0;\r\n      this.interfaceStore.updateLoadingToast(\r\n        `${publicationsLoaded}/${this.selectedPublicationsCount} selected publications loaded`,\r\n        \"is-primary\"\r\n      );\r\n      await Promise.all(\r\n        this.selectedPublications.map(async (publication) => {\r\n          await publication.fetchData();\r\n          publication.isSelected = true;\r\n          publicationsLoaded++;\r\n          this.interfaceStore.updateLoadingToast(\r\n            `${publicationsLoaded}/${this.selectedPublicationsCount} selected publications loaded`,\r\n            \"is-primary\"\r\n          );\r\n        })\r\n      );\r\n      await this.computeSuggestions();\r\n      this.interfaceStore.endLoading();\r\n    },\r\n\r\n    async computeSuggestions() {\r\n\r\n      function incrementSuggestedPublicationCounter(\r\n        _this,\r\n        doi,\r\n        counter,\r\n        doiList,\r\n        sourceDoi\r\n      ) {\r\n        if (!_this.isExcluded(doi)) {\r\n          if (!_this.isSelected(doi)) {\r\n            if (!suggestedPublications[doi]) {\r\n              const citingPublication = new Publication(doi);\r\n              suggestedPublications[doi] = citingPublication;\r\n            }\r\n            suggestedPublications[doi][doiList].push(sourceDoi);\r\n            suggestedPublications[doi][counter]++;\r\n          } else {\r\n            _this.getSelectedPublicationByDoi(doi)[counter]++;\r\n          }\r\n        }\r\n      }\r\n\r\n      console.log(`Starting to compute new suggestions based on ${this.selectedPublicationsCount} selected (and ${this.excludedPublicationsCount} excluded).`);\r\n      this.clearActivePublication(\"updating suggestions\");\r\n      const suggestedPublications = {};\r\n      this.selectedPublications.forEach((publication) => {\r\n        publication.citationCount = 0;\r\n        publication.referenceCount = 0;\r\n      });\r\n      this.selectedPublications.forEach((publication) => {\r\n        publication.citationDois.forEach((citationDoi) => {\r\n          incrementSuggestedPublicationCounter(\r\n            this,\r\n            citationDoi,\r\n            \"citationCount\",\r\n            \"referenceDois\",\r\n            publication.doi\r\n          );\r\n        });\r\n        publication.referenceDois.forEach((referenceDoi) => {\r\n          incrementSuggestedPublicationCounter(\r\n            this,\r\n            referenceDoi,\r\n            \"referenceCount\",\r\n            \"citationDois\",\r\n            publication.doi\r\n          );\r\n        });\r\n      });\r\n      let filteredSuggestions = Object.values(suggestedPublications);\r\n      filteredSuggestions = shuffle(filteredSuggestions, 0);\r\n      console.log(`Identified ${filteredSuggestions.length} publications as suggestions.`);\r\n      // titles not yet fetched, that is why sorting can be only done on citations/references\r\n      filteredSuggestions.sort(\r\n        (a, b) =>\r\n          b.citationCount + b.referenceCount - (a.citationCount + a.referenceCount)\r\n      );\r\n      const preloadSuggestions = filteredSuggestions.slice(this.maxSuggestions, this.maxSuggestions + 50);\r\n      filteredSuggestions = filteredSuggestions.slice(0, this.maxSuggestions);\r\n      console.log(`Filtered suggestions to ${filteredSuggestions.length} top candidates, loading metadata for these.`);\r\n      let publicationsLoadedCount = 0;\r\n      this.interfaceStore.updateLoadingToast(`${publicationsLoadedCount}/${filteredSuggestions.length} suggestions loaded`, \"is-info\");\r\n      await Promise.all(filteredSuggestions.map(async (suggestedPublication) => {\r\n        await suggestedPublication.fetchData()\r\n        publicationsLoadedCount++;\r\n        this.interfaceStore.updateLoadingToast(`${publicationsLoadedCount}/${filteredSuggestions.length} suggestions loaded`, \"is-info\");\r\n      }));\r\n      filteredSuggestions.forEach((publication) => {\r\n        publication.isRead = this.readPublicationsDois.has(publication.doi);\r\n      });\r\n      console.log(\"Completed computing and loading of new suggestions.\");\r\n      preloadSuggestions.forEach(publication => {\r\n        publication.fetchData()\r\n      });\r\n      this.suggestion = {\r\n        publications: Object.values(filteredSuggestions),\r\n        totalSuggestions: Object.values(suggestedPublications).length\r\n      };\r\n      this.updateScores();\r\n    },\r\n\r\n    updateScores() {\r\n      console.log(\"Updating scores of publications and reordering them.\");\r\n      this.publications.forEach((publication) => {\r\n        publication.updateScore(this.boostKeywords);\r\n      });\r\n      Publication.sortPublications(this.selectedPublications);\r\n      Publication.sortPublications(this.suggestedPublications);\r\n    },\r\n\r\n    loadMoreSuggestions() {\r\n      this.updateSuggestions(\r\n        this.maxSuggestions + 50\r\n      );\r\n    },\r\n\r\n    setActivePublication(doi) {\r\n      this.selectedPublications.forEach((selectedPublication) => {\r\n        selectedPublication.isActive = selectedPublication.doi === doi;\r\n        if (selectedPublication.isActive) {\r\n          this.activePublication = selectedPublication;\r\n          this.selectedPublications.forEach((publication) => {\r\n            publication.isLinkedToActive =\r\n              selectedPublication.citationDois.indexOf(publication.doi) >= 0 ||\r\n              selectedPublication.referenceDois.indexOf(publication.doi) >= 0;\r\n          });\r\n          this.suggestedPublications.forEach((publication) => {\r\n            publication.isLinkedToActive =\r\n              selectedPublication.citationDois.indexOf(publication.doi) >= 0 ||\r\n              selectedPublication.referenceDois.indexOf(publication.doi) >= 0;\r\n          });\r\n        }\r\n      });\r\n      this.suggestedPublications.forEach((suggestedPublication) => {\r\n        suggestedPublication.isActive = suggestedPublication.doi === doi;\r\n        if (suggestedPublication.isActive) {\r\n          suggestedPublication.isRead = true;\r\n          this.readPublicationsDois.add(doi);\r\n          this.activePublication = suggestedPublication;\r\n          this.selectedPublications.forEach((publication) => {\r\n            publication.isLinkedToActive =\r\n              suggestedPublication.citationDois.indexOf(publication.doi) >= 0 ||\r\n              suggestedPublication.referenceDois.indexOf(publication.doi) >= 0;\r\n          });\r\n        }\r\n      });\r\n      console.log(`Highlighted as active publication with DOI ${doi}.`);\r\n    },\r\n\r\n    activatePublicationComponentByDoi: function (doi) {\r\n      if (doi !== this.activePublication?.doi) {\r\n        this.interfaceStore.activatePublicationComponent(document.getElementById(doi));\r\n        this.setActivePublication(doi);\r\n      }\r\n    },\r\n\r\n    clearActivePublication(source) {\r\n      if (!this.activePublication) return;\r\n      this.activePublication = undefined;\r\n      this.publications.forEach((publication) => {\r\n        publication.isActive = false;\r\n        publication.isLinkedToActive = false;\r\n      });\r\n      console.log(\r\n        `Cleared any highlighted active publication, triggered by \"${source}\".`\r\n      );\r\n    },\r\n\r\n    loadSession(session) {\r\n      console.log(`Loading session ${JSON.stringify(session)}`);\r\n      if (!session || !session.selected) {\r\n        this.interfaceStore.showErrorMessage(\r\n          \"Cannot read session state from JSON.\"\r\n        );\r\n        return;\r\n      }\r\n      if (session.boost) {\r\n        this.boostKeywordString = session.boost;\r\n      }\r\n      if (session.excluded) {\r\n        this.excludedPublicationsDois = session.excluded;\r\n      }\r\n      this.addPublicationsToSelection(session.selected);\r\n      this.updateSuggestions();\r\n    },\r\n\r\n    clearSession: function () {\r\n      this.interfaceStore.showConfirmDialog(\r\n        \"You are going to clear all selected and excluded articles and jump back to the initial state.\", this.clear);\r\n    },\r\n\r\n    exportSession: function () {\r\n      let data = {\r\n        selected: this.selectedPublicationsDois,\r\n        excluded: this.excludedPublicationsDois,\r\n        boost: this.boostKeywords.join(\", \"),\r\n      };\r\n      saveAsFile(\"session.json\", \"application/json\", JSON.stringify(data));\r\n    },\r\n\r\n    importSession: function (file) {\r\n      const fileReader = new FileReader();\r\n      fileReader.onload = () => {\r\n        try {\r\n          const content = fileReader.result;\r\n          const session = JSON.parse(content);\r\n          this.loadSession(session);\r\n        } catch {\r\n          this.interfaceStore.showErrorMessage(`Cannot read JSON from file.`);\r\n        }\r\n      };\r\n      fileReader.readAsText(file);\r\n    },\r\n\r\n    loadExample: function () {\r\n      const session = {\r\n        selected: [\r\n          \"10.1109/tvcg.2015.2467757\",\r\n          \"10.1109/tvcg.2015.2467621\",\r\n          \"10.1002/asi.24171\",\r\n          \"10.2312/evp.20221110\"\r\n        ],\r\n        boost: \"cit, visual, map, publi|literat\",\r\n      };\r\n      this.loadSession(session);\r\n    },\r\n\r\n    exportAllBibtex: function () {\r\n      this.exportBibtex(this.selectedPublications);\r\n    },\r\n\r\n    exportSingleBibtex: function (publication) {\r\n      this.exportBibtex([publication]);\r\n    },\r\n\r\n    exportBibtex: function (publicationList) {\r\n      let bib = \"\";\r\n      publicationList.forEach(\r\n        (publication) => (bib += publication.toBibtex() + \"\\n\\n\")\r\n      );\r\n      saveAsFile(\"publications.bib\", \"application/x-bibtex\", bib);\r\n    },\r\n\r\n    clearCache: function () {\r\n      this.interfaceStore.showConfirmDialog(\r\n        \"You are going to clear the cache, as well as all selected and excluded articles and jump back to the initial state.\", () => {\r\n          this.clear();\r\n          clearCache();\r\n        });\r\n    },\r\n  }\r\n})\r\n\r\nfunction asDois(publications) {\r\n  return publications.map((publication) => publication.doi);\r\n}","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"box p-0 m-0 is-radiusless\"},[_c('b-navbar',{staticClass:\"box p-0 m-0 is-radiusless\",attrs:{\"fixed-top\":_vm.interfaceStore.isMobile},scopedSlots:_vm._u([{key:\"brand\",fn:function(){return [_c('b-navbar-item',[_c('b-icon',{staticClass:\"has-text-grey\",attrs:{\"icon\":\"water-plus-outline\",\"size\":\"is-medium\"}}),_c('h1',{staticClass:\"title ml-2\"},[_c('span',{domProps:{\"innerHTML\":_vm._s(_vm.$appNameHtml)}})])],1)]},proxy:true},{key:\"start\",fn:function(){return [_c('b-navbar-dropdown',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.sessionStore.isEmpty),expression:\"!sessionStore.isEmpty\"}],attrs:{\"label\":`Session (${_vm.sessionStore.selectedPublicationsCount} selected${\n          _vm.sessionStore.excludedPublicationsCount\n            ? `; ${_vm.sessionStore.excludedPublicationsCount} excluded`\n            : ''\n        })`}},[_c('b-navbar-item',{on:{\"click\":_vm.sessionStore.exportSession}},[_c('b-icon',{attrs:{\"icon\":\"export\"}}),_c('span',{staticClass:\"ml-2\"},[_vm._v(\"Export session as JSON\")])],1),_c('b-navbar-item',{on:{\"click\":_vm.sessionStore.exportAllBibtex}},[_c('b-icon',{attrs:{\"icon\":\"export\"}}),_c('span',{staticClass:\"ml-2\"},[_vm._v(\"Export selected as BibTeX\")])],1),_c('b-navbar-item',{staticClass:\"has-text-danger\",on:{\"click\":_vm.sessionStore.clearSession}},[_c('b-icon',{attrs:{\"icon\":\"delete\"}}),_c('span',{staticClass:\"ml-2\"},[_c('span',{staticClass:\"key\"},[_vm._v(\"C\")]),_vm._v(\"lear session\")])],1)],1)]},proxy:true},{key:\"end\",fn:function(){return [_c('b-navbar-item',{staticClass:\"mr-6 ml-1\",attrs:{\"tag\":\"div\"}},[_c('a',{attrs:{\"href\":\"https://twitter.com/pure_suggest\"}},[_c('b-icon',{attrs:{\"icon\":\"twitter\"}})],1),_c('a',{staticClass:\"ml-5\",attrs:{\"href\":\"https://github.com/fabian-beck/pure-suggest\"}},[_c('b-icon',{attrs:{\"icon\":\"github\"}})],1)]),_c('b-navbar-dropdown',{attrs:{\"label\":\"\",\"icon-left\":\"dots-vertical\",\"right\":\"\",\"collapsible\":\"\"}},[_c('b-navbar-item',{on:{\"click\":_vm.interfaceStore.openFeedback}},[_c('b-icon',{attrs:{\"icon\":\"comment-quote-outline\"}}),_c('span',{staticClass:\"ml-2\"},[_vm._v(\"Feedback\")])],1),_c('b-navbar-item',{staticClass:\"is-hidden-touch\",on:{\"click\":function($event){_vm.interfaceStore.isKeyboardControlsShown = true}}},[_c('b-icon',{attrs:{\"icon\":\"keyboard-outline\"}}),_c('span',{staticClass:\"ml-2\"},[_vm._v(\"Keyboard controls\")])],1),_c('b-navbar-item',{on:{\"click\":function($event){_vm.interfaceStore.isAboutPageShown = true}}},[_c('b-icon',{attrs:{\"icon\":\"information-outline\"}}),_c('span',{staticClass:\"ml-2\"},[_vm._v(\"About\")])],1),_c('b-navbar-item',{staticClass:\"has-text-danger\",on:{\"click\":_vm.sessionStore.clearCache}},[_c('b-icon',{attrs:{\"icon\":\"cached\"}}),_c('span',{staticClass:\"ml-2\"},[_vm._v(\"Clear cache (and session)\")])],1)],1)]},proxy:true}])}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.sessionStore.isEmpty),expression:\"sessionStore.isEmpty\"}],staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_c('div',{staticClass:\"subtitle level-item mt-2\"},[_vm._v(\" \"+_vm._s(this.$appSubtitle)+\" \")])]),_c('div',{staticClass:\"column is-two-thirds\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.sessionStore.isEmpty),expression:\"sessionStore.isEmpty\"}],staticClass:\"notification has-text-centered p-2\"},[_vm._m(0)])])])],1)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('p',[_vm._v(\" Based on a set of selected publications, \"),_c('b',{staticClass:\"has-text-info\"},[_vm._v(\"suggest\")]),_vm._v(\"ing related \"),_c('b',{staticClass:\"has-text-primary\"},[_vm._v(\"pu\")]),_vm._v(\"blications connected by \"),_c('b',{staticClass:\"has-text-primary\"},[_vm._v(\"re\")]),_vm._v(\"ferences. \")])\n}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"box p-0 m-0 is-radiusless\">\r\n    <b-navbar\r\n      :fixed-top=\"interfaceStore.isMobile\"\r\n      class=\"box p-0 m-0 is-radiusless\"\r\n    >\r\n      <template #brand>\r\n        <b-navbar-item>\r\n          <b-icon\r\n            icon=\"water-plus-outline\"\r\n            size=\"is-medium\"\r\n            class=\"has-text-grey\"\r\n          ></b-icon>\r\n          <h1 class=\"title ml-2\">\r\n            <span v-html=\"$appNameHtml\"></span>\r\n          </h1>\r\n        </b-navbar-item>\r\n      </template>\r\n      <template #start>\r\n        <b-navbar-dropdown\r\n          :label=\"`Session (${sessionStore.selectedPublicationsCount} selected${\r\n            sessionStore.excludedPublicationsCount\r\n              ? `; ${sessionStore.excludedPublicationsCount} excluded`\r\n              : ''\r\n          })`\"\r\n          v-show=\"!sessionStore.isEmpty\"\r\n        >\r\n          <b-navbar-item @click=\"sessionStore.exportSession\">\r\n            <b-icon icon=\"export\"></b-icon>\r\n            <span class=\"ml-2\">Export session as JSON</span>\r\n          </b-navbar-item>\r\n          <b-navbar-item @click=\"sessionStore.exportAllBibtex\">\r\n            <b-icon icon=\"export\"></b-icon>\r\n            <span class=\"ml-2\">Export selected as BibTeX</span>\r\n          </b-navbar-item>\r\n          <b-navbar-item\r\n            @click=\"sessionStore.clearSession\"\r\n            class=\"has-text-danger\"\r\n          >\r\n            <b-icon icon=\"delete\"></b-icon\r\n            ><span class=\"ml-2\"><span class=\"key\">C</span>lear session</span>\r\n          </b-navbar-item>\r\n        </b-navbar-dropdown>\r\n      </template>\r\n      <template #end>\r\n        <b-navbar-item tag=\"div\" class=\"mr-6 ml-1\">\r\n          <a href=\"https://twitter.com/pure_suggest\">\r\n            <b-icon icon=\"twitter\"></b-icon>\r\n          </a>\r\n          <a href=\"https://github.com/fabian-beck/pure-suggest\" class=\"ml-5\">\r\n            <b-icon icon=\"github\"></b-icon>\r\n          </a>\r\n        </b-navbar-item>\r\n        <b-navbar-dropdown\r\n          label=\"\"\r\n          icon-left=\"dots-vertical\"\r\n          right\r\n          collapsible\r\n        >\r\n          <b-navbar-item @click=\"interfaceStore.openFeedback\">\r\n            <b-icon icon=\"comment-quote-outline\"></b-icon\r\n            ><span class=\"ml-2\">Feedback</span>\r\n          </b-navbar-item>\r\n          <b-navbar-item\r\n            @click=\"interfaceStore.isKeyboardControlsShown = true\"\r\n            class=\"is-hidden-touch\"\r\n          >\r\n            <b-icon icon=\"keyboard-outline\"></b-icon\r\n            ><span class=\"ml-2\">Keyboard controls</span>\r\n          </b-navbar-item>\r\n          <b-navbar-item @click=\"interfaceStore.isAboutPageShown = true\">\r\n            <b-icon icon=\"information-outline\"></b-icon\r\n            ><span class=\"ml-2\">About</span>\r\n          </b-navbar-item>\r\n          <b-navbar-item\r\n            @click=\"sessionStore.clearCache\"\r\n            class=\"has-text-danger\"\r\n          >\r\n            <b-icon icon=\"cached\"></b-icon\r\n            ><span class=\"ml-2\">Clear cache (and session)</span>\r\n          </b-navbar-item>\r\n        </b-navbar-dropdown>\r\n      </template>\r\n    </b-navbar>\r\n    <div class=\"columns\" v-show=\"sessionStore.isEmpty\">\r\n      <div class=\"column\">\r\n        <div class=\"subtitle level-item mt-2\">\r\n          {{ this.$appSubtitle }}\r\n        </div>\r\n      </div>\r\n      <div class=\"column is-two-thirds\">\r\n        <div\r\n          class=\"notification has-text-centered p-2\"\r\n          v-show=\"sessionStore.isEmpty\"\r\n        >\r\n          <p>\r\n            Based on a set of selected publications,\r\n            <b class=\"has-text-info\">suggest</b>ing related\r\n            <b class=\"has-text-primary\">pu</b>blications connected by\r\n            <b class=\"has-text-primary\">re</b>ferences.\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { useSessionStore } from \"./../stores/session.js\";\r\nimport { useInterfaceStore } from \"./../stores/interface.js\";\r\n\r\nexport default {\r\n  name: \"HeaderPanel\",\r\n  setup() {\r\n    const sessionStore = useSessionStore();\r\n    const interfaceStore = useInterfaceStore();\r\n    return { sessionStore, interfaceStore };\r\n  },\r\n  props: {\r\n    isMobile: Boolean,\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\r\n.title {\r\n  font-size: $size-4;\r\n}\r\n\r\n.subtitle {\r\n  font-size: $size-5;\r\n}\r\n\r\n.columns {\r\n  & .column {\r\n    margin: $block-spacing;\r\n  }\r\n}\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./HeaderPanel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./HeaderPanel.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./HeaderPanel.vue?vue&type=template&id=91105b18&scoped=true&\"\nimport script from \"./HeaderPanel.vue?vue&type=script&lang=js&\"\nexport * from \"./HeaderPanel.vue?vue&type=script&lang=js&\"\nimport style0 from \"./HeaderPanel.vue?vue&type=style&index=0&id=91105b18&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"91105b18\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"selected-publications box has-background-primary\"},[_c('div',{staticClass:\"level\"},[_c('div',{staticClass:\"level-left has-text-white\"},[_c('div',{directives:[{name:\"tippy\",rawName:\"v-tippy\"}],staticClass:\"level-item\",attrs:{\"data-tippy-content\":\"The <b>publications selected as seeds</b> for computing the suggestions, sorted by score.\"}},[_c('b-icon',{attrs:{\"icon\":\"water-outline\"}}),_c('h2',{staticClass:\"is-size-5 ml-2\"},[_vm._v(\"Selected\")])],1)]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.sessionStore.isEmpty),expression:\"!sessionStore.isEmpty\"}],staticClass:\"level-right\"},[_c('div',{staticClass:\"level-item\"},[_c('b-button',{directives:[{name:\"tippy\",rawName:\"v-tippy\"}],staticClass:\"compact-button\",attrs:{\"icon-left\":\"magnify\",\"data-tippy-content\":\"<span class='key'>S</span>earch/import specific publications to be added to selected.\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.interfaceStore.openSearch()}}})],1)])]),_c('div',{staticClass:\"header\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.sessionStore.isEmpty),expression:\"!sessionStore.isEmpty\"}],staticClass:\"notification has-background-warning-light p-2 pt-3 is-gapless\"},[_c('BoostKeywordsComponent')],1),_c('div',[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.sessionStore.isUpdatable),expression:\"sessionStore.isUpdatable\"}],staticClass:\"notification has-background-primary-light media p-2\"},[_c('b-icon',{staticClass:\"media-left ml-2 mt-2 is-hidden-mobile\",attrs:{\"icon\":\"tray-full\"}}),_c('div',{staticClass:\"media-content has-text-centered mt-2\"},[_c('b',[_vm._v(\"Queue:\")]),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.sessionStore.selectedQueue.length),expression:\"sessionStore.selectedQueue.length\"}]},[_vm._v(\" \"+_vm._s(_vm.sessionStore.selectedQueue.length > 1 ? `${_vm.sessionStore.selectedQueue.length} publications` : \"1 publication\")+\" to be added\")]),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(\n              _vm.sessionStore.selectedQueue.length &&\n              _vm.sessionStore.excludedQueue.length\n            ),expression:\"\\n              sessionStore.selectedQueue.length &&\\n              sessionStore.excludedQueue.length\\n            \"}]},[_vm._v(\" and \")]),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.sessionStore.excludedQueue.length),expression:\"sessionStore.excludedQueue.length\"}]},[_vm._v(\" \"+_vm._s(_vm.sessionStore.excludedQueue.length > 1 ? `${_vm.sessionStore.excludedQueue.length} publications` : \"1 publication\")+\" to be excluded\")]),_vm._v(\". \")]),_c('div',{staticClass:\"media-right level\"},[_c('b-button',{directives:[{name:\"tippy\",rawName:\"v-tippy\"}],staticClass:\"button ml-2 level-item\",attrs:{\"icon-left\":\"undo\",\"data-tippy-content\":\"Clear queue and discard update.\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.sessionStore.clearQueues()}}}),_c('b-button',{directives:[{name:\"tippy\",rawName:\"v-tippy\"}],staticClass:\"button has-background-primary has-text-white ml-2 level-item\",attrs:{\"icon-left\":\"update\",\"data-tippy-content\":\"Update suggested and excluded publications with queue and compute new suggestions.\"},on:{\"click\":_vm.sessionStore.updateQueued}},[_c('span',{staticClass:\"key\"},[_vm._v(\"U\")]),_vm._v(\"pdate\")])],1)],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.sessionStore.isEmpty),expression:\"sessionStore.isEmpty\"}],staticClass:\"notification has-text-centered has-background-primary-light p-2\"},[_vm._m(0),_c('div',{staticClass:\"level mt-2\"},[_c('div',{staticClass:\"level-item\"}),_c('div',{staticClass:\"level-item\"},[_c('b-button',{staticClass:\"button has-background-primary-light\",attrs:{\"icon-left\":\"magnify\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.interfaceStore.openSearch()}}},[_vm._v(\" Search/import \")])],1),_c('div',{staticClass:\"level-item\"},[_c('b-button',{staticClass:\"button has-background-primary-light\",attrs:{\"icon-left\":\"import\"},on:{\"click\":_vm.importSession}},[_vm._v(\" Import session \")])],1),_c('div',{staticClass:\"level-item\"},[_c('b-button',{staticClass:\"button has-background-primary-light\",attrs:{\"icon-left\":\"file-document\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.sessionStore.loadExample()}}},[_vm._v(\" Load example \")])],1)])])])]),_c('PublicationListComponent',{ref:\"publicationList\",attrs:{\"publications\":_vm.sessionStore.selectedPublications}})],1)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('p',[_c('i',[_vm._v(\"To start, \"),_c('b',[_vm._v(\"add publications\")]),_vm._v(\" to selected:\")])])\n}]\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"field has-addons is-floating-label boost\"},[_c('label',{staticClass:\"label\"},[_vm._v(\"Keywords\")]),_c('p',{staticClass:\"control has-icons-right is-expanded\"},[_c('highlightable-input',{directives:[{name:\"tippy\",rawName:\"v-tippy\"}],staticClass:\"input boost\",attrs:{\"highlight\":_vm.highlight,\"spellcheck\":\"false\",\"type\":\"text\",\"data-tippy-content\":\"Boost by factors of 2 the score of publications that contain the following keyword(s) in their title.<br><br>Use ',' to separate multiple keywords, use '|' to separate alternatives/synonyms of the same keywords.\"},model:{value:(_vm.sessionStore.boostKeywordString),callback:function ($$v) {_vm.$set(_vm.sessionStore, \"boostKeywordString\", $$v)},expression:\"sessionStore.boostKeywordString\"}}),_c('span',{staticClass:\"icon is-small is-right is-clickable\"},[_c('i',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.sessionStore.boostKeywordString),expression:\"sessionStore.boostKeywordString\"}],staticClass:\"delete\",on:{\"click\":function($event){$event.stopPropagation();return _vm.sessionStore.setBoostKeywordString('')}}})])],1),_c('p',{staticClass:\"control\"},[_c('b-button',{staticClass:\"button has-background-warning\",attrs:{\"type\":\"submit\",\"icon-left\":\"chevron-double-up\"},on:{\"click\":_vm.sessionStore.updateScores}},[_c('span',[_c('span',{staticClass:\"key\"},[_vm._v(\"B\")]),_vm._v(\"oost\")])])],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"field has-addons is-floating-label boost\">\r\n    <label class=\"label\">Keywords</label>\r\n    <p class=\"control has-icons-right is-expanded\">\r\n      <highlightable-input\r\n        class=\"input boost\"\r\n        :highlight=\"highlight\"\r\n        v-model=\"sessionStore.boostKeywordString\"\r\n        spellcheck=\"false\"\r\n        type=\"text\"\r\n        data-tippy-content=\"Boost by factors of 2 the score of publications that contain the following keyword(s) in their title.<br><br>Use ',' to separate multiple keywords, use '|' to separate alternatives/synonyms of the same keywords.\"\r\n        v-tippy\r\n      />\r\n      <span class=\"icon is-small is-right is-clickable\">\r\n        <i\r\n          class=\"delete\"\r\n          v-show=\"sessionStore.boostKeywordString\"\r\n          @click.stop=\"sessionStore.setBoostKeywordString('')\"\r\n        ></i>\r\n      </span>\r\n    </p>\r\n    <p class=\"control\">\r\n      <b-button\r\n        class=\"button has-background-warning\"\r\n        type=\"submit\"\r\n        icon-left=\"chevron-double-up\"\r\n        v-on:click=\"sessionStore.updateScores\"\r\n      >\r\n        <span><span class=\"key\">B</span>oost</span>\r\n      </b-button>\r\n    </p>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { useSessionStore } from \"./../stores/session.js\";\r\nimport { useInterfaceStore } from \"./../stores/interface.js\";\r\n\r\nimport HighlightableInput from \"vue-highlightable-input\";\r\n\r\nexport default {\r\n  name: \"BoostKeywordsComponent\",\r\n\r\n  components: {\r\n    HighlightableInput,\r\n  },\r\n\r\n  setup() {\r\n    const sessionStore = useSessionStore();\r\n    const interfaceStore = useInterfaceStore();\r\n    return { sessionStore, interfaceStore };\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      highlight: [\r\n        {\r\n          text: \",\",\r\n          style: \"color: #ccc; padding-left: 0.25rem; padding-right: 0.75rem;\",\r\n        },\r\n        {\r\n          text: \"|\",\r\n          style: \"color: #ccc; padding-left: 0.25rem; padding-right: 0.25rem;\",\r\n        },\r\n        {\r\n          text: /[^,|]+\\b/g, // match any character except \",\" and \"|\"; last character should not be a whitespace\r\n          style:\r\n            \"text-decoration: underline; text-decoration-color: hsl(48, 100%, 67%); text-decoration-thickness: 0.25rem;\",\r\n        },\r\n      ],\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.boost {\r\n  .is-expanded {\r\n    width: 0;\r\n    \r\n    & .input {\r\n      text-transform: lowercase;\r\n      text-overflow: inherit;\r\n      overflow: hidden;\r\n      display: inline-block;\r\n      white-space: nowrap;\r\n      user-select: text;\r\n\r\n      & br {\r\n        display: none;\r\n      }\r\n\r\n      & * {\r\n        display: inline;\r\n        white-space: nowrap;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./BoostKeywordsComponent.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./BoostKeywordsComponent.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BoostKeywordsComponent.vue?vue&type=template&id=69e82026&\"\nimport script from \"./BoostKeywordsComponent.vue?vue&type=script&lang=js&\"\nexport * from \"./BoostKeywordsComponent.vue?vue&type=script&lang=js&\"\nimport style0 from \"./BoostKeywordsComponent.vue?vue&type=style&index=0&id=69e82026&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('ul',{staticClass:\"publication-list has-background-white\"},_vm._l((_vm.publications),function(publication){return _c('PublicationComponent',{key:publication.doi,attrs:{\"publication\":publication,\"suggestion\":_vm.suggestion},on:{\"add\":_vm.addPublication,\"activate\":_vm.activatePublication}})}),1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('li',[(\n      _vm.sessionStore.isQueuingForSelected(_vm.publication.doi) ||\n      _vm.sessionStore.isQueuingForExcluded(_vm.publication.doi)\n    )?_c('b-message',{staticClass:\"waitingNotification\",class:{\n      'is-primary': _vm.sessionStore.isQueuingForSelected(_vm.publication.doi),\n      'is-dark': _vm.sessionStore.isQueuingForExcluded(_vm.publication.doi),\n    },attrs:{\"has-icon\":\"\",\"icon\":\"tray-full\",\"icon-size\":\"mdi-24px\"}},[_c('div',{staticClass:\"level is-mobile\"},[_c('div',{staticClass:\"level-item\"},[_vm._v(\" To be \"),(_vm.sessionStore.isQueuingForSelected(_vm.publication.doi))?_c('span',[_c('b',[_vm._v(\"selected \")]),_vm._v(\" \"),_c('b-icon',{attrs:{\"icon\":\"plus-thick\",\"size\":\"is-small\"}})],1):_c('span',[_c('b',[_vm._v(\" excluded \")]),_c('b-icon',{attrs:{\"icon\":\"minus-thick\",\"size\":\"is-small\"}})],1)]),_c('div',{staticClass:\"level-right\"},[_c('b-button',{directives:[{name:\"tippy\",rawName:\"v-tippy\"}],staticClass:\"is-small\",attrs:{\"icon-left\":\"undo\",\"data-tippy-content\":\"Remove publication from queue again.\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.sessionStore.removeFromQueues(_vm.publication.doi)}}})],1)])]):_vm._e(),_c('div',{staticClass:\"publication-component media\",class:{\n      active: _vm.publication.isActive,\n      selected: _vm.publication.isSelected,\n      linkedToActive: _vm.publication.isLinkedToActive,\n      unread:\n        !_vm.publication.isRead &&\n        !_vm.publication.isSelected &&\n        _vm.publication.wasFetched,\n      queuing:\n        _vm.sessionStore.isQueuingForSelected(_vm.publication.doi) ||\n        _vm.sessionStore.isQueuingForExcluded(_vm.publication.doi),\n    },attrs:{\"id\":_vm.publication.doi,\"tabindex\":\"0\"},on:{\"focus\":_vm.activate,\"click\":function($event){$event.stopPropagation();return _vm.activate.apply(null, arguments)}}},[_c('tippy',{staticClass:\"media-left\",scopedSlots:_vm._u([{key:\"trigger\",fn:function(){return [_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.publication.wasFetched),expression:\"publication.wasFetched\"}],staticClass:\"glyph has-text-centered\",style:({ 'background-color': _vm.publication.scoreColor })},[_c('div',{staticClass:\"tooltip-target\"},[_c('div',{staticClass:\"is-size-3 is-inline-block\"},[_vm._v(\" \"+_vm._s(_vm.publication.score)+\" \")]),(_vm.publication.boostFactor > 1)?_c('div',{staticClass:\"boost-indicator\",class:_vm.chevronType},[_c('b-icon',{attrs:{\"icon\":_vm.chevronType,\"size\":\"is-small\"}})],1):_vm._e()]),_c('div',{staticClass:\"reference-counts is-size-6\"},[_c('div',{staticClass:\"is-pulled-left\"},[(\n                  _vm.publication.citationCount > 0 ||\n                  _vm.publication.referenceDois.length === 0\n                )?_c('span',{class:_vm.publication.referenceDois.length ? '' : 'unknown'},[_c('b-icon',{attrs:{\"icon\":\"arrow-bottom-left-thick\",\"size\":\"is-small\"}}),_vm._v(\" \"+_vm._s(_vm.publication.citationCount ? _vm.publication.citationCount : \"-\")+\" \")],1):_vm._e()]),_c('div',{staticClass:\"is-pulled-right\"},[(_vm.publication.referenceCount > 0)?_c('span',[_vm._v(\" \"+_vm._s(_vm.publication.referenceCount)+\" \"),_c('b-icon',{attrs:{\"icon\":\"arrow-top-left-thick\",\"size\":\"is-small\"}})],1):_vm._e()])])])]},proxy:true}])},[_c('div',[_vm._v(\" Suggestion score of \"),_c('b',[_vm._v(_vm._s(_vm.publication.score)+\" = \"),(_vm.publication.boostFactor != 1)?_c('span',[_vm._v(\"(\")]):_vm._e(),_vm._v(_vm._s(_vm.publication.citationCount)+\" + \"+_vm._s(_vm.publication.referenceCount)),(_vm.publication.boostFactor != 1)?_c('span',[_vm._v(\")  \"+_vm._s(_vm.publication.boostFactor))]):_vm._e()]),_vm._v(\",\"),_c('br'),_vm._v(\" citing \"),_c('b',[_vm._v(_vm._s(_vm.publication.citationCount))]),_vm._v(\" (\"),_c('b-icon',{class:_vm.publication.referenceDois.length ? '' : 'unknown',attrs:{\"icon\":\"arrow-bottom-left-thick\",\"size\":\"is-small\"}}),(!_vm.publication.referenceDois.length)?_c('span',{staticClass:\"unknown\"},[_vm._v(\", citing data not available\")]):_vm._e(),_vm._v(\") and cited by \"),_c('b',[_vm._v(_vm._s(_vm.publication.referenceCount))]),_vm._v(\" (\"),_c('b-icon',{attrs:{\"icon\":\"arrow-top-left-thick\",\"size\":\"is-small\"}}),_vm._v(\") selected publications\"),(_vm.publication.boostFactor != 1)?_c('span',[_vm._v(\", multiplied by a boost factor of \"),_c('b',[_vm._v(_vm._s(_vm.publication.boostFactor)+\" = 2\"),_c('sup',[_vm._v(_vm._s(_vm.publication.boostMatches))])]),_vm._v(\" (\"),_c('b-icon',{attrs:{\"icon\":_vm.chevronType,\"size\":\"is-small\"}}),_vm._v(\"; \"+_vm._s(_vm.publication.boostMatches)+\" keyword\"),(_vm.publication.boostMatches > 1)?_c('span',[_vm._v(\"s\")]):_vm._e(),_vm._v(\" matched)\")],1):_vm._e(),_vm._v(\". \")],1),(_vm.publication.isLinkedToActive)?_c('div',[_c('br'),_vm._v(\" Marked as refered by or referencing currently active publication. \")]):_vm._e(),(_vm.publication.isActive)?_c('div',[_c('br'),_vm._v(\" Currently active, with linked publications highlighted. \")]):_vm._e()]),_c('div',{staticClass:\"media-content\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.publication.wasFetched),expression:\"publication.wasFetched\"}],staticClass:\"summary\"},[(_vm.publication.title)?_c('span',[_c('b',[_c('span',{domProps:{\"innerHTML\":_vm._s(\n                _vm.publication.titleHighlighted\n                  ? _vm.publication.titleHighlighted\n                  : _vm.publication.title\n              )}})]),_vm._v(\"\")]):_vm._e(),(!_vm.publication.title)?_c('span',{staticClass:\"unknown\"},[_c('b',[_vm._v(\"[unknown title] \")])]):_vm._e(),_c('span',[_vm._v(\"(\"),_c('span',[_vm._v(_vm._s(_vm.publication.authorShort ? _vm.publication.authorShort + \", \" : \"\"))]),_c('span',{class:_vm.publication.year ? '' : 'unknown'},[_vm._v(_vm._s(_vm.publication.year ? _vm.publication.year : \"[unknown year]\"))]),_vm._v(\") \")]),_c('b-taglist',[(_vm.publication.hasTag())?_c('b-icon',{staticClass:\"mr-2\",attrs:{\"icon\":\"tag\",\"size\":\"is-small\"}}):_vm._e(),(_vm.publication.isHighlyCited)?_c('b-tag',{directives:[{name:\"tippy\",rawName:\"v-tippy\"}],staticClass:\"is-dark\",attrs:{\"icon\":\"star\",\"size\":\"is-small\",\"data-tippy-content\":`Identified as highly cited: ${_vm.publication.isHighlyCited}.`}},[_vm._v(\"Highly cited\")]):_vm._e(),(_vm.publication.isSurvey)?_c('b-tag',{directives:[{name:\"tippy\",rawName:\"v-tippy\"}],staticClass:\"is-dark\",attrs:{\"icon\":\"table\",\"size\":\"is-small\",\"data-tippy-content\":`Identified as literature survey: ${_vm.publication.isSurvey}.`}},[_vm._v(\"Literature survey\")]):_vm._e(),(_vm.publication.isNew)?_c('b-tag',{directives:[{name:\"tippy\",rawName:\"v-tippy\"}],staticClass:\"is-dark\",attrs:{\"icon\":\"alarm\",\"size\":\"is-small\",\"data-tippy-content\":`Identified as new: ${_vm.publication.isNew}.`}},[_vm._v(\"New\")]):_vm._e(),(_vm.publication.isUnnoted)?_c('b-tag',{directives:[{name:\"tippy\",rawName:\"v-tippy\"}],staticClass:\"is-dark\",attrs:{\"icon\":\"alert-box-outline\",\"size\":\"is-small\",\"data-tippy-content\":`Identified as yet unnoted: ${_vm.publication.isUnnoted}.`}},[_vm._v(\"Unnoted\")]):_vm._e(),(_vm.publication.isOpenAccess)?_c('b-tag',{directives:[{name:\"tippy\",rawName:\"v-tippy\"}],staticClass:\"is-dark\",attrs:{\"icon\":\"lock-open-check-outline\",\"size\":\"is-small\",\"data-tippy-content\":`Identified as open access: open access link available.`}},[_vm._v(\"Open access\")]):_vm._e()],1)],1),(_vm.publication.isActive)?_c('div',[_c('span',[(_vm.publication.author)?_c('span',{domProps:{\"innerHTML\":_vm._s(\n              _vm.publication.authorOrcid +\n              (_vm.publication.authorOrcid.endsWith('.') ? '' : '.')\n            )},on:{\"click\":function($event){$event.stopPropagation();return _vm.refocus.apply(null, arguments)},\"mouseup\":function($event){if('button' in $event && $event.button !== 1)return null;$event.stopPropagation();return _vm.refocus.apply(null, arguments)}}}):_vm._e()]),(_vm.publication.container)?_c('span',[_c('em',{domProps:{\"innerHTML\":_vm._s(` ${_vm.publication.container}`)}}),_vm._v(\". \")]):_vm._e(),_vm._m(0),_c('a',{attrs:{\"href\":_vm.publication.doiUrl},on:{\"click\":function($event){$event.stopPropagation();return _vm.refocus.apply(null, arguments)},\"mouseup\":function($event){if('button' in $event && $event.button !== 1)return null;$event.stopPropagation();return _vm.refocus.apply(null, arguments)}}},[_vm._v(_vm._s(_vm.publication.doi))])]):_vm._e(),(\n          !_vm.publication.year &&\n          !_vm.publication.title & !_vm.publication.author &&\n          !_vm.publication.container &&\n          _vm.publication.isActive\n        )?_c('div',{staticClass:\"notification has-background-danger-light has-text-danger-dark\"},[_vm._v(\" No metadata could be retrieved for the publication from \"),_c('a',{attrs:{\"href\":`https://opencitations.net/index/coci/api/v1/metadata/${_vm.publication.doi}`},on:{\"click\":function($event){$event.stopPropagation();return _vm.refocus.apply(null, arguments)},\"mouseup\":function($event){if('button' in $event && $event.button !== 1)return null;$event.stopPropagation();return _vm.refocus.apply(null, arguments)}}},[_vm._v(\"Open Citations\")]),_vm._v(\". \"),(_vm.publication.score === 0)?_c('span',[_vm._v(\"Also, it is not cited by another selected publication\"),_c('b',[_vm._v(\"please check if the DOI is correct.\")])]):_vm._e()]):_vm._e(),(!_vm.publication.year && _vm.publication.isActive)?_c('div',{staticClass:\"notification has-background-danger-light has-text-danger-dark\"},[_vm._v(\" The publication cannot be shown in the citation network visualization because of the unknown publication year. \")]):_vm._e(),(_vm.publication.isActive)?_c('div',{staticClass:\"stats-and-links level\"},[_c('div',{staticClass:\"level-left\"},[_c('div',{class:`level-item ${\n              _vm.publication.referenceDois.length ? '' : 'unknown'\n            }`},[_c('label',[_c('b-icon',{attrs:{\"icon\":\"arrow-bottom-left-thick\",\"size\":\"is-small\"}}),_vm._v(\"Citing:\")],1),_c('b',[_vm._v(_vm._s(_vm.publication.referenceDois.length ? _vm.publication.referenceDois.length.toLocaleString(\"en\") : \"not available\"))])]),_c('div',{staticClass:\"level-item\"},[_c('label',[_c('b-icon',{attrs:{\"icon\":\"arrow-top-left-thick\",\"size\":\"is-small\"}}),_vm._v(\"Cited by:\")],1),_c('b',[_vm._v(_vm._s(_vm.publication.citationDois.length.toLocaleString(\"en\")))]),(_vm.publication.citationsPerYear > 0)?_c('span',[_vm._v(\" (\"+_vm._s(_vm.publication.citationsPerYear.toFixed(1))+\"/year) \")]):_vm._e()])]),(_vm.publication.title && _vm.publication.isActive)?_c('div',{staticClass:\"level-right\"},[_c('div',{staticClass:\"level-item\"},[(_vm.publication.abstract)?_c('a',{directives:[{name:\"tippy\",rawName:\"v-tippy\"}],attrs:{\"data-tippy-content\":\"Abs<span class='key'>t</span>ract\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.showAbstract.apply(null, arguments)},\"mouseup\":function($event){if('button' in $event && $event.button !== 1)return null;$event.stopPropagation();return _vm.showAbstract.apply(null, arguments)},\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.showAbstract.apply(null, arguments)}}},[_c('b-icon',{attrs:{\"icon\":\"text\"}})],1):_vm._e(),(_vm.publication.oaLink)?_c('a',{directives:[{name:\"tippy\",rawName:\"v-tippy\"}],staticClass:\"ml-5\",attrs:{\"href\":_vm.publication.oaLink,\"data-tippy-content\":\"<span class='key'>O</span>pen access\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.refocus.apply(null, arguments)},\"mouseup\":function($event){if('button' in $event && $event.button !== 1)return null;$event.stopPropagation();return _vm.refocus.apply(null, arguments)}}},[_c('b-icon',{attrs:{\"icon\":\"lock-open-check-outline\"}})],1):_vm._e(),_c('a',{directives:[{name:\"tippy\",rawName:\"v-tippy\"}],staticClass:\"ml-5\",attrs:{\"href\":_vm.publication.gsUrl,\"data-tippy-content\":\"<span class='key'>G</span>oogle Scholar\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.refocus.apply(null, arguments)},\"mouseup\":function($event){if('button' in $event && $event.button !== 1)return null;$event.stopPropagation();return _vm.refocus.apply(null, arguments)}}},[_c('b-icon',{attrs:{\"icon\":\"school\"}})],1),_c('a',{directives:[{name:\"tippy\",rawName:\"v-tippy\"}],staticClass:\"ml-5\",attrs:{\"data-tippy-content\":\"Export as BibTe<span class='key'>X</span> citation\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.exportBibtex.apply(null, arguments)},\"mouseup\":function($event){if('button' in $event && $event.button !== 1)return null;$event.stopPropagation();return _vm.exportBibtex.apply(null, arguments)},\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\"))return null;return _vm.exportBibtex.apply(null, arguments)}}},[_c('b-icon',{attrs:{\"icon\":\"format-quote-close\"}})],1)])]):_vm._e()]):_vm._e()]),_c('div',{staticClass:\"media-right\"},[_c('div',[(_vm.suggestion)?_c('b-button',{directives:[{name:\"tippy\",rawName:\"v-tippy\"}],staticClass:\"is-primary is-small\",attrs:{\"icon-left\":\"plus-thick\",\"data-tippy-content\":\"Mark publication to be added to selected publications.\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.$emit('add', _vm.publication.doi)}}}):_vm._e()],1),_c('div',[_c('b-button',{directives:[{name:\"tippy\",rawName:\"v-tippy\"}],staticClass:\"is-small\",attrs:{\"icon-left\":\"minus-thick\",\"data-tippy-content\":\"Mark publication to be excluded for suggestions.\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.sessionStore.queueForExcluded(_vm.publication.doi)}}})],1)])],1)],1)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('label',[_c('span',{staticClass:\"key\"},[_vm._v(\"D\")]),_vm._v(\"OI:\")])\n}]\n\nexport { render, staticRenderFns }","<template>\r\n  <li>\r\n    <b-message\r\n      class=\"waitingNotification\"\r\n      :class=\"{\r\n        'is-primary': sessionStore.isQueuingForSelected(publication.doi),\r\n        'is-dark': sessionStore.isQueuingForExcluded(publication.doi),\r\n      }\"\r\n      v-if=\"\r\n        sessionStore.isQueuingForSelected(publication.doi) ||\r\n        sessionStore.isQueuingForExcluded(publication.doi)\r\n      \"\r\n      has-icon\r\n      icon=\"tray-full\"\r\n      icon-size=\"mdi-24px\"\r\n      ><div class=\"level is-mobile\">\r\n        <div class=\"level-item\">\r\n          To be&nbsp;\r\n          <span v-if=\"sessionStore.isQueuingForSelected(publication.doi)\"\r\n            ><b>selected </b> <b-icon icon=\"plus-thick\" size=\"is-small\"></b-icon\r\n          ></span>\r\n          <span v-else\r\n            ><b> excluded </b\r\n            ><b-icon icon=\"minus-thick\" size=\"is-small\"></b-icon\r\n          ></span>\r\n        </div>\r\n        <div class=\"level-right\">\r\n          <b-button\r\n            class=\"is-small\"\r\n            icon-left=\"undo\"\r\n            data-tippy-content=\"Remove publication from queue again.\"\r\n            v-tippy\r\n            @click.stop=\"sessionStore.removeFromQueues(publication.doi)\"\r\n          >\r\n          </b-button>\r\n        </div>\r\n      </div>\r\n    </b-message>\r\n    <div\r\n      class=\"publication-component media\"\r\n      :class=\"{\r\n        active: publication.isActive,\r\n        selected: publication.isSelected,\r\n        linkedToActive: publication.isLinkedToActive,\r\n        unread:\r\n          !publication.isRead &&\r\n          !publication.isSelected &&\r\n          publication.wasFetched,\r\n        queuing:\r\n          sessionStore.isQueuingForSelected(publication.doi) ||\r\n          sessionStore.isQueuingForExcluded(publication.doi),\r\n      }\"\r\n      :id=\"publication.doi\"\r\n      tabindex=\"0\"\r\n      v-on:focus=\"activate\"\r\n      @click.stop=\"activate\"\r\n    >\r\n      <tippy class=\"media-left\">\r\n        <template v-slot:trigger>\r\n          <div\r\n            class=\"glyph has-text-centered\"\r\n            v-bind:style=\"{ 'background-color': publication.scoreColor }\"\r\n            v-show=\"publication.wasFetched\"\r\n          >\r\n            <div class=\"tooltip-target\">\r\n              <div class=\"is-size-3 is-inline-block\">\r\n                {{ publication.score }}\r\n              </div>\r\n              <div\r\n                class=\"boost-indicator\"\r\n                :class=\"chevronType\"\r\n                v-if=\"publication.boostFactor > 1\"\r\n              >\r\n                <b-icon :icon=\"chevronType\" size=\"is-small\" />\r\n              </div>\r\n            </div>\r\n            <div class=\"reference-counts is-size-6\">\r\n              <div class=\"is-pulled-left\">\r\n                <span\r\n                  v-if=\"\r\n                    publication.citationCount > 0 ||\r\n                    publication.referenceDois.length === 0\r\n                  \"\r\n                  :class=\"publication.referenceDois.length ? '' : 'unknown'\"\r\n                >\r\n                  <b-icon\r\n                    icon=\"arrow-bottom-left-thick\"\r\n                    size=\"is-small\"\r\n                  ></b-icon>\r\n                  {{\r\n                    publication.citationCount ? publication.citationCount : \"-\"\r\n                  }}\r\n                </span>\r\n              </div>\r\n              <div class=\"is-pulled-right\">\r\n                <span v-if=\"publication.referenceCount > 0\">\r\n                  {{ publication.referenceCount }}\r\n                  <b-icon icon=\"arrow-top-left-thick\" size=\"is-small\"></b-icon>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </template>\r\n        <div>\r\n          Suggestion score of\r\n          <b\r\n            >{{ publication.score }} =\r\n            <span v-if=\"publication.boostFactor != 1\">(</span\r\n            >{{ publication.citationCount }} + {{ publication.referenceCount\r\n            }}<span v-if=\"publication.boostFactor != 1\"\r\n              >) &middot; {{ publication.boostFactor }}</span\r\n            ></b\r\n          >,<br />\r\n          citing <b>{{ publication.citationCount }}</b> (<b-icon\r\n            icon=\"arrow-bottom-left-thick\"\r\n            size=\"is-small\"\r\n            :class=\"publication.referenceDois.length ? '' : 'unknown'\"\r\n          ></b-icon\r\n          ><span v-if=\"!publication.referenceDois.length\" class=\"unknown\"\r\n            >, citing data not available</span\r\n          >) and cited by <b>{{ publication.referenceCount }}</b> (<b-icon\r\n            icon=\"arrow-top-left-thick\"\r\n            size=\"is-small\"\r\n          ></b-icon\r\n          >) selected publications<span v-if=\"publication.boostFactor != 1\"\r\n            >, multiplied by a boost factor of\r\n            <b\r\n              >{{ publication.boostFactor }} = 2<sup>{{\r\n                publication.boostMatches\r\n              }}</sup>\r\n            </b>\r\n            (<b-icon :icon=\"chevronType\" size=\"is-small\"></b-icon>;\r\n            {{ publication.boostMatches }} keyword<span\r\n              v-if=\"publication.boostMatches > 1\"\r\n              >s</span\r\n            >\r\n            matched)</span\r\n          >.\r\n        </div>\r\n        <div v-if=\"publication.isLinkedToActive\">\r\n          <br />\r\n          Marked as refered by or referencing currently active publication.\r\n        </div>\r\n        <div v-if=\"publication.isActive\">\r\n          <br />\r\n          Currently active, with linked publications highlighted.\r\n        </div>\r\n      </tippy>\r\n      <div class=\"media-content\">\r\n        <div class=\"summary\" v-show=\"publication.wasFetched\">\r\n          <span v-if=\"publication.title\">\r\n            <b\r\n              ><span\r\n                v-html=\"\r\n                  publication.titleHighlighted\r\n                    ? publication.titleHighlighted\r\n                    : publication.title\r\n                \"\r\n              ></span></b\r\n            >&ensp;</span\r\n          >\r\n          <span v-if=\"!publication.title\" class=\"unknown\">\r\n            <b>[unknown title] </b>\r\n          </span>\r\n          <span\r\n            >(<span>{{\r\n              publication.authorShort ? publication.authorShort + \", \" : \"\"\r\n            }}</span\r\n            ><span :class=\"publication.year ? '' : 'unknown'\">{{\r\n              publication.year ? publication.year : \"[unknown year]\"\r\n            }}</span\r\n            >)\r\n          </span>\r\n          <b-taglist>\r\n            <b-icon\r\n              icon=\"tag\"\r\n              size=\"is-small\"\r\n              class=\"mr-2\"\r\n              v-if=\"publication.hasTag()\"\r\n            ></b-icon>\r\n            <b-tag\r\n              icon=\"star\"\r\n              class=\"is-dark\"\r\n              size=\"is-small\"\r\n              v-if=\"publication.isHighlyCited\"\r\n              :data-tippy-content=\"`Identified as highly cited: ${publication.isHighlyCited}.`\"\r\n              v-tippy\r\n              >Highly cited</b-tag\r\n            >\r\n            <b-tag\r\n              icon=\"table\"\r\n              class=\"is-dark\"\r\n              size=\"is-small\"\r\n              v-if=\"publication.isSurvey\"\r\n              :data-tippy-content=\"`Identified as literature survey: ${publication.isSurvey}.`\"\r\n              v-tippy\r\n              >Literature survey</b-tag\r\n            >\r\n            <b-tag\r\n              icon=\"alarm\"\r\n              class=\"is-dark\"\r\n              size=\"is-small\"\r\n              v-if=\"publication.isNew\"\r\n              :data-tippy-content=\"`Identified as new: ${publication.isNew}.`\"\r\n              v-tippy\r\n              >New</b-tag\r\n            >\r\n            <b-tag\r\n              icon=\"alert-box-outline\"\r\n              class=\"is-dark\"\r\n              size=\"is-small\"\r\n              v-if=\"publication.isUnnoted\"\r\n              :data-tippy-content=\"`Identified as yet unnoted: ${publication.isUnnoted}.`\"\r\n              v-tippy\r\n              >Unnoted</b-tag\r\n            >\r\n            <b-tag\r\n              icon=\"lock-open-check-outline\"\r\n              class=\"is-dark\"\r\n              size=\"is-small\"\r\n              v-if=\"publication.isOpenAccess\"\r\n              :data-tippy-content=\"`Identified as open access: open access link available.`\"\r\n              v-tippy\r\n              >Open access</b-tag\r\n            >\r\n          </b-taglist>\r\n        </div>\r\n        <div v-if=\"publication.isActive\">\r\n          <span>\r\n            <span\r\n              v-html=\"\r\n                publication.authorOrcid +\r\n                (publication.authorOrcid.endsWith('.') ? '' : '.')\r\n              \"\r\n              v-if=\"publication.author\"\r\n              @click.stop=\"refocus\"\r\n              @click.middle.stop=\"refocus\"\r\n            ></span>\r\n          </span>\r\n          <span v-if=\"publication.container\">\r\n            <em v-html=\"` ${publication.container}`\"></em>.\r\n          </span>\r\n          <label><span class=\"key\">D</span>OI:</label>\r\n          <a\r\n            :href=\"publication.doiUrl\"\r\n            @click.stop=\"refocus\"\r\n            @click.middle.stop=\"refocus\"\r\n            >{{ publication.doi }}</a\r\n          >\r\n        </div>\r\n        <div\r\n          class=\"notification has-background-danger-light has-text-danger-dark\"\r\n          v-if=\"\r\n            !publication.year &&\r\n            !publication.title & !publication.author &&\r\n            !publication.container &&\r\n            publication.isActive\r\n          \"\r\n        >\r\n          No metadata could be retrieved for the publication from\r\n          <a\r\n            :href=\"`https://opencitations.net/index/coci/api/v1/metadata/${publication.doi}`\"\r\n            @click.stop=\"refocus\"\r\n            @click.middle.stop=\"refocus\"\r\n            >Open Citations</a\r\n          >.\r\n          <span v-if=\"publication.score === 0\"\r\n            >Also, it is not cited by another selected publication&mdash;<b\r\n              >please check if the DOI is correct.</b\r\n            >\r\n          </span>\r\n        </div>\r\n        <div\r\n          class=\"notification has-background-danger-light has-text-danger-dark\"\r\n          v-if=\"!publication.year && publication.isActive\"\r\n        >\r\n          The publication cannot be shown in the citation network visualization\r\n          because of the unknown publication year.\r\n        </div>\r\n        <div v-if=\"publication.isActive\" class=\"stats-and-links level\">\r\n          <div class=\"level-left\">\r\n            <div\r\n              :class=\"`level-item ${\r\n                publication.referenceDois.length ? '' : 'unknown'\r\n              }`\"\r\n            >\r\n              <label\r\n                ><b-icon icon=\"arrow-bottom-left-thick\" size=\"is-small\"></b-icon\r\n                >Citing:</label\r\n              >\r\n              <b>{{\r\n                publication.referenceDois.length\r\n                  ? publication.referenceDois.length.toLocaleString(\"en\")\r\n                  : \"not available\"\r\n              }}</b>\r\n            </div>\r\n            <div class=\"level-item\">\r\n              <label\r\n                ><b-icon icon=\"arrow-top-left-thick\" size=\"is-small\"></b-icon\r\n                >Cited by:</label\r\n              >\r\n              <b>{{ publication.citationDois.length.toLocaleString(\"en\") }}</b>\r\n              <span v-if=\"publication.citationsPerYear > 0\">\r\n                &nbsp;({{ publication.citationsPerYear.toFixed(1) }}/year)\r\n              </span>\r\n            </div>\r\n          </div>\r\n          <div\r\n            class=\"level-right\"\r\n            v-if=\"publication.title && publication.isActive\"\r\n          >\r\n            <div class=\"level-item\">\r\n              <a\r\n                v-if=\"publication.abstract\"\r\n                @click.stop=\"showAbstract\"\r\n                @click.middle.stop=\"showAbstract\"\r\n                @keyup.enter=\"showAbstract\"\r\n                data-tippy-content=\"Abs<span class='key'>t</span>ract\"\r\n                v-tippy\r\n                ><b-icon icon=\"text\"></b-icon\r\n              ></a>\r\n              <a\r\n                v-if=\"publication.oaLink\"\r\n                :href=\"publication.oaLink\"\r\n                class=\"ml-5\"\r\n                @click.stop=\"refocus\"\r\n                @click.middle.stop=\"refocus\"\r\n                data-tippy-content=\"<span class='key'>O</span>pen access\"\r\n                v-tippy\r\n                ><b-icon icon=\"lock-open-check-outline\"></b-icon\r\n              ></a>\r\n              <a\r\n                :href=\"publication.gsUrl\"\r\n                class=\"ml-5\"\r\n                @click.stop=\"refocus\"\r\n                @click.middle.stop=\"refocus\"\r\n                data-tippy-content=\"<span class='key'>G</span>oogle Scholar\"\r\n                v-tippy\r\n                ><b-icon icon=\"school\"></b-icon\r\n              ></a>\r\n              <a\r\n                @click.stop=\"exportBibtex\"\r\n                @click.middle.stop=\"exportBibtex\"\r\n                @keyup.enter=\"exportBibtex\"\r\n                class=\"ml-5\"\r\n                data-tippy-content=\"Export as BibTe<span class='key'>X</span> citation\"\r\n                v-tippy\r\n                ><b-icon icon=\"format-quote-close\"></b-icon\r\n              ></a>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"media-right\">\r\n        <div>\r\n          <b-button\r\n            v-if=\"suggestion\"\r\n            class=\"is-primary is-small\"\r\n            icon-left=\"plus-thick\"\r\n            data-tippy-content=\"Mark publication to be added to selected publications.\"\r\n            @click.stop=\"$emit('add', publication.doi)\"\r\n            v-tippy\r\n          >\r\n          </b-button>\r\n        </div>\r\n        <div>\r\n          <b-button\r\n            class=\"is-small\"\r\n            icon-left=\"minus-thick\"\r\n            data-tippy-content=\"Mark publication to be excluded for suggestions.\"\r\n            @click.stop=\"sessionStore.queueForExcluded(publication.doi)\"\r\n            v-tippy\r\n          >\r\n          </b-button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </li>\r\n</template>\r\n\r\n<script>\r\nimport { useSessionStore } from \"./../stores/session.js\";\r\nimport { useInterfaceStore } from \"./../stores/interface.js\";\r\n\r\nexport default {\r\n  name: \"PublicationComponent\",\r\n  setup() {\r\n    const sessionStore = useSessionStore();\r\n    const interfaceStore = useInterfaceStore();\r\n    return { sessionStore, interfaceStore };\r\n  },\r\n  props: {\r\n    publication: Object,\r\n    suggestion: Boolean,\r\n  },\r\n  computed: {\r\n    chevronType: function () {\r\n      if (this.publication.boostFactor >= 8) {\r\n        return \"chevron-triple-up\";\r\n      } else if (this.publication.boostFactor >= 4) {\r\n        return \"chevron-double-up\";\r\n      } else if (this.publication.boostFactor > 1) {\r\n        return \"chevron-up\";\r\n      }\r\n      return \"\";\r\n    },\r\n  },\r\n  methods: {\r\n    activate: function () {\r\n      this.sessionStore.activatePublicationComponentByDoi(this.publication.doi);\r\n      this.$emit(\"activate\", this.publication.doi);\r\n    },\r\n\r\n    showAbstract: function () {\r\n      this.interfaceStore.showAbstract(this.publication);\r\n    },\r\n\r\n    exportBibtex: function () {\r\n      this.sessionStore.exportSingleBibtex(this.publication);\r\n      this.refocus();\r\n    },\r\n\r\n    refocus: function () {\r\n      document.getElementById(this.publication.doi).focus();\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\nli {\r\n  position: relative;\r\n\r\n  .publication-component {\r\n    padding: 0;\r\n    margin: 0;\r\n    cursor: pointer;\r\n    min-height: 5rem;\r\n    outline-offset: -0.25rem;\r\n    z-index: -1;\r\n    text-shadow: 0 0 15px white;\r\n\r\n    & .media-left {\r\n      margin: 0;\r\n\r\n      & .glyph {\r\n        width: 5rem;\r\n        height: 5rem;\r\n        margin: 0.6rem;\r\n        border-width: 0.125rem;\r\n        border-color: $info;\r\n        border-style: solid;\r\n        @include light-shadow;\r\n\r\n        & .tooltip-target {\r\n          position: relative;\r\n        }\r\n\r\n        & .reference-counts {\r\n          .icon {\r\n            margin: -0.4em;\r\n          }\r\n\r\n          div {\r\n            width: 50%;\r\n          }\r\n        }\r\n\r\n        & .boost-indicator {\r\n          border-radius: 50%;\r\n          position: absolute;\r\n          top: -7px;\r\n          right: -7px;\r\n          @include light-shadow;\r\n          background: $warning;\r\n          font-size: $size-5;\r\n          border: 1px solid $info;\r\n\r\n          & .icon {\r\n            position: relative;\r\n          }\r\n\r\n          &.chevron-up {\r\n            top: -7px;\r\n            right: -7px;\r\n            width: 1.2rem;\r\n            height: 1.2rem;\r\n\r\n            & .icon {\r\n              top: -0.45rem;\r\n            }\r\n          }\r\n\r\n          &.chevron-double-up {\r\n            top: -8px;\r\n            right: -8px;\r\n            width: 1.5rem;\r\n            height: 1.5rem;\r\n\r\n            & .icon {\r\n              top: -0.35rem;\r\n            }\r\n          }\r\n\r\n          &.chevron-triple-up {\r\n            top: -9px;\r\n            right: -9px;\r\n            width: 1.8rem;\r\n            height: 1.8rem;\r\n\r\n            & .icon {\r\n              top: -0.2rem;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    &:hover {\r\n      background: rgba($color: #000000, $alpha: 0.03) !important;\r\n\r\n      & .glyph {\r\n        transform: scale(1.05);\r\n      }\r\n    }\r\n\r\n    &.active {\r\n      background: rgba($color: #000000, $alpha: 0.1) !important;\r\n      cursor: default;\r\n    }\r\n\r\n    &.unread {\r\n      background: rgba($color: $info, $alpha: 0.1);\r\n\r\n      & .summary {\r\n        color: $info-dark;\r\n      }\r\n\r\n      & .glyph {\r\n        color: $info-dark;\r\n      }\r\n    }\r\n\r\n    &.selected .glyph {\r\n      border-color: $primary;\r\n\r\n      & .boost-indicator {\r\n        border-color: $primary;\r\n      }\r\n    }\r\n\r\n    &.active .glyph,\r\n    &.linkedToActive .glyph {\r\n      border-width: 0.3rem;\r\n    }\r\n\r\n    & .glyph > div:focus > div {\r\n      outline: 1px solid $dark;\r\n      outline-offset: 0.1rem;\r\n    }\r\n\r\n    & .media-content {\r\n      padding: 0.5rem;\r\n      overflow: auto;\r\n\r\n      & div.summary {\r\n        margin-bottom: 0.5rem;\r\n\r\n        & .tag {\r\n          margin-top: 0.25rem;\r\n          margin-bottom: 0.25rem;\r\n        }\r\n\r\n        & .tag:focus {\r\n          outline-offset: 0.1rem;\r\n        }\r\n      }\r\n\r\n      & label {\r\n        padding-right: 0.25rem;\r\n      }\r\n\r\n      & .abstract {\r\n        font-style: italic;\r\n        font-size: 0.95rem;\r\n        padding: 0.5rem 0;\r\n\r\n        &::before {\r\n          content: \"Abstract: \";\r\n          font-weight: bold;\r\n        }\r\n      }\r\n\r\n      & .notification {\r\n        padding: 0.5rem;\r\n        margin: 0.5rem 0;\r\n      }\r\n\r\n      & .stats-and-links {\r\n        flex-wrap: wrap;\r\n\r\n        & .level-left,\r\n        & .level-right {\r\n          margin-top: 0.25rem;\r\n          flex-wrap: wrap;\r\n          flex-grow: 1;\r\n        }\r\n\r\n        & .level-item {\r\n          flex-wrap: wrap;\r\n        }\r\n\r\n        & .level-left .level-item {\r\n          margin-right: 1.5rem;\r\n        }\r\n\r\n        & .level-right .level-item {\r\n          justify-content: right;\r\n          margin: 0;\r\n        }\r\n      }\r\n    }\r\n\r\n    & .media-right {\r\n      margin-right: 0.5rem;\r\n\r\n      & .button {\r\n        margin: 0.5rem 0;\r\n      }\r\n    }\r\n\r\n    &.queuing {\r\n      & > div {\r\n        filter: blur(1px) opacity(50%);\r\n      }\r\n    }\r\n\r\n    &:focus,\r\n    &.active {\r\n      outline: 1px solid $dark;\r\n    }\r\n  }\r\n\r\n  & .waitingNotification {\r\n    position: absolute;\r\n    z-index: 1;\r\n    background: white;\r\n    @include light-shadow;\r\n    left: 50%;\r\n    top: 50%;\r\n    transform: translate(-50%, -50%);\r\n    width: max(240px, 30%);\r\n\r\n    & .message-body {\r\n      padding: 0.5rem 0.5rem;\r\n\r\n      & .media-left .icon {\r\n        margin-top: 0.25rem;\r\n      }\r\n\r\n      & .level-left {\r\n        text-align: center;\r\n      }\r\n\r\n      & button {\r\n        margin-left: 1rem;\r\n        margin-top: 0.15rem;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n@include touch {\r\n  .publication-component {\r\n    & .media-content {\r\n      padding-left: 0;\r\n      padding-right: 0;\r\n\r\n      .level {\r\n        & .level-left .level-item {\r\n          justify-content: left;\r\n        }\r\n\r\n        & .level-right .level-item {\r\n          justify-content: right;\r\n        }\r\n      }\r\n    }\r\n    & .media-right {\r\n      margin-left: 0.5rem;\r\n    }\r\n  }\r\n}\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PublicationComponent.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PublicationComponent.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PublicationComponent.vue?vue&type=template&id=27491af3&\"\nimport script from \"./PublicationComponent.vue?vue&type=script&lang=js&\"\nexport * from \"./PublicationComponent.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PublicationComponent.vue?vue&type=style&index=0&id=27491af3&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <ul class=\"publication-list has-background-white\">\r\n    <PublicationComponent\r\n      v-for=\"publication in publications\"\r\n      :key=\"publication.doi\"\r\n      :publication=\"publication\"\r\n      :suggestion=\"suggestion\"\r\n      v-on:add=\"addPublication\"\r\n      v-on:activate=\"activatePublication\"\r\n    ></PublicationComponent>\r\n  </ul>\r\n</template>\r\n\r\n<script>\r\nimport { scrollToTargetAdjusted } from \"./../Util.js\";\r\n\r\nimport PublicationComponent from \"./PublicationComponent.vue\";\r\n\r\nexport default {\r\n  name: \"SelectedPublicationsComponent\",\r\n  components: {\r\n    PublicationComponent,\r\n  },\r\n  props: {\r\n    publications: Array,\r\n    suggestion: Boolean,\r\n  },\r\n  watch: {\r\n    publications: {\r\n      deep: true,\r\n      handler: function () {\r\n        this.$nextTick(this.scrollToActivated);\r\n      },\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      onNextActivatedScroll: true,\r\n    };\r\n  },\r\n  methods: {\r\n    addPublication: function (doi) {\r\n      this.$emit(\"add\", doi);\r\n    },\r\n    activatePublication: function () {\r\n      this.onNextActivatedScroll = false;\r\n    },\r\n    scrollToActivated() {\r\n      if (this.onNextActivatedScroll) {\r\n        const publicationComponent =\r\n          this.$el.getElementsByClassName(\"active\")[0];\r\n        if (publicationComponent) {\r\n          if (window.innerWidth <= 1023)\r\n            scrollToTargetAdjusted(publicationComponent, 65);\r\n          else {\r\n            publicationComponent.scrollIntoView({\r\n              behavior: \"smooth\",\r\n              block: \"start\",\r\n              inline: \"nearest\",\r\n            });\r\n          }\r\n        }\r\n      } else {\r\n        this.onNextActivatedScroll = true;\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PublicationListComponent.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PublicationListComponent.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PublicationListComponent.vue?vue&type=template&id=68c6083f&\"\nimport script from \"./PublicationListComponent.vue?vue&type=script&lang=js&\"\nexport * from \"./PublicationListComponent.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"selected-publications box has-background-primary\">\r\n    <div class=\"level\">\r\n      <div class=\"level-left has-text-white\">\r\n        <div\r\n          class=\"level-item\"\r\n          data-tippy-content=\"The <b>publications selected as seeds</b> for computing the suggestions, sorted by score.\"\r\n          v-tippy\r\n        >\r\n          <b-icon icon=\"water-outline\"></b-icon>\r\n          <h2 class=\"is-size-5 ml-2\">Selected</h2>\r\n        </div>\r\n      </div>\r\n      <div class=\"level-right\" v-show=\"!sessionStore.isEmpty\">\r\n        <div class=\"level-item\">\r\n          <b-button\r\n            class=\"compact-button\"\r\n            icon-left=\"magnify\"\r\n            data-tippy-content=\"<span class='key'>S</span>earch/import specific publications to be added to selected.\"\r\n            v-tippy\r\n            @click.stop=\"interfaceStore.openSearch()\"\r\n          ></b-button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"header\">\r\n      <div\r\n        class=\"notification has-background-warning-light p-2 pt-3 is-gapless\"\r\n        v-show=\"!sessionStore.isEmpty\"\r\n      >\r\n        <BoostKeywordsComponent />\r\n      </div>\r\n      <div>\r\n        <div\r\n          class=\"notification has-background-primary-light media p-2\"\r\n          v-show=\"sessionStore.isUpdatable\"\r\n        >\r\n          <b-icon\r\n            icon=\"tray-full\"\r\n            class=\"media-left ml-2 mt-2 is-hidden-mobile\"\r\n          ></b-icon>\r\n          <div class=\"media-content has-text-centered mt-2\">\r\n            <b>Queue:</b>\r\n            <span v-show=\"sessionStore.selectedQueue.length\">\r\n              {{\r\n                sessionStore.selectedQueue.length > 1\r\n                  ? `${sessionStore.selectedQueue.length} publications`\r\n                  : \"1 publication\"\r\n              }}\r\n              to be added</span\r\n            ><span\r\n              v-show=\"\r\n                sessionStore.selectedQueue.length &&\r\n                sessionStore.excludedQueue.length\r\n              \"\r\n            >\r\n              and </span\r\n            ><span v-show=\"sessionStore.excludedQueue.length\">\r\n              {{\r\n                sessionStore.excludedQueue.length > 1\r\n                  ? `${sessionStore.excludedQueue.length} publications`\r\n                  : \"1 publication\"\r\n              }}\r\n              to be excluded</span\r\n            >.\r\n          </div>\r\n          <div class=\"media-right level\">\r\n            <b-button\r\n              class=\"button ml-2 level-item\"\r\n              icon-left=\"undo\"\r\n              data-tippy-content=\"Clear queue and discard update.\"\r\n              v-tippy\r\n              @click.stop=\"sessionStore.clearQueues()\"\r\n            ></b-button>\r\n            <b-button\r\n              class=\"\r\n                button\r\n                has-background-primary has-text-white\r\n                ml-2\r\n                level-item\r\n              \"\r\n              icon-left=\"update\"\r\n              data-tippy-content=\"Update suggested and excluded publications with queue and compute new suggestions.\"\r\n              v-tippy\r\n              @click=\"sessionStore.updateQueued\"\r\n              ><span class=\"key\">U</span>pdate</b-button\r\n            >\r\n          </div>\r\n        </div>\r\n        <div\r\n          class=\"\r\n            notification\r\n            has-text-centered has-background-primary-light\r\n            p-2\r\n          \"\r\n          v-show=\"sessionStore.isEmpty\"\r\n        >\r\n          <p>\r\n            <i>To start, <b>add publications</b> to selected:</i>\r\n          </p>\r\n          <div class=\"level mt-2\">\r\n            <div class=\"level-item\"></div>\r\n            <div class=\"level-item\">\r\n              <b-button\r\n                class=\"button has-background-primary-light\"\r\n                icon-left=\"magnify\"\r\n                @click.stop=\"interfaceStore.openSearch()\"\r\n              >\r\n                Search/import\r\n              </b-button>\r\n            </div>\r\n            <div class=\"level-item\">\r\n              <b-button\r\n                class=\"button has-background-primary-light\"\r\n                icon-left=\"import\"\r\n                @click=\"importSession\"\r\n              >\r\n                Import session\r\n              </b-button>\r\n            </div>\r\n            <div class=\"level-item\">\r\n              <b-button\r\n                class=\"button has-background-primary-light\"\r\n                icon-left=\"file-document\"\r\n                @click.stop=\"sessionStore.loadExample()\"\r\n              >\r\n                Load example\r\n              </b-button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <PublicationListComponent\r\n      ref=\"publicationList\"\r\n      :publications=\"sessionStore.selectedPublications\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { useSessionStore } from \"./../stores/session.js\";\r\nimport { useInterfaceStore } from \"./../stores/interface.js\";\r\n\r\nimport BoostKeywordsComponent from \"./BoostKeywordsComponent.vue\";\r\nimport PublicationListComponent from \"./PublicationListComponent.vue\";\r\n\r\nexport default {\r\n  name: \"SelectedPublicationsComponent\",\r\n\r\n  setup() {\r\n    const sessionStore = useSessionStore();\r\n    const interfaceStore = useInterfaceStore();\r\n    return { sessionStore, interfaceStore };\r\n  },\r\n\r\n  components: {\r\n    BoostKeywordsComponent,\r\n    PublicationListComponent,\r\n  },\r\n\r\n  mounted() {\r\n    this.sessionStore.$onAction(({ name, after }) => {\r\n      after(() => {\r\n        if (name === \"updateQueued\") {\r\n          this.$refs.publicationList.$el.scrollTop = 0;\r\n        }\r\n      });\r\n    });\r\n  },\r\n\r\n  methods: {\r\n    importSession: function () {\r\n      this.$buefy.dialog.confirm({\r\n        title: \"Import session\",\r\n        message: `<label>Choose an exported session JSON file:&nbsp;</label>\r\n            <input type=\"file\" id=\"import-json-input\" accept=\"application/JSON\"/>`,\r\n        onConfirm: () =>\r\n          this.sessionStore.importSession(\r\n            document.getElementById(\"import-json-input\").files[0]\r\n          ),\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.box {\r\n  display: grid;\r\n  grid-template-rows: max-content max-content auto;\r\n\r\n  & .header {\r\n\r\n    & .notification {\r\n      margin-bottom: 0;\r\n      border-radius: 0;\r\n    }\r\n  }\r\n\r\n  & .publication-list {\r\n    @include scrollable-list;\r\n  }\r\n}\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SelectedPublicationsComponent.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SelectedPublicationsComponent.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SelectedPublicationsComponent.vue?vue&type=template&id=56a089ae&scoped=true&\"\nimport script from \"./SelectedPublicationsComponent.vue?vue&type=script&lang=js&\"\nexport * from \"./SelectedPublicationsComponent.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SelectedPublicationsComponent.vue?vue&type=style&index=0&id=56a089ae&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"56a089ae\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"suggested-publications box has-background-info\"},[_c('div',{staticClass:\"level box-header\"},[_c('div',{staticClass:\"level-left has-text-white\"},[_c('div',{directives:[{name:\"tippy\",rawName:\"v-tippy\"}],staticClass:\"level-item\",attrs:{\"data-tippy-content\":\"The <b>suggested publications</b> based on references to and from the selected publications, sorted by score.\"}},[_c('b-icon',{attrs:{\"icon\":\"water-plus-outline\"}}),_c('h2',{staticClass:\"is-size-5 ml-2\"},[_vm._v(\"Suggested\")])],1)]),(_vm.sessionStore.suggestion)?_c('div',{staticClass:\"level-right has-text-white\"},[_c('div',{staticClass:\"level-item\"},[_c('tippy',{scopedSlots:_vm._u([{key:\"trigger\",fn:function(){return [_c('div',[_c('span',[_c('b-icon',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isFilterPanelShown),expression:\"isFilterPanelShown\"}],attrs:{\"icon\":\"filter\",\"size\":\"is-small\"}}),_vm._v(\" \"+_vm._s(_vm.sessionStore.suggestedPublicationsFiltered.length)+\" \"),(_vm.sessionStore.unreadSuggestionsCount > 0)?_c('b-tag',{attrs:{\"icon\":\"bell\",\"size\":\"is-small\"}},[_vm._v(_vm._s(_vm.sessionStore.unreadSuggestionsCount))]):_vm._e(),_vm._v(\" of \"+_vm._s(_vm.sessionStore.suggestion.totalSuggestions.toLocaleString(\"en\"))+\" \")],1)])]},proxy:true}],null,false,2390841055)},[_c('div',[_c('b',[_vm._v(_vm._s(_vm.sessionStore.suggestedPublicationsFiltered.length))]),_vm._v(\" suggested publication\"+_vm._s(_vm.sessionStore.suggestedPublicationsFiltered.length > 1 ? \"s\" : \"\")+\" \"),(_vm.sessionStore.unreadSuggestionsCount > 0)?_c('span',[_c('b',[_vm._v(\"(\"+_vm._s(_vm.sessionStore.unreadSuggestionsCount))]),_vm._v(\" of them unread) \")]):_vm._e(),(_vm.isFilterPanelShown)?_c('span',[_vm._v(\" filtered from \"),_c('b',[_vm._v(_vm._s(_vm.sessionStore.suggestedPublications.length))]),_vm._v(\" loaded ones, \")]):_vm._e(),_vm._v(\" of in total \"),_c('b',[_vm._v(\" \"+_vm._s(_vm.sessionStore.suggestion.totalSuggestions.toLocaleString(\"en\")))]),_vm._v(\" cited/citing publication\"+_vm._s(_vm.sessionStore.suggestion.totalSuggestions > 1 ? \"s\" : \"\")+\". \")])]),_c('b-button',{directives:[{name:\"tippy\",rawName:\"v-tippy\"}],staticClass:\"compact-button\",attrs:{\"icon-left\":\"playlist-plus\",\"data-tippy-content\":\"Load more suggested publications.\",\"disabled\":_vm.sessionStore.suggestedPublications.length ===\n            _vm.sessionStore.suggestion.totalSuggestions},on:{\"click\":function($event){$event.stopPropagation();return _vm.sessionStore.loadMoreSuggestions()}}})],1),(_vm.sessionStore.suggestion)?_c('div',{staticClass:\"level-item\"},[_c('b-field',{directives:[{name:\"tippy\",rawName:\"v-tippy\"}],staticClass:\"ml-5\",attrs:{\"data-tippy-content\":\"Activate/deactivate <b>filter</b> to restrict suggested publications by different criteria.\"}},[_c('b-switch',{attrs:{\"type\":\"is-black\"},model:{value:(_vm.isFilterPanelShown),callback:function ($$v) {_vm.isFilterPanelShown=$$v},expression:\"isFilterPanelShown\"}},[_c('b-icon',{attrs:{\"icon\":\"filter\",\"size\":\"is-small\"}}),_vm._v(\"\"),_c('span',{staticClass:\"key\"},[_vm._v(\"F\")]),_vm._v(\"ilter\")],1)],1)],1):_vm._e()]):_vm._e()]),_c('div',[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isFilterPanelShown),expression:\"isFilterPanelShown\"}],staticClass:\"notification has-background-info-light p-2 pt-3 columns is-gapless\"},[_c('div',{staticClass:\"column\"},[_c('b-field',{directives:[{name:\"tippy\",rawName:\"v-tippy\"}],attrs:{\"label\":\"Search\",\"label-position\":\"on-border\",\"data-tippy-content\":\"Filter by <b>search in meta-data</b> such as title, authors, and journal name.\"}},[_c('p',{staticClass:\"control\"},[_c('b-button',{staticClass:\"is-static\",class:{\n                active: _vm.filterString,\n              },attrs:{\"icon-left\":\"card-search\"}})],1),_c('b-input',{attrs:{\"placeholder\":\"Text\",\"icon-right\":\"close-circle\",\"icon-right-clickable\":\"\",\"expanded\":\"\"},on:{\"input\":_vm.updateFilter,\"icon-right-click\":_vm.clearFilterString},model:{value:(_vm.filterString),callback:function ($$v) {_vm.filterString=$$v},expression:\"filterString\"}})],1)],1),_c('div',{staticClass:\"column\"},[_c('b-field',{directives:[{name:\"tippy\",rawName:\"v-tippy\"}],attrs:{\"label\":\"Year\",\"label-position\":\"on-border\",\"data-tippy-content\":\"Filter by <b>publication year</b> (leave blank for unrestricted start/end year).\"}},[_c('p',{staticClass:\"control\"},[_c('b-button',{staticClass:\"is-static\",class:{\n                active: _vm.sessionStore.filter.isYearActive(),\n              },attrs:{\"icon-left\":\"calendar\"}})],1),_c('b-field',{attrs:{\"expanded\":\"\"}},[_c('b-input',{attrs:{\"id\":\"filter-year-start\",\"placeholder\":\"From\",\"type\":\"text\",\"pattern\":\"\\\\d\\\\d\\\\d\\\\d\",\"validation-message\":\"Enter a four-digit year.\"},on:{\"input\":_vm.updateFilter},model:{value:(_vm.filterYearStart),callback:function ($$v) {_vm.filterYearStart=$$v},expression:\"filterYearStart\"}})],1),_c('b-field',{attrs:{\"expanded\":\"\"}},[_c('b-input',{attrs:{\"id\":\"filter-year-end\",\"placeholder\":\"To\",\"type\":\"text\",\"pattern\":\"\\\\d\\\\d\\\\d\\\\d\",\"validation-message\":\"Enter a four-digit year.\"},on:{\"input\":_vm.updateFilter},model:{value:(_vm.filterYearEnd),callback:function ($$v) {_vm.filterYearEnd=$$v},expression:\"filterYearEnd\"}})],1)],1)],1),_c('div',{staticClass:\"column\"},[_c('b-field',{directives:[{name:\"tippy\",rawName:\"v-tippy\"}],attrs:{\"label\":\"Tag\",\"label-position\":\"on-border\",\"data-tippy-content\":\"Filter by automatically <b>assigned tag</b>.\"}},[_c('p',{staticClass:\"control\"},[_c('b-button',{staticClass:\"is-static\",class:{\n                active: _vm.filterTag,\n              },attrs:{\"icon-left\":\"tag\"}})],1),_c('b-select',{class:{\n              inactive: !_vm.filterTag,\n            },attrs:{\"id\":\"filter-tag\",\"expanded\":\"\"},on:{\"input\":_vm.updateFilter},model:{value:(_vm.filterTag),callback:function ($$v) {_vm.filterTag=$$v},expression:\"filterTag\"}},[_c('option',{attrs:{\"value\":\"\"}},[_vm._v(\"None/any\")]),_vm._l((_vm.TAGS),function(tag){return _c('option',{key:tag.value,domProps:{\"value\":tag.value}},[_vm._v(\" \"+_vm._s(tag.name)+\" \")])})],2)],1)],1)])]),_c('PublicationListComponent',{ref:\"publicationList\",attrs:{\"publications\":_vm.sessionStore.suggestedPublicationsFiltered,\"suggestion\":true},on:{\"add\":_vm.addPublication}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"suggested-publications box has-background-info\">\r\n    <div class=\"level box-header\">\r\n      <div class=\"level-left has-text-white\">\r\n        <div\r\n          class=\"level-item\"\r\n          data-tippy-content=\"The <b>suggested publications</b> based on references to and from the selected publications, sorted by score.\"\r\n          v-tippy\r\n        >\r\n          <b-icon icon=\"water-plus-outline\"></b-icon>\r\n          <h2 class=\"is-size-5 ml-2\">Suggested</h2>\r\n        </div>\r\n      </div>\r\n      <div class=\"level-right has-text-white\" v-if=\"sessionStore.suggestion\">\r\n        <div class=\"level-item\">\r\n          <tippy>\r\n            <template v-slot:trigger>\r\n              <div>\r\n                <span\r\n                  ><b-icon\r\n                    icon=\"filter\"\r\n                    size=\"is-small\"\r\n                    v-show=\"isFilterPanelShown\"\r\n                  ></b-icon>\r\n                  {{ sessionStore.suggestedPublicationsFiltered.length }}\r\n                  <b-tag\r\n                    icon=\"bell\"\r\n                    size=\"is-small\"\r\n                    v-if=\"sessionStore.unreadSuggestionsCount > 0\"\r\n                    >{{ sessionStore.unreadSuggestionsCount }}</b-tag\r\n                  >\r\n                  of\r\n                  {{\r\n                    sessionStore.suggestion.totalSuggestions.toLocaleString(\"en\")\r\n                  }}\r\n                </span>\r\n              </div>\r\n            </template>\r\n            <div>\r\n              <b>{{ sessionStore.suggestedPublicationsFiltered.length }}</b>\r\n              suggested publication{{\r\n                sessionStore.suggestedPublicationsFiltered.length > 1 ? \"s\" : \"\"\r\n              }}\r\n              <span v-if=\"sessionStore.unreadSuggestionsCount > 0\">\r\n                <b>({{ sessionStore.unreadSuggestionsCount }}</b> of them\r\n                unread)\r\n              </span>\r\n              <span v-if=\"isFilterPanelShown\">\r\n                filtered from\r\n                <b>{{\r\n                  sessionStore.suggestedPublications.length\r\n                }}</b>\r\n                loaded ones,\r\n              </span>\r\n              of in total\r\n              <b>\r\n                {{\r\n                  sessionStore.suggestion.totalSuggestions.toLocaleString(\"en\")\r\n                }}</b\r\n              >\r\n              cited/citing publication{{\r\n                sessionStore.suggestion.totalSuggestions > 1 ? \"s\" : \"\"\r\n              }}.\r\n            </div>\r\n          </tippy>\r\n          <b-button\r\n            class=\"compact-button\"\r\n            icon-left=\"playlist-plus\"\r\n            data-tippy-content=\"Load more suggested publications.\"\r\n            v-tippy\r\n            @click.stop=\"sessionStore.loadMoreSuggestions()\"\r\n            :disabled=\"\r\n              sessionStore.suggestedPublications.length ===\r\n              sessionStore.suggestion.totalSuggestions\r\n            \"\r\n          ></b-button>\r\n        </div>\r\n        <div class=\"level-item\" v-if=\"sessionStore.suggestion\">\r\n          <b-field\r\n            class=\"ml-5\"\r\n            data-tippy-content=\"Activate/deactivate <b>filter</b> to restrict suggested publications by different criteria.\"\r\n            v-tippy\r\n          >\r\n            <b-switch v-model=\"isFilterPanelShown\" type=\"is-black\"\r\n              ><b-icon icon=\"filter\" size=\"is-small\"></b-icon>&nbsp;<span\r\n                class=\"key\"\r\n                >F</span\r\n              >ilter</b-switch\r\n            >\r\n          </b-field>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div>\r\n      <div\r\n        class=\"\r\n          notification\r\n          has-background-info-light\r\n          p-2\r\n          pt-3\r\n          columns\r\n          is-gapless\r\n        \"\r\n        v-show=\"isFilterPanelShown\"\r\n      >\r\n        <div class=\"column\">\r\n          <b-field\r\n            label=\"Search\"\r\n            label-position=\"on-border\"\r\n            data-tippy-content=\"Filter by <b>search in meta-data</b> such as title, authors, and journal name.\"\r\n            v-tippy\r\n          >\r\n            <p class=\"control\">\r\n              <b-button\r\n                icon-left=\"card-search\"\r\n                :class=\"{\r\n                  active: filterString,\r\n                }\"\r\n                class=\"is-static\"\r\n              ></b-button>\r\n            </p>\r\n            <b-input\r\n              v-model=\"filterString\"\r\n              placeholder=\"Text\"\r\n              @input=\"updateFilter\"\r\n              icon-right=\"close-circle\"\r\n              icon-right-clickable\r\n              @icon-right-click=\"clearFilterString\"\r\n              expanded\r\n            ></b-input>\r\n          </b-field>\r\n        </div>\r\n        <div class=\"column\">\r\n          <b-field\r\n            label=\"Year\"\r\n            label-position=\"on-border\"\r\n            data-tippy-content=\"Filter by <b>publication year</b> (leave blank for unrestricted start/end year).\"\r\n            v-tippy\r\n          >\r\n            <p class=\"control\">\r\n              <b-button\r\n                icon-left=\"calendar\"\r\n                :class=\"{\r\n                  active: sessionStore.filter.isYearActive(),\r\n                }\"\r\n                class=\"is-static\"\r\n              ></b-button>\r\n            </p>\r\n            <b-field expanded>\r\n              <b-input\r\n                id=\"filter-year-start\"\r\n                v-model=\"filterYearStart\"\r\n                placeholder=\"From\"\r\n                type=\"text\"\r\n                pattern=\"\\d\\d\\d\\d\"\r\n                validation-message=\"Enter a four-digit year.\"\r\n                @input=\"updateFilter\"\r\n              ></b-input>\r\n            </b-field>\r\n            <b-field expanded>\r\n              <b-input\r\n                id=\"filter-year-end\"\r\n                v-model=\"filterYearEnd\"\r\n                placeholder=\"To\"\r\n                type=\"text\"\r\n                pattern=\"\\d\\d\\d\\d\"\r\n                validation-message=\"Enter a four-digit year.\"\r\n                @input=\"updateFilter\"\r\n              ></b-input>\r\n            </b-field>\r\n          </b-field>\r\n        </div>\r\n        <div class=\"column\">\r\n          <b-field\r\n            label=\"Tag\"\r\n            label-position=\"on-border\"\r\n            data-tippy-content=\"Filter by automatically <b>assigned tag</b>.\"\r\n            v-tippy\r\n          >\r\n            <p class=\"control\">\r\n              <b-button\r\n                icon-left=\"tag\"\r\n                :class=\"{\r\n                  active: filterTag,\r\n                }\"\r\n                class=\"is-static\"\r\n              ></b-button>\r\n            </p>\r\n            <b-select\r\n              id=\"filter-tag\"\r\n              @input=\"updateFilter\"\r\n              v-model=\"filterTag\"\r\n              :class=\"{\r\n                inactive: !filterTag,\r\n              }\"\r\n              expanded\r\n            >\r\n              <option value=\"\">None/any</option>\r\n              <option v-for=\"tag in TAGS\" :value=\"tag.value\" :key=\"tag.value\">\r\n                {{ tag.name }}\r\n              </option>\r\n            </b-select>\r\n          </b-field>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <PublicationListComponent\r\n      ref=\"publicationList\"\r\n      :publications=\"sessionStore.suggestedPublicationsFiltered\"\r\n      :suggestion=\"true\"\r\n      v-on:add=\"addPublication\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { storeToRefs } from \"pinia\";\r\n\r\nimport { useSessionStore } from \"./../stores/session.js\";\r\nimport { useInterfaceStore } from \"./../stores/interface.js\";\r\nimport Publication from \"./../Publication.js\";\r\nimport Filter from \"./../Filter.js\";\r\n\r\nimport PublicationListComponent from \"./PublicationListComponent.vue\";\r\n\r\nexport default {\r\n  name: \"SuggestedPublicationsComponent\",\r\n  setup() {\r\n    const sessionStore = useSessionStore();\r\n    const interfaceStore = useInterfaceStore();\r\n    const { isFilterPanelShown } = storeToRefs(interfaceStore);\r\n    return { sessionStore, isFilterPanelShown };\r\n  },\r\n  components: {\r\n    PublicationListComponent,\r\n  },\r\n  props: {\r\n    title: String,\r\n  },\r\n  data() {\r\n    return {\r\n      TAGS: Publication.TAGS,\r\n      filterString: \"\",\r\n      filterYearStart: \"\",\r\n      filterYearEnd: \"\",\r\n      filterTag: \"\",\r\n    };\r\n  },\r\n  watch: {\r\n    isFilterPanelShown: {\r\n      handler: function () {\r\n        this.updateFilter();\r\n      },\r\n    },\r\n  },\r\n  mounted() {\r\n    this.sessionStore.$onAction(({ name, after }) => {\r\n      after(() => {\r\n        if (name === \"updateQueued\") {\r\n          this.$refs.publicationList.$el.scrollTop = 0;\r\n        }\r\n      });\r\n    });\r\n  },\r\n  methods: {\r\n    addPublication: function (doi) {\r\n      this.sessionStore.queueForSelected(doi);\r\n    },\r\n    updateFilter: function () {\r\n      if (this.isFilterPanelShown) {\r\n        this.sessionStore.filter.string = this.filterString;\r\n        this.sessionStore.filter.yearStart = this.filterYearStart;\r\n        this.sessionStore.filter.yearEnd = this.filterYearEnd;\r\n        this.sessionStore.filter.tag = this.filterTag;\r\n      } else {\r\n        this.sessionStore.filter = new Filter();\r\n      }\r\n    },\r\n    clearFilterString: function () {\r\n      this.filterString = \"\";\r\n      this.updateFilter();\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.box {\r\n  display: grid;\r\n  grid-template-rows: max-content max-content auto;\r\n  position: relative;\r\n\r\n  & .box-header .tag {\r\n    position: relative;\r\n    top: -0.4rem;\r\n    padding: 0 0.2rem;\r\n    height: 1.2rem;\r\n    background-color: $info-light;\r\n    color: $info-dark;\r\n  }\r\n\r\n  & .notification {\r\n    margin-bottom: 0;\r\n    border-radius: 0;\r\n\r\n    & .column:not(:first-child) {\r\n      margin-left: 0.5vw;\r\n    }\r\n\r\n    & .active {\r\n      background: $white;\r\n      color: $info-dark;\r\n    }\r\n\r\n    & .is-expanded {\r\n      width: 100%;\r\n    }\r\n  }\r\n\r\n  & .publication-list {\r\n    @include scrollable-list;\r\n  }\r\n}\r\n\r\n@include mobile {\r\n  .box .notification {\r\n    & .column {\r\n      margin-left: 0 !important;\r\n    }\r\n\r\n    & .column:not(:first-child) {\r\n      margin-top: 0.75rem;\r\n    }\r\n  }\r\n}\r\n</style>\r\n<style lang=\"scss\">\r\n#filter-year-start {\r\n  border-radius: 0;\r\n}\r\n\r\n#filter-year-end {\r\n  border-top-left-radius: 0;\r\n  border-bottom-left-radius: 0;\r\n}\r\n\r\n.inactive #filter-tag {\r\n  color: rgba(54, 54, 54, 0.3);\r\n}\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SuggestedPublicationsComponent.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SuggestedPublicationsComponent.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SuggestedPublicationsComponent.vue?vue&type=template&id=04fc70fa&scoped=true&\"\nimport script from \"./SuggestedPublicationsComponent.vue?vue&type=script&lang=js&\"\nexport * from \"./SuggestedPublicationsComponent.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SuggestedPublicationsComponent.vue?vue&type=style&index=0&id=04fc70fa&prod&lang=scss&scoped=true&\"\nimport style1 from \"./SuggestedPublicationsComponent.vue?vue&type=style&index=1&id=04fc70fa&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"04fc70fa\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"network-of-references\"},[_c('div',{staticClass:\"box has-background-grey\"},[_c('div',{staticClass:\"level\"},[_c('div',{staticClass:\"level-left has-text-white\"},[_c('div',{directives:[{name:\"tippy\",rawName:\"v-tippy\"}],staticClass:\"level-item\",attrs:{\"data-tippy-content\":\"Showing publications as nodes (<b class='has-text-primary'>selected</b>; <b class='has-text-info'>suggested</b>) with citations as links.<br><br>You can click a publication for details as well as zoom and pan the diagram.\"}},[_c('b-icon',{attrs:{\"icon\":\"chart-bubble\"}}),_c('h2',{staticClass:\"is-size-5 ml-2\"},[_vm._v(\"Citation network\")])],1)]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.sessionStore.isEmpty),expression:\"!sessionStore.isEmpty\"}],staticClass:\"level-right\"},[_c('b-field',{directives:[{name:\"tippy\",rawName:\"v-tippy\"}],staticClass:\"level-item has-text-white mr-4 mb-0\",attrs:{\"data-tippy-content\":\"There are two display <span class='key'>m</span>odes:<br><br><b>Timeline:</b> The diagram places publications from left to right based on year, and vertically tries to group linked publications close to each other.<br><br><b>Clusters:</b> The diagram groups linked publications close to each other, irrespective of publication year.\"}},[_c('label',{staticClass:\"mr-2\"},[_c('span',{staticClass:\"key\"},[_vm._v(\"M\")]),_vm._v(\"ode:\")]),_c('label',{staticClass:\"mr-2\",class:{ 'has-text-grey-light': _vm.isNetworkClusters }},[_vm._v(\" Timeline\")]),_c('b-switch',{attrs:{\"type\":\"is-dark\",\"passive-type\":\"is-dark\"},nativeOn:{\"click\":function($event){$event.stopPropagation();}},model:{value:(_vm.isNetworkClusters),callback:function ($$v) {_vm.isNetworkClusters=$$v},expression:\"isNetworkClusters\"}}),_c('label',{class:{ 'has-text-grey-light': !_vm.isNetworkClusters }},[_vm._v(\"Clusters\")])],1),_c('b-button',{directives:[{name:\"tippy\",rawName:\"v-tippy\"},{name:\"show\",rawName:\"v-show\",value:(!_vm.interfaceStore.isNetworkExpanded),expression:\"!interfaceStore.isNetworkExpanded\"}],staticClass:\"level-item compact-button is-hidden-touch\",attrs:{\"icon-right\":\"arrow-expand\",\"data-tippy-content\":\"Expand diagram\"},on:{\"click\":function($event){$event.stopPropagation();_vm.interfaceStore.isNetworkExpanded = true}}}),_c('b-button',{directives:[{name:\"tippy\",rawName:\"v-tippy\"},{name:\"show\",rawName:\"v-show\",value:(_vm.interfaceStore.isNetworkExpanded),expression:\"interfaceStore.isNetworkExpanded\"}],staticClass:\"level-item compact-button is-hidden-touch\",attrs:{\"icon-right\":\"arrow-collapse\",\"data-tippy-content\":\"Collapse diagram\"},on:{\"click\":function($event){$event.stopPropagation();_vm.interfaceStore.isNetworkExpanded = false}}})],1)]),_c('div',{attrs:{\"id\":\"network-svg-container\"}},[_c('svg',{attrs:{\"id\":\"network-svg\",\"width\":\"100%\",\"height\":\"100%\"}})])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"network-of-references\">\r\n    <div class=\"box has-background-grey\">\r\n      <div class=\"level\">\r\n        <div class=\"level-left has-text-white\">\r\n          <div\r\n            class=\"level-item\"\r\n            data-tippy-content=\"Showing publications as nodes (<b class='has-text-primary'>selected</b>; <b class='has-text-info'>suggested</b>) with citations as links.<br><br>You can click a publication for details as well as zoom and pan the diagram.\"\r\n            v-tippy\r\n          >\r\n            <b-icon icon=\"chart-bubble\"></b-icon>\r\n            <h2 class=\"is-size-5 ml-2\">Citation network</h2>\r\n          </div>\r\n        </div>\r\n        <div class=\"level-right\" v-show=\"!sessionStore.isEmpty\">\r\n          <b-field\r\n            class=\"level-item has-text-white mr-4 mb-0\"\r\n            data-tippy-content=\"There are two display <span class='key'>m</span>odes:<br><br><b>Timeline:</b> The diagram places publications from left to right based on year, and vertically tries to group linked publications close to each other.<br><br><b>Clusters:</b> The diagram groups linked publications close to each other, irrespective of publication year.\"\r\n            v-tippy\r\n          >\r\n            <label class=\"mr-2\"><span class=\"key\">M</span>ode:</label>\r\n            <label\r\n              class=\"mr-2\"\r\n              :class=\"{ 'has-text-grey-light': isNetworkClusters }\"\r\n            >\r\n              Timeline</label\r\n            >\r\n            <b-switch\r\n              v-model=\"isNetworkClusters\"\r\n              type=\"is-dark\"\r\n              passive-type=\"is-dark\"\r\n              @click.native.stop=\"\"\r\n            ></b-switch>\r\n            <label :class=\"{ 'has-text-grey-light': !isNetworkClusters }\"\r\n              >Clusters</label\r\n            >\r\n          </b-field>\r\n          <b-button\r\n            class=\"level-item compact-button is-hidden-touch\"\r\n            icon-right=\"arrow-expand\"\r\n            data-tippy-content=\"Expand diagram\"\r\n            v-tippy\r\n            v-show=\"!interfaceStore.isNetworkExpanded\"\r\n            @click.stop=\"interfaceStore.isNetworkExpanded = true\"\r\n          ></b-button>\r\n          <b-button\r\n            class=\"level-item compact-button is-hidden-touch\"\r\n            icon-right=\"arrow-collapse\"\r\n            data-tippy-content=\"Collapse diagram\"\r\n            v-tippy\r\n            v-show=\"interfaceStore.isNetworkExpanded\"\r\n            @click.stop=\"interfaceStore.isNetworkExpanded = false\"\r\n          ></b-button>\r\n        </div>\r\n      </div>\r\n      <div id=\"network-svg-container\">\r\n        <svg id=\"network-svg\" width=\"100%\" height=\"100%\"></svg>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport * as d3 from \"d3\";\r\nimport tippy from \"tippy.js\";\r\nimport \"tippy.js/dist/tippy.css\";\r\nimport _ from \"lodash\";\r\nimport { storeToRefs } from \"pinia\";\r\n\r\nimport { useSessionStore } from \"./../stores/session.js\";\r\nimport { useInterfaceStore } from \"./../stores/interface.js\";\r\n\r\nconst RECT_SIZE = 20;\r\nconst ENLARGE_FACTOR = 1.5;\r\nconst margin = 20;\r\nconst SIMULATION_ALPHA = 0.4;\r\n\r\nexport default {\r\n  name: \"NetworkVisComponent\",\r\n  setup() {\r\n    const sessionStore = useSessionStore();\r\n    const { filter, activePublication } = storeToRefs(sessionStore);\r\n    const interfaceStore = useInterfaceStore();\r\n    const { isNetworkClusters } = storeToRefs(interfaceStore);\r\n    return {\r\n      sessionStore,\r\n      filter,\r\n      activePublication,\r\n      interfaceStore,\r\n      isNetworkClusters,\r\n    };\r\n  },\r\n  data: function () {\r\n    return {\r\n      graph: { nodes: [], links: [] },\r\n      simulation: null,\r\n      svg: null,\r\n      svgHeight: Number,\r\n      svgWidth: Number,\r\n      node: null,\r\n      link: null,\r\n      label: null,\r\n    };\r\n  },\r\n  watch: {\r\n    isNetworkClusters: {\r\n      handler: function () {\r\n        this.plot(true);\r\n      },\r\n    },\r\n    filter: {\r\n      deep: true,\r\n      handler: function () {\r\n        this.plot(true);\r\n      },\r\n    },\r\n    activePublication: {\r\n      handler: function () {\r\n        if (this.interfaceStore.isLoading) return;\r\n        this.plot();\r\n      },\r\n    },\r\n  },\r\n  mounted() {\r\n    const that = this;\r\n\r\n    const container = document.getElementById(\"network-svg-container\");\r\n    this.svgWidth = container.clientWidth;\r\n    this.svgHeight = container.clientHeight;\r\n\r\n    this.svg = d3\r\n      .select(\"#network-svg\")\r\n      .call(\r\n        // eslint-disable-next-line no-unused-vars\r\n        d3.zoom().on(\"zoom\", (event, d) => {\r\n          that.svg.attr(\"transform\", event.transform);\r\n        })\r\n      )\r\n      .append(\"g\");\r\n\r\n    this.simulation = d3.forceSimulation();\r\n    this.simulation.alphaDecay(0.02);\r\n\r\n    this.label = this.svg.append(\"g\").attr(\"class\", \"labels\").selectAll(\"text\");\r\n    this.link = this.svg.append(\"g\").attr(\"class\", \"links\").selectAll(\"path\");\r\n    this.node = this.svg.append(\"g\").attr(\"class\", \"nodes\").selectAll(\"rect\");\r\n\r\n    this.sessionStore.$onAction(({ name, after }) => {\r\n      after(() => {\r\n        if (name === \"updateScores\") {\r\n          this.plot(true);\r\n        } else if (\r\n          (!this.interfaceStore.isLoading && name === \"clear\") ||\r\n          name === \"queueForSelected\" ||\r\n          name === \"queueForExcluded\" ||\r\n          name === \"removeFromQueues\" ||\r\n          name === \"clearQueues\"\r\n        ) {\r\n          this.plot();\r\n        }\r\n      });\r\n    });\r\n  },\r\n  methods: {\r\n    initForces: function () {\r\n      const that = this;\r\n      this.simulation\r\n        .force(\r\n          \"link\",\r\n          d3\r\n            .forceLink()\r\n            .id((d) => d.id)\r\n            .distance((d) => {\r\n              if (that.isNetworkClusters && d.internal)\r\n                return 500 / that.sessionStore.selectedPublications.length;\r\n              if (d.type === \"keyword\") return 0;\r\n              return 10;\r\n            })\r\n            .strength((d) => {\r\n              const internalFactor = d.internal ? 1 : 0.5;\r\n              const clustersFactor = that.isNetworkClusters ? 1 : 0.5;\r\n              return 0.15 * clustersFactor * internalFactor;\r\n            })\r\n        )\r\n        .force(\r\n          \"charge\",\r\n          d3\r\n            .forceManyBody()\r\n            .strength(\r\n              Math.min(\r\n                -200,\r\n                -100 * Math.sqrt(that.sessionStore.selectedPublications.length)\r\n              )\r\n            )\r\n        )\r\n        .force(\r\n          \"x\",\r\n          d3\r\n            .forceX()\r\n            .x((d) =>\r\n              that.isNetworkClusters\r\n                ? 0.5 * (that.svgWidth - RECT_SIZE)\r\n                : this.yearX(d.publication ? d.publication.year : 2025)\r\n            )\r\n            .strength(that.isNetworkClusters ? 0.05 : 10)\r\n        )\r\n        .force(\r\n          \"y\",\r\n          d3\r\n            .forceY()\r\n            .y(0.5 * (that.svgHeight - RECT_SIZE))\r\n            .strength(that.isNetworkClusters ? 0.1 : 0.25)\r\n        )\r\n        .on(\"tick\", this.tick);\r\n    },\r\n\r\n    plot: function (restart) {\r\n      try {\r\n        console.log(\r\n          `Plotting citation network ${\r\n            restart ? \"with\" : \"without\"\r\n          } restarting layout computation.`\r\n        );\r\n\r\n        this.initForces();\r\n\r\n        initGraph.call(this);\r\n        updateNodes.call(this);\r\n        updateLinks.call(this);\r\n        updateYearLabels.call(this);\r\n\r\n        this.simulation.nodes(this.graph.nodes);\r\n        this.simulation.force(\"link\").links(this.graph.links);\r\n        if (restart) {\r\n          this.simulation.alpha(SIMULATION_ALPHA);\r\n        }\r\n        this.simulation.restart();\r\n      } catch (error) {\r\n        console.error(\"Cannot plot network: \" + error.message);\r\n        this.interfaceStore.showErrorMessage(\r\n          \"Sorry, an error occurred while plotting the citation network.\"\r\n        );\r\n      }\r\n\r\n      function initGraph() {\r\n        this.doiToIndex = {};\r\n        const nodes = initNodes.call(this);\r\n        const links = initLinks.call(this);\r\n        // https://observablehq.com/@d3/modifying-a-force-directed-graph\r\n        const old = new Map(this.node.data().map((d) => [d.id, d]));\r\n        this.graph.nodes = nodes.map((d) =>\r\n          Object.assign(old.get(d.id) || { x: this.svgWidth / 2, y: 0 }, d)\r\n        );\r\n        this.graph.links = links.map((d) => Object.assign({}, d));\r\n      }\r\n\r\n      function initNodes() {\r\n        const publicationNodes = [];\r\n        let i = 0;\r\n        this.sessionStore.publicationsFiltered.forEach((publication) => {\r\n          if (publication.year) {\r\n            this.doiToIndex[publication.doi] = i;\r\n            publicationNodes.push({\r\n              id: publication.doi,\r\n              publication: publication,\r\n              isQueuingForSelected: this.sessionStore.isQueuingForSelected(\r\n                publication.doi\r\n              ),\r\n              isQueuingForExcluded: this.sessionStore.isQueuingForExcluded(\r\n                publication.doi\r\n              ),\r\n            });\r\n            i++;\r\n          }\r\n        });\r\n\r\n        const keywordNodes = [];\r\n        this.sessionStore.uniqueBoostKeywords.forEach((keyword) => {\r\n          const frequency = this.sessionStore.publications.filter(\r\n            (publication) => publication.boostKeywords.includes(keyword)\r\n          ).length;\r\n          keywordNodes.push({\r\n            id: keyword,\r\n            frequency: frequency,\r\n          });\r\n        });\r\n\r\n        const nodes = publicationNodes.concat(keywordNodes);\r\n        return nodes;\r\n      }\r\n\r\n      function initLinks() {\r\n        const links = [];\r\n\r\n        this.sessionStore.uniqueBoostKeywords.forEach((keyword) => {\r\n          this.sessionStore.publicationsFiltered.forEach((publication) => {\r\n            if (publication.boostKeywords.includes(keyword)) {\r\n              links.push({\r\n                source: keyword,\r\n                target: publication.doi,\r\n                type: \"keyword\",\r\n              });\r\n            }\r\n          });\r\n        });\r\n\r\n        this.sessionStore.selectedPublications.forEach((publication) => {\r\n          if (publication.doi in this.doiToIndex) {\r\n            publication.citationDois.forEach((citationDoi) => {\r\n              if (citationDoi in this.doiToIndex) {\r\n                links.push({\r\n                  source: citationDoi,\r\n                  target: publication.doi,\r\n                  type: \"citation\",\r\n                  internal: this.sessionStore.isSelected(citationDoi),\r\n                });\r\n              }\r\n            });\r\n            publication.referenceDois.forEach((referenceDoi) => {\r\n              if (referenceDoi in this.doiToIndex) {\r\n                links.push({\r\n                  source: publication.doi,\r\n                  target: referenceDoi,\r\n                  type: \"citation\",\r\n                  internal: this.sessionStore.isSelected(referenceDoi),\r\n                });\r\n              }\r\n            });\r\n          }\r\n        });\r\n\r\n        return links;\r\n      }\r\n\r\n      function updateNodes() {\r\n        this.node = this.node\r\n          .data(this.graph.nodes, (d) => d.id)\r\n          .join((enter) => {\r\n            const g = enter\r\n              .append(\"g\")\r\n              .attr(\r\n                \"class\",\r\n                (d) =>\r\n                  `node-container ${d.publication ? \"publication\" : \"keyword\"}`\r\n              );\r\n            const publicationNodes = g.filter((d) => d.publication);\r\n            publicationNodes.append(\"rect\");\r\n            publicationNodes.append(\"text\").classed(\"score\", true);\r\n            publicationNodes\r\n              .append(\"text\")\r\n              .classed(\"labelQueuingForSelected\", true)\r\n              .attr(\"x\", 15)\r\n              .attr(\"y\", 15)\r\n              .text(\"+\");\r\n            publicationNodes\r\n              .append(\"text\")\r\n              .classed(\"labelQueuingForExcluded\", true)\r\n              .attr(\"x\", 15)\r\n              .attr(\"y\", 15)\r\n              .text(\"-\");\r\n            publicationNodes.append(\"circle\");\r\n            publicationNodes.on(\"click\", this.activatePublication);\r\n            const keywordNodes = g.filter((d) => !d.publication);\r\n            keywordNodes.append(\"text\");\r\n            keywordNodes\r\n              .call(this.keywordNodeDrag())\r\n              .on(\"click\", this.keywordNodeClick);\r\n            return g;\r\n          });\r\n\r\n        try {\r\n          updatePublicationNodes.call(this);\r\n        } catch (error) {\r\n          throw new Error(\r\n            \"Cannot update publication nodes in network: \" + error.message\r\n          );\r\n        }\r\n\r\n        try {\r\n          updateKeywordNodes.call(this);\r\n        } catch (error) {\r\n          throw new Error(\r\n            \"Cannot update keyword nodes in network: \" + error.message\r\n          );\r\n        }\r\n\r\n        function updatePublicationNodes() {\r\n          const publicationNodes = this.node.filter((d) => d.publication);\r\n\r\n          publicationNodes\r\n            .classed(\"selected\", (d) => d.publication.isSelected)\r\n            .classed(\"suggested\", (d) => !d.publication.isSelected)\r\n            .classed(\"active\", (d) => d.publication.isActive)\r\n            .classed(\"linkedToActive\", (d) => d.publication.isLinkedToActive)\r\n            .classed(\"queuingForSelected\", (d) => d.isQueuingForSelected)\r\n            .classed(\"queuingForExcluded\", (d) => d.isQueuingForExcluded);\r\n\r\n          if (this.publicationTooltips)\r\n            this.publicationTooltips.forEach((tooltip) => tooltip.destroy());\r\n          publicationNodes.attr(\r\n            \"data-tippy-content\",\r\n            (d) =>\r\n              `<b>${\r\n                d.publication.title ? d.publication.title : \"[unknown title]\"\r\n              }</b> (${\r\n                d.publication.authorShort\r\n                  ? d.publication.authorShort + \", \"\r\n                  : \"\"\r\n              }${d.publication.year ? d.publication.year : \"[unknown year]\"})\r\n              <br><br>\r\n              The publication is ${\r\n                d.publication.isSelected ? \"selected\" : \"suggested\"\r\n              }${\r\n                d.isQueuingForSelected\r\n                  ? \" and marked to be added to selected publications\"\r\n                  : \"\"\r\n              }${\r\n                d.isQueuingForExcluded\r\n                  ? \" and marked to be added to excluded publications\"\r\n                  : \"\"\r\n              }.`\r\n          );\r\n          this.publicationTooltips = tippy(publicationNodes.nodes(), {\r\n            maxWidth: \"min(400px,70vw)\",\r\n            allowHTML: true,\r\n          });\r\n\r\n          publicationNodes\r\n            .select(\"rect\")\r\n            .attr(\"width\", (d) => getRectSize(d))\r\n            .attr(\"height\", (d) => getRectSize(d))\r\n            .attr(\"x\", (d) => -getRectSize(d) / 2)\r\n            .attr(\"y\", (d) => -getRectSize(d) / 2)\r\n            .attr(\"stroke-width\", (d) => (d.publication.isActive ? 4 : 3))\r\n            .attr(\"fill\", (d) => d.publication.scoreColor);\r\n\r\n          publicationNodes\r\n            .select(\".publication text.score\")\r\n            .classed(\r\n              \"unread\",\r\n              (d) => !d.publication.isRead && !d.publication.isSelected\r\n            )\r\n            .attr(\"y\", 1)\r\n            .attr(\"font-size\", \"0.8em\")\r\n            .text((d) => d.publication.score);\r\n\r\n          publicationNodes\r\n            .select(\"circle\")\r\n            .attr(\"cx\", (d) => getRectSize(d) / 2 - 1)\r\n            .attr(\"cy\", (d) => -getRectSize(d) / 2 + 1)\r\n            .attr(\"r\", (d) =>\r\n              d.publication.boostFactor > 1 ? getBoostIndicatorSize(d) / 6 : 0\r\n            )\r\n            .attr(\"stroke\", \"black\");\r\n        }\r\n\r\n        function updateKeywordNodes() {\r\n          const keywordNodes = this.node.filter((d) => !d.publication);\r\n\r\n          keywordNodes.classed(\"linkedToActive\", (d) =>\r\n            this.sessionStore.isKeywordLinkedToActive(d.id)\r\n          );\r\n\r\n          if (this.keywordTooltips)\r\n            this.keywordTooltips.forEach((tooltip) => tooltip.destroy());\r\n          keywordNodes.attr(\r\n            \"data-tippy-content\",\r\n            (d) =>\r\n              `Keyword \"${d.id}\" is matched in ${d.frequency} publication${\r\n                d.frequency > 1 ? \"s\" : \"\"\r\n              }${\r\n                this.sessionStore.isKeywordLinkedToActive(d.id)\r\n                  ? \", and also linked to the currently active publication\"\r\n                  : \"\"\r\n              }.<br><br>Drag to reposition (sticky), click to detach.`\r\n          );\r\n          this.keywordTooltips = tippy(keywordNodes.nodes(), {\r\n            maxWidth: \"min(400px,70vw)\",\r\n            allowHTML: true,\r\n          });\r\n\r\n          keywordNodes\r\n            .select(\"text\")\r\n            .attr(\"y\", 1)\r\n            .attr(\"font-size\", (d) => {\r\n              if (d.frequency >= 25) return \"1.1em\";\r\n              if (d.frequency >= 10) return \"0.9em\";\r\n              if (d.frequency >= 5) return \"0.8em\";\r\n              return \"0.7em\";\r\n            })\r\n            .text((d) => {\r\n              if (d.id.includes(\"|\")) {\r\n                return d.id.split(\"|\")[0] + \"|..\";\r\n              }\r\n              return d.id;\r\n            });\r\n        }\r\n\r\n        function getRectSize(d) {\r\n          return RECT_SIZE * (d.publication.isActive ? ENLARGE_FACTOR : 1);\r\n        }\r\n\r\n        function getBoostIndicatorSize(d) {\r\n          let internalFactor = 1;\r\n          if (d.publication.boostFactor >= 8) {\r\n            internalFactor = 1.8;\r\n          } else if (d.publication.boostFactor >= 4) {\r\n            internalFactor = 1.5;\r\n          } else if (d.publication.boostFactor > 1) {\r\n            internalFactor = 1.2;\r\n          }\r\n          return getRectSize(d) * internalFactor * 0.8;\r\n        }\r\n      }\r\n\r\n      function updateLinks() {\r\n        this.link = this.link\r\n          .data(this.graph.links, (d) => [d.source, d.target])\r\n          .join(\"path\");\r\n      }\r\n\r\n      function updateYearLabels() {\r\n        if (this.sessionStore.publicationsFiltered.length === 0) return;\r\n        const yearRange = _.range(\r\n          this.sessionStore.yearMin - 4,\r\n          this.sessionStore.yearMax + 1\r\n        ).filter((year) => year % 5 === 0);\r\n        this.label = this.label\r\n          .data(yearRange, (d) => d)\r\n          .join((enter) => {\r\n            const g = enter.append(\"g\");\r\n            g.append(\"text\");\r\n            g.append(\"text\");\r\n            return g;\r\n          });\r\n\r\n        this.label\r\n          .selectAll(\"text\")\r\n          .attr(\"text-anchor\", \"middle\")\r\n          .attr(\r\n            \"visibility\",\r\n            !this.sessionStore.isEmpty && !this.isNetworkClusters\r\n              ? \"visible\"\r\n              : \"hidden\"\r\n          )\r\n          .text((d) => d)\r\n          .attr(\"fill\", \"grey\");\r\n\r\n        if (!this.sessionStore.isEmpty) {\r\n          this.label\r\n            .attr(\r\n              \"transform\",\r\n              (d) => `translate(${this.yearX(d)},${this.svgHeight - margin})`\r\n            )\r\n            .select(\"text\")\r\n            .attr(\"y\", -this.svgHeight + 2 * margin);\r\n        }\r\n      }\r\n    },\r\n\r\n    tick: function () {\r\n      this.link\r\n        .attr(\"d\", (d) => {\r\n          const dx = d.target.x - d.source.x;\r\n          const dy = d.target.y - d.source.y;\r\n          // curved link for citations\r\n          if (d.type === \"citation\") {\r\n            const dr = Math.pow(dx * dx + dy * dy, 0.6);\r\n            return `M${d.target.x},${d.target.y}A${dr},${dr} 0 0,1 ${d.source.x},${d.source.y}`;\r\n          }\r\n          // tapered links for keywords:\r\n          // drawing a triangle as part of a circle segment with its center at the target node\r\n          const r = Math.sqrt(Math.pow(dx, 2) + Math.pow(dy, 2));\r\n          const alpha = Math.acos(dx / r);\r\n          const beta = 2 / r;\r\n          const x1 = r * Math.cos(alpha + beta);\r\n          let y1 = r * Math.sin(alpha + beta);\r\n          const x2 = r * Math.cos(alpha - beta);\r\n          let y2 = r * Math.sin(alpha - beta);\r\n          if (d.source.y > d.target.y) {\r\n            y1 = -y1;\r\n            y2 = -y2;\r\n          }\r\n          return `M${d.target.x - x1},${d.target.y - y1}\r\n            L${d.target.x},${d.target.y}\r\n            L${d.target.x - x2},${d.target.y - y2}`;\r\n        })\r\n        .attr(\"class\", (d) => {\r\n          const classes = [d.type];\r\n          if (d.type === \"citation\") {\r\n            if (d.source.publication.isActive || d.target.publication.isActive)\r\n              classes.push(\"active\");\r\n            if (\r\n              !(\r\n                d.source.publication.isSelected &&\r\n                d.target.publication.isSelected\r\n              )\r\n            )\r\n              classes.push(\"external\");\r\n          }\r\n          return classes.join(\" \");\r\n        });\r\n\r\n      this.node.attr(\"transform\", (d) => `translate(${d.x}, ${d.y})`);\r\n    },\r\n\r\n    keywordNodeDrag: function () {\r\n      const that = this;\r\n      function dragStart() {\r\n        d3.select(this).classed(\"fixed\", true);\r\n      }\r\n      function dragMove(event, d) {\r\n        d.fx = event.x;\r\n        d.fy = event.y;\r\n        that.simulation.alpha(SIMULATION_ALPHA).restart();\r\n      }\r\n      return d3.drag().on(\"start\", dragStart).on(\"drag\", dragMove);\r\n    },\r\n\r\n    keywordNodeClick: function (event, d) {\r\n      delete d.fx;\r\n      delete d.fy;\r\n      d3.select(event.target.parentNode).classed(\"fixed\", false);\r\n      this.simulation.alpha(SIMULATION_ALPHA).restart();\r\n    },\r\n\r\n    yearX: function (year) {\r\n      return (\r\n        ((year - this.sessionStore.yearMin) /\r\n          Math.sqrt(\r\n            1 + this.sessionStore.yearMax - this.sessionStore.yearMin\r\n          )) *\r\n        this.svgWidth *\r\n        0.15\r\n      );\r\n    },\r\n\r\n    activatePublication: function (event, d) {\r\n      this.sessionStore.activatePublicationComponentByDoi(d.publication.doi);\r\n      event.stopPropagation();\r\n    },\r\n\r\n    toggleMode() {\r\n      this.isNetworkClusters = !this.isNetworkClusters;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.network-of-references .box {\r\n  height: 100%;\r\n  display: grid;\r\n  grid-template-rows: max-content auto;\r\n}\r\n\r\n#network-svg {\r\n  background: white;\r\n  @include inset-shadow;\r\n\r\n  & g.publication.node-container {\r\n    cursor: pointer;\r\n\r\n    & rect {\r\n      cursor: pointer;\r\n      stroke-width: 2;\r\n      @include light-shadow-svg;\r\n    }\r\n\r\n    & circle {\r\n      fill: $warning;\r\n      stroke-width: 1f;\r\n      @include light-shadow-svg;\r\n    }\r\n\r\n    & text {\r\n      text-anchor: middle;\r\n      dominant-baseline: middle;\r\n      filter: drop-shadow(0px 0px 1px white);\r\n\r\n      &.unread {\r\n        fill: $info-dark;\r\n        font-weight: 1000;\r\n      }\r\n\r\n      &.labelQueuingForSelected,\r\n      &.labelQueuingForExcluded {\r\n        visibility: hidden;\r\n        font-weight: 1000;\r\n        stroke: white;\r\n        stroke-width: 0.5;\r\n      }\r\n    }\r\n\r\n    &:hover {\r\n      & rect,\r\n      & circle {\r\n        transform: scale(1.1);\r\n      }\r\n    }\r\n\r\n    &.selected {\r\n      & rect,\r\n      & circle {\r\n        stroke: $primary;\r\n      }\r\n    }\r\n    &.suggested {\r\n      & rect,\r\n      & circle {\r\n        stroke: $info;\r\n      }\r\n    }\r\n    &.active rect {\r\n      stroke-width: 6;\r\n    }\r\n    &.linkedToActive rect {\r\n      stroke-width: 4;\r\n    }\r\n\r\n    &.queuingForSelected,\r\n    &.queuingForExcluded {\r\n      opacity: 0.5;\r\n      filter: blur(0.5px);\r\n    }\r\n\r\n    &.queuingForSelected text.labelQueuingForSelected {\r\n      visibility: visible;\r\n      fill: $primary-dark;\r\n    }\r\n\r\n    &.queuingForExcluded text.labelQueuingForExcluded {\r\n      visibility: visible;\r\n    }\r\n  }\r\n\r\n  & g.keyword.node-container {\r\n    cursor: grab;\r\n\r\n    & text {\r\n      text-anchor: middle;\r\n      transform: translate(0px, 4px);\r\n      filter: drop-shadow(0px 0px 2px $warning);\r\n      text-transform: lowercase;\r\n    }\r\n\r\n    &.fixed text {\r\n      font-weight: 700;\r\n    }\r\n\r\n    &.linkedToActive text {\r\n      text-decoration-line: underline;\r\n    }\r\n\r\n    &:hover text {\r\n      transform: translate(0px, 3.5px) scale(1.1);\r\n    }\r\n  }\r\n\r\n  & path.citation {\r\n    fill: none;\r\n    stroke-width: 3;\r\n    stroke: #00000010;\r\n\r\n    &.external {\r\n      stroke: #00000006;\r\n      stroke-width: 2;\r\n    }\r\n\r\n    &.active {\r\n      stroke: #000000aa;\r\n      stroke-dasharray: 15 5;\r\n\r\n      &.external {\r\n        stroke: #00000066;\r\n      }\r\n    }\r\n  }\r\n  & path.keyword {\r\n    fill: $warning;\r\n    opacity: 0.2;\r\n  }\r\n}\r\n\r\n@include touch {\r\n  .network-of-references {\r\n    padding: 0 !important;\r\n  }\r\n  .network-of-references .box {\r\n    padding: 0.5rem;\r\n  }\r\n}\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./NetworkVisComponent.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./NetworkVisComponent.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./NetworkVisComponent.vue?vue&type=template&id=31e02cfc&\"\nimport script from \"./NetworkVisComponent.vue?vue&type=script&lang=js&\"\nexport * from \"./NetworkVisComponent.vue?vue&type=script&lang=js&\"\nimport style0 from \"./NetworkVisComponent.vue?vue&type=style&index=0&id=31e02cfc&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.sessionStore.isUpdatable),expression:\"sessionStore.isUpdatable\"}],staticClass:\"button has-background-primary has-text-white\",attrs:{\"id\":\"quick-access-update\"},on:{\"click\":_vm.sessionStore.updateQueued}},[_c('b-icon',{attrs:{\"icon\":\"update\",\"size\":\"is-small\"}}),_c('div',{staticClass:\"button-label\"},[_vm._v(\"Update\")])],1),_c('button',{staticClass:\"button has-background-primary has-text-white\",class:{\n      active: _vm.isComponentActive.selected,\n    },on:{\"click\":function($event){return _vm.scrollTo('selected')}}},[_c('b-icon',{attrs:{\"icon\":\"water-outline\"}}),_c('div',{staticClass:\"button-label\"},[_vm._v(\"Selected\")])],1),_c('button',{staticClass:\"button has-background-info has-text-white\",class:{\n      active: _vm.isComponentActive.suggested,\n    },on:{\"click\":function($event){return _vm.scrollTo('suggested')}}},[_c('b-icon',{attrs:{\"icon\":\"water-plus-outline\"}}),_c('div',{staticClass:\"button-label\"},[_vm._v(\"Suggested\")])],1),_c('button',{staticClass:\"button has-background-grey has-text-white\",class:{\n      active: _vm.isComponentActive.network,\n    },on:{\"click\":function($event){return _vm.scrollTo('network')}}},[_c('b-icon',{attrs:{\"icon\":\"chart-bubble\"}}),_c('div',{staticClass:\"button-label\"},[_vm._v(\"Network\")])],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <button\r\n      class=\"button has-background-primary has-text-white\"\r\n      @click=\"sessionStore.updateQueued\"\r\n      v-show=\"sessionStore.isUpdatable\"\r\n      id=\"quick-access-update\"\r\n    >\r\n      <b-icon icon=\"update\" size=\"is-small\"></b-icon>\r\n      <div class=\"button-label\">Update</div>\r\n    </button>\r\n    <button\r\n      class=\"button has-background-primary has-text-white\"\r\n      :class=\"{\r\n        active: isComponentActive.selected,\r\n      }\"\r\n      @click=\"scrollTo('selected')\"\r\n    >\r\n      <b-icon icon=\"water-outline\"></b-icon>\r\n      <div class=\"button-label\">Selected</div>\r\n    </button>\r\n    <button\r\n      class=\"button has-background-info has-text-white\"\r\n      :class=\"{\r\n        active: isComponentActive.suggested,\r\n      }\"\r\n      @click=\"scrollTo('suggested')\"\r\n    >\r\n      <b-icon icon=\"water-plus-outline\"></b-icon>\r\n      <div class=\"button-label\">Suggested</div>\r\n    </button>\r\n    <button\r\n      class=\"button has-background-grey has-text-white\"\r\n      :class=\"{\r\n        active: isComponentActive.network,\r\n      }\"\r\n      @click=\"scrollTo('network')\"\r\n    >\r\n      <b-icon icon=\"chart-bubble\"></b-icon>\r\n      <div class=\"button-label\">Network</div>\r\n    </button>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { useSessionStore } from \"./../stores/session.js\";\r\n\r\nimport { scrollToTargetAdjusted } from \"./../Util.js\";\r\n\r\nexport default {\r\n  name: \"QuickAccessBar\",\r\n  setup() {\r\n    const sessionStore = useSessionStore();\r\n    return { sessionStore };\r\n  },\r\n  mounted() {\r\n    document.addEventListener(\"scroll\", this.updateActiveButton);\r\n  },\r\n  data() {\r\n    return {\r\n      isComponentActive: {\r\n        selected: true,\r\n        suggested: false,\r\n        network: false,\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    scrollTo(id) {\r\n      scrollToTargetAdjusted(document.getElementById(id), 55);\r\n    },\r\n\r\n    updateActiveButton() {\r\n      this.isComponentActive = {\r\n        selected: false,\r\n        suggested: false,\r\n        network: false,\r\n      };\r\n      const activationHeight = document.documentElement.clientHeight * 0.7;\r\n      for (const componentId of Object.keys(this.isComponentActive)) {\r\n        const component = document.getElementById(componentId);\r\n        const rect = component.getBoundingClientRect();\r\n        this.isComponentActive[componentId] =\r\n          (rect.top >= 0 && rect.top <= activationHeight) ||\r\n          (rect.top < 0 && rect.bottom > activationHeight);\r\n        if (this.isComponentActive[componentId]) {\r\n          break;\r\n        }\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n\r\nbutton,\r\nbutton:focus {\r\n  margin: 0.5rem;\r\n  box-shadow: 0.25rem 0.25rem 0.75rem grey !important;\r\n  border-color: white;\r\n  width: 4.5rem;\r\n  height: 3.5rem;\r\n  display: inline;\r\n  padding: 0.25rem;\r\n  filter: brightness(90%);\r\n\r\n  &.active {\r\n    border-color: black;\r\n    filter: brightness(100%);\r\n    box-shadow: 0.1rem 0.1rem 0.5rem grey !important;\r\n  }\r\n\r\n  & .icon {\r\n    margin: 0 !important;\r\n  }\r\n\r\n  & .button-label {\r\n    font-size: 0.7rem;\r\n  }\r\n}\r\n\r\n#quick-access-update {\r\n  position: absolute;\r\n  bottom: 4rem;\r\n  filter: brightness(100%);\r\n  display: inline-flex;\r\n  height: auto;\r\n\r\n  & .icon {\r\n    margin-right: 0.2rem !important;\r\n  }\r\n}\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./QuickAccessBar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./QuickAccessBar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./QuickAccessBar.vue?vue&type=template&id=41dfca4e&scoped=true&\"\nimport script from \"./QuickAccessBar.vue?vue&type=script&lang=js&\"\nexport * from \"./QuickAccessBar.vue?vue&type=script&lang=js&\"\nimport style0 from \"./QuickAccessBar.vue?vue&type=style&index=0&id=41dfca4e&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"41dfca4e\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('b-modal',{attrs:{\"active\":_vm.interfaceStore.isSearchPanelShown},on:{\"close\":_vm.cancel}},[_c('div',{staticClass:\"card\"},[_c('header',{staticClass:\"card-header has-background-primary\"},[_c('p',{staticClass:\"card-header-title has-text-white\"},[_c('b-icon',{attrs:{\"icon\":\"magnify\"}}),_vm._v(\"Search/import publications \")],1)]),_c('div',{staticClass:\"card-content\"},[_c('div',{staticClass:\"content\"},[_c('section',[_c('form',{staticClass:\"field has-addons mb-2\",on:{\"submit\":function($event){$event.preventDefault();return _vm.search.apply(null, arguments)}}},[_c('p',{staticClass:\"control is-expanded m-0\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.interfaceStore.searchQuery),expression:\"interfaceStore.searchQuery\"}],ref:\"searchInput\",staticClass:\"input search-publication\",attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.interfaceStore.searchQuery)},on:{\"input\":function($event){if($event.target.composing)return;_vm.$set(_vm.interfaceStore, \"searchQuery\", $event.target.value)}}})]),_c('p',{staticClass:\"control\"},[_c('b-button',{staticClass:\"button level-right has-background-primary-light\",attrs:{\"type\":\"submit\",\"icon-left\":\"magnify\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.search.apply(null, arguments)}}})],1)]),_c('p',{staticClass:\"notification has-background-primary-light p-2 mb-2\"},[_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.searchResults.type === 'empty'),expression:\"searchResults.type === 'empty'\"}]},[_c('i',[_c('b',[_vm._v(\"Search\")]),_vm._v(\" for keywords, names, etc. \"),_c('b',[_vm._v(\"or import\")]),_vm._v(\" as \"),_c('a',{staticClass:\"href\",attrs:{\"href\":\"https://www.doi.org/\"}},[_vm._v(\"DOI(s)\")]),_vm._v(\" contained in any format.\")])]),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(['doi', 'search'].includes(_vm.searchResults.type)),expression:\"['doi', 'search'].includes(searchResults.type)\"}]},[_vm._v(\"Showing \"),_c('b',[_vm._v(_vm._s(_vm.filteredSearchResults.length)+\" publication\"+_vm._s(_vm.filteredSearchResults.length != 1 ? \"s\" : \"\"))]),_vm._v(\" based on \"),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.searchResults.type === 'doi'),expression:\"searchResults.type === 'doi'\"}]},[_vm._v(\"detected \"),_c('b',[_vm._v(\"DOIs\")])]),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.searchResults.type === 'search'),expression:\"searchResults.type === 'search'\"}]},[_c('b',[_vm._v(\"search\")])]),_vm._v(\".\")]),_c('b-button',{directives:[{name:\"tippy\",rawName:\"v-tippy\"},{name:\"show\",rawName:\"v-show\",value:(\n                _vm.searchResults.type === 'doi' &&\n                _vm.searchResults.results.length > 0\n              ),expression:\"\\n                searchResults.type === 'doi' &&\\n                searchResults.results.length > 0\\n              \"}],staticClass:\"compact-button ml-4 has-background-primary\",attrs:{\"icon-left\":\"plus-thick\",\"data-tippy-content\":\"Mark publication to be added to selected publications.\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.addAllPublications.apply(null, arguments)}}},[_vm._v(\"Add all\")])],1),_c('ul',{staticClass:\"publication-list\"},[_vm._l((_vm.filteredSearchResults),function(publication){return _c('li',{key:publication.doi,staticClass:\"publication-component media\"},[_c('div',{staticClass:\"media-content\"},[(publication.wasFetched && !publication.title)?_c('b',{staticClass:\"has-text-danger-dark\"},[_vm._v(\"[No metadata available]\")]):_vm._e(),(publication.wasFetched)?_c('b',{domProps:{\"innerHTML\":_vm._s(publication.title)}}):_vm._e(),(publication.author)?_c('span',[_vm._v(\" (\"),_c('span',[_vm._v(_vm._s(publication.authorShort ? publication.authorShort + \", \" : \"\"))]),_c('span',{class:publication.year ? '' : 'unknown'},[_vm._v(_vm._s(publication.year ? publication.year : \"[unknown year]\"))]),_vm._v(\")\")]):_vm._e(),_c('span',[_vm._v(\" DOI: \"),_c('a',{attrs:{\"href\":`https://doi.org/${publication.doi}`}},[_vm._v(_vm._s(publication.doi))])]),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(publication.title),expression:\"publication.title\"}]},[_c('a',{staticClass:\"ml-2\",attrs:{\"href\":`https://scholar.google.de/scholar?hl=en&q=${\n                      publication.title\n                    } ${publication.author ? publication.author : ''}`}},[_c('b-icon',{directives:[{name:\"tippy\",rawName:\"v-tippy\"}],attrs:{\"icon\":\"school\",\"size\":\"is-small\",\"data-tippy-content\":\"Google Scholar\"}})],1)])]),_c('div',{staticClass:\"media-right\"},[_c('div',[_c('b-button',{directives:[{name:\"tippy\",rawName:\"v-tippy\"}],staticClass:\"is-primary is-small\",attrs:{\"icon-left\":\"plus-thick\",\"data-tippy-content\":\"Mark publication to be added to selected publications.\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.addPublication(publication.doi)}}})],1)])])}),_c('b-loading',{model:{value:(_vm.isLoading),callback:function ($$v) {_vm.isLoading=$$v},expression:\"isLoading\"}})],2)])])]),_c('footer',{staticClass:\"card-footer level\"},[_c('div',{staticClass:\"level-left\"},[_c('div',{staticClass:\"level-item\"},[_c('p',[_c('b',[_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.addedPublications.length === 0),expression:\"addedPublications.length === 0\"}]},[_vm._v(\"No\")]),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.addedPublications.length > 0),expression:\"addedPublications.length > 0\"}]},[_vm._v(_vm._s(_vm.addedPublications.length))]),_vm._v(\" publication\"),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.addedPublications.length > 1),expression:\"addedPublications.length > 1\"}]},[_vm._v(\"s\")])]),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.addedPublications.length === 0),expression:\"addedPublications.length === 0\"}]},[_vm._v(\"yet marked\")]),_vm._v(\" to be added to selected. \")])])]),_c('div',{staticClass:\"level-right\"},[_c('b-button',{staticClass:\"level-item\",on:{\"click\":function($event){return _vm.cancel()}}},[_vm._v(\"Cancel\")]),_c('b-button',{staticClass:\"level-item is-primary\",attrs:{\"disabled\":_vm.addedPublications.length === 0,\"icon-left\":\"plus-thick\"},on:{\"click\":_vm.addAndClose}},[_vm._v(\"Add and update\")])],1)])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import _ from \"lodash\";\r\nimport { cachedFetch } from \"./Cache.js\";\r\nimport Publication from \"./Publication.js\";\r\n\r\nexport default class PublicationSearch {\r\n\r\n    constructor(query) {\r\n        this.query = query;\r\n    }\r\n\r\n    async execute() {\r\n        let dois = [];\r\n        let results = [];\r\n        // splitting query by characters that must/should be encoded differently in DOIs or by typical prefixes\r\n        // see: https://www.doi.org/doi_handbook/2_Numbering.html\r\n        this.query.split(/ |\"|\\{|\\}|%|#|\\?|<|>|\\[|\\]|\\\\|\\||`|\\+|doi:|doi.org\\//).forEach((doi) => {\r\n            // cutting characters that might be included in DOI, but very unlikely at the end\r\n            doi = _.trim(doi, \".,;\");\r\n            if (doi.indexOf(\"10.\") === 0 && !dois.includes(doi)) {\r\n                dois.push(doi);\r\n                const publication = new Publication(doi);\r\n                publication.fetchData();\r\n                results.push(publication);\r\n            }\r\n        });\r\n        if (dois.length) {\r\n            console.log(`Identified ${results.length} DOI(s) in input; do not perform search.`)\r\n            return {results: results, type: \"doi\"};\r\n        }\r\n        const simplifiedQuery = this.query.replace(/\\W+/g, \"+\").toLowerCase();\r\n        console.log(`Searching for publications matching '${this.query}'.`)\r\n        await cachedFetch(\r\n            `https://api.crossref.org/works?query=${simplifiedQuery}&mailto=fabian.beck@uni-bamberg.de&filter=has-references:true`,\r\n            (data) => {\r\n                data.message.items.filter(item => item.title).forEach((item) => {\r\n                    const publication = new Publication(item.DOI);\r\n                    publication.fetchData();\r\n                    results.push(publication);\r\n                });\r\n            }\r\n        );\r\n        return {results: results, type: \"search\"};\r\n    }\r\n\r\n    computeTitleSimilarity(query, title) {\r\n        const stopwords = [\"the\", \"for\", \"with\", \"and\"]; // for words with length > 2\r\n        let equivalentWordCounter = 0;\r\n        let wordCounter = 0;\r\n        let normalizedTitle = \" \" + title.replace(/\\W+/g, \" \").toLowerCase() + \" \"\r\n        query.split(\"+\").forEach((word) => {\r\n            if (word.length > 2 && stopwords.indexOf(word) === -1) {\r\n                wordCounter++;\r\n                if (normalizedTitle.indexOf(\" \" + word + \" \") >= 0) {\r\n                    equivalentWordCounter++;\r\n                }\r\n            }\r\n        });\r\n        return (\r\n            equivalentWordCounter / wordCounter\r\n        );\r\n    }\r\n\r\n}","<template>\r\n  <b-modal :active=\"interfaceStore.isSearchPanelShown\" @close=\"cancel\">\r\n    <div class=\"card\">\r\n      <header class=\"card-header has-background-primary\">\r\n        <p class=\"card-header-title has-text-white\">\r\n          <b-icon icon=\"magnify\"></b-icon>&ensp;Search/import publications\r\n        </p>\r\n      </header>\r\n      <div class=\"card-content\">\r\n        <div class=\"content\">\r\n          <section>\r\n            <form v-on:submit.prevent=\"search\" class=\"field has-addons mb-2\">\r\n              <p class=\"control is-expanded m-0\">\r\n                <input\r\n                  class=\"input search-publication\"\r\n                  type=\"text\"\r\n                  v-model=\"interfaceStore.searchQuery\"\r\n                  ref=\"searchInput\"\r\n                />\r\n              </p>\r\n              <p class=\"control\">\r\n                <b-button\r\n                  class=\"button level-right has-background-primary-light\"\r\n                  type=\"submit\"\r\n                  icon-left=\"magnify\"\r\n                  @click.stop=\"search\"\r\n                >\r\n                </b-button>\r\n              </p>\r\n            </form>\r\n            <p class=\"notification has-background-primary-light p-2 mb-2\">\r\n              <span v-show=\"searchResults.type === 'empty'\"\r\n                ><i\r\n                  ><b>Search</b> for keywords, names, etc. <b>or import</b> as\r\n                  <a href=\"https://www.doi.org/\" class=\"href\">DOI(s)</a>\r\n                  contained in any format.</i\r\n                ></span\r\n              >\r\n              <span v-show=\"['doi', 'search'].includes(searchResults.type)\"\r\n                >Showing\r\n                <b\r\n                  >{{ filteredSearchResults.length }} publication{{\r\n                    filteredSearchResults.length != 1 ? \"s\" : \"\"\r\n                  }}</b\r\n                >\r\n                based on\r\n                <span v-show=\"searchResults.type === 'doi'\"\r\n                  >detected <b>DOIs</b></span\r\n                ><span v-show=\"searchResults.type === 'search'\"\r\n                  ><b>search</b></span\r\n                >.</span\r\n              ><b-button\r\n                class=\"compact-button ml-4 has-background-primary\"\r\n                icon-left=\"plus-thick\"\r\n                data-tippy-content=\"Mark publication to be added to selected publications.\"\r\n                v-tippy\r\n                @click.stop=\"addAllPublications\"\r\n                v-show=\"\r\n                  searchResults.type === 'doi' &&\r\n                  searchResults.results.length > 0\r\n                \"\r\n                >Add all</b-button\r\n              >\r\n            </p>\r\n            <ul class=\"publication-list\">\r\n              <li\r\n                v-for=\"publication in filteredSearchResults\"\r\n                class=\"publication-component media\"\r\n                :key=\"publication.doi\"\r\n              >\r\n                <div class=\"media-content\">\r\n                  <b\r\n                    v-if=\"publication.wasFetched && !publication.title\"\r\n                    class=\"has-text-danger-dark\"\r\n                    >[No metadata available]</b\r\n                  >\r\n                  <b v-html=\"publication.title\" v-if=\"publication.wasFetched\"></b>\r\n                  <span v-if=\"publication.author\">\r\n                    (<span>{{\r\n                      publication.authorShort\r\n                        ? publication.authorShort + \", \"\r\n                        : \"\"\r\n                    }}</span\r\n                    ><span :class=\"publication.year ? '' : 'unknown'\">{{\r\n                      publication.year ? publication.year : \"[unknown year]\"\r\n                    }}</span\r\n                    >)</span\r\n                  >\r\n                  <span>\r\n                    DOI:\r\n                    <a :href=\"`https://doi.org/${publication.doi}`\">{{\r\n                      publication.doi\r\n                    }}</a>\r\n                  </span>\r\n                  <span v-show=\"publication.title\">\r\n                    <a\r\n                      :href=\"`https://scholar.google.de/scholar?hl=en&q=${\r\n                        publication.title\r\n                      } ${publication.author ? publication.author : ''}`\"\r\n                      class=\"ml-2\"\r\n                    >\r\n                      <b-icon\r\n                        icon=\"school\"\r\n                        size=\"is-small\"\r\n                        data-tippy-content=\"Google Scholar\"\r\n                        v-tippy\r\n                      ></b-icon\r\n                    ></a>\r\n                  </span>\r\n                </div>\r\n                <div class=\"media-right\">\r\n                  <div>\r\n                    <b-button\r\n                      class=\"is-primary is-small\"\r\n                      icon-left=\"plus-thick\"\r\n                      data-tippy-content=\"Mark publication to be added to selected publications.\"\r\n                      v-tippy\r\n                      @click.stop=\"addPublication(publication.doi)\"\r\n                    >\r\n                    </b-button>\r\n                  </div>\r\n                </div>\r\n              </li>\r\n              <b-loading v-model=\"isLoading\"></b-loading>\r\n            </ul>\r\n          </section>\r\n        </div>\r\n      </div>\r\n      <footer class=\"card-footer level\">\r\n        <div class=\"level-left\">\r\n          <div class=\"level-item\">\r\n            <p>\r\n              <b\r\n                ><span v-show=\"addedPublications.length === 0\">No</span\r\n                ><span v-show=\"addedPublications.length > 0\">{{\r\n                  addedPublications.length\r\n                }}</span>\r\n                publication<span v-show=\"addedPublications.length > 1\"\r\n                  >s</span\r\n                ></b\r\n              >\r\n              <span v-show=\"addedPublications.length === 0\"\r\n                >&nbsp;yet marked</span\r\n              >\r\n              to be added to selected.\r\n            </p>\r\n          </div>\r\n        </div>\r\n        <div class=\"level-right\">\r\n          <b-button class=\"level-item\" @click=\"cancel()\">Cancel</b-button>\r\n          <b-button\r\n            class=\"level-item is-primary\"\r\n            @click=\"addAndClose\"\r\n            :disabled=\"addedPublications.length === 0\"\r\n            icon-left=\"plus-thick\"\r\n            >Add and update</b-button\r\n          >\r\n        </div>\r\n      </footer>\r\n    </div>\r\n  </b-modal>\r\n</template>\r\n\r\n<script>\r\nimport { storeToRefs } from \"pinia\";\r\n\r\nimport { useSessionStore } from \"./../stores/session.js\";\r\nimport { useInterfaceStore } from \"./../stores/interface.js\";\r\n\r\nimport PublicationSearch from \"./../PublicationSearch.js\";\r\n\r\nexport default {\r\n  name: \"SearchPanel\",\r\n  setup() {\r\n    const sessionStore = useSessionStore();\r\n    const interfaceStore = useInterfaceStore();\r\n    const { isSearchPanelShown } = storeToRefs(interfaceStore);\r\n    return { sessionStore, interfaceStore, isSearchPanelShown };\r\n  },\r\n  data() {\r\n    return {\r\n      searchResults: { results: [], type: \"empty\" },\r\n      addedPublications: [],\r\n      isLoading: false,\r\n    };\r\n  },\r\n  computed: {\r\n    filteredSearchResults: function () {\r\n      return this.searchResults.results.filter(\r\n        (publication) =>\r\n          !this.sessionStore.selectedPublicationsDois.includes(\r\n            publication.doi\r\n          ) &&\r\n          !this.sessionStore.selectedQueue.includes(publication.doi) &&\r\n          !this.addedPublications.includes(publication.doi)\r\n      );\r\n    },\r\n  },\r\n  watch: {\r\n    isSearchPanelShown: {\r\n      handler: function () {\r\n        if (!this.isSearchPanelShown) return;\r\n        setTimeout(() => {\r\n          this.$refs.searchInput.focus();\r\n        }, 300);\r\n        if (this.interfaceStore.searchQuery) {\r\n          this.search();\r\n        }\r\n      },\r\n    },\r\n  },\r\n  methods: {\r\n    search: async function () {\r\n      if (!this.interfaceStore.searchQuery) {\r\n        this.searchResults = { results: [], type: \"empty\" };\r\n        return;\r\n      }\r\n      this.isLoading = true;\r\n      const publicationSearch = new PublicationSearch(\r\n        this.interfaceStore.searchQuery\r\n      );\r\n      this.searchResults = await publicationSearch.execute();\r\n      if (this.filteredSearchResults.length === 0) {\r\n        this.interfaceStore.showErrorMessage(\"No matching publications found\");\r\n      }\r\n      this.isLoading = false;\r\n    },\r\n\r\n    addPublication(doi) {\r\n      this.addedPublications.push(doi);\r\n    },\r\n\r\n    addAllPublications() {\r\n      this.filteredSearchResults.forEach((publication) => {\r\n        this.addPublication(publication.doi);\r\n      });\r\n      this.searchResults = { results: [], type: \"empty\" };\r\n      this.interfaceStore.searchQuery = \"\";\r\n    },\r\n\r\n    addAndClose() {\r\n      this.sessionStore.addPublicationsAndUpdate(this.addedPublications);\r\n      this.close();\r\n    },\r\n\r\n    cancel() {\r\n      if (this.addedPublications.length === 0) {\r\n        this.close();\r\n        return;\r\n      }\r\n      this.interfaceStore.showConfirmDialog(\r\n        \"Do you really want to discard the list of added publications?\",\r\n        () => {\r\n          this.close();\r\n        }\r\n      );\r\n    },\r\n\r\n    close() {\r\n      this.interfaceStore.isSearchPanelShown = false;\r\n      this.reset();\r\n    },\r\n\r\n    reset() {\r\n      this.searchResults = { results: [], type: \"empty\" };\r\n      this.addedPublications = [];\r\n      this.isLoading = false;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n.card {\r\n  & .publication-list {\r\n    padding: 0;\r\n    margin: 0;\r\n    list-style: none;\r\n    height: calc(100vh - 350px);\r\n    min-height: 100px;\r\n    border: 1px solid $border;\r\n    @include scrollable-list;\r\n\r\n    & li {\r\n      margin: 0 !important;\r\n      padding: 0.5rem;\r\n      min-height: 4.1rem;\r\n    }\r\n  }\r\n\r\n  & footer {\r\n    padding: 1rem;\r\n  }\r\n}\r\n\r\n@include touch {\r\n  .card {\r\n    & .card-content {\r\n      padding: 0.5rem;\r\n\r\n      & form .control {\r\n        margin-bottom: 0;\r\n      }\r\n\r\n      & .publication-list {\r\n        height: calc(100vh - 380px);\r\n      }\r\n    }\r\n    & footer {\r\n      padding: 0.5rem;\r\n\r\n      & .level-left {\r\n        font-size: 0.8rem;\r\n        width: calc(80vw - 110px);\r\n      }\r\n\r\n      & .level-right {\r\n        margin-top: 0;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SearchPanel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./SearchPanel.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SearchPanel.vue?vue&type=template&id=6c0a11a4&\"\nimport script from \"./SearchPanel.vue?vue&type=script&lang=js&\"\nexport * from \"./SearchPanel.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SearchPanel.vue?vue&type=style&index=0&id=6c0a11a4&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"card\",attrs:{\"id\":\"about\"}},[_c('header',{staticClass:\"card-header has-background-light\"},[_c('p',{staticClass:\"card-header-title\"},[_c('b-icon',{attrs:{\"icon\":\"information-outline\"}}),_vm._v(\"About \")],1)]),_c('div',{staticClass:\"card-content\"},[_c('div',{staticClass:\"content\"},[_c('section',[_c('div',{staticClass:\"level\"},[_c('div',{staticClass:\"level-left\"},[_c('div',{staticClass:\"level-item\"},[_c('span',{staticClass:\"title\",domProps:{\"innerHTML\":_vm._s(this.$appNameHtml)}})]),_c('div',{staticClass:\"level-item\"},[_c('span',{staticClass:\"subtitle\"},[_vm._v(_vm._s(this.$appSubtitle))])])]),_c('div',{staticClass:\"level-right\"},[_c('span',{staticClass:\"is-size-7 level-item\"},[_c('label',[_vm._v(\"Version:\")]),_vm._v(_vm._s(this.$version))])])]),_vm._m(0),_c('p',[_vm._v(\" The code is available on \"),_c('a',{attrs:{\"href\":\"https://github.com/fabian-beck/pure-suggest\"}},[_vm._v(\"GitHub \"),_c('b-icon',{attrs:{\"icon\":\"github\",\"size\":\"is-small\"}})],1),_vm._v(\" under \"),_c('a',{attrs:{\"href\":\"https://github.com/fabian-beck/pure-suggest/blob/master/LICENSE\"}},[_vm._v(\"MIT License \"),_c('b-icon',{attrs:{\"icon\":\"license\",\"size\":\"is-small\"}})],1),_vm._v(\". \")]),_c('p',[_vm._v(\" Follow updates on \"),_c('a',{attrs:{\"href\":\"https://twitter.com/pure_suggest\"}},[_vm._v(\" Twitter \"),_c('b-icon',{attrs:{\"icon\":\"twitter\",\"size\":\"is-small\"}}),_vm._v(\" (@pure_suggest) \")],1),_vm._v(\". \")]),_c('h2',[_c('b-icon',{attrs:{\"icon\":\"file-document\"}}),_vm._v(\" Scientific Publication\")],1),_c('p',[_vm._v(\" If you want to read more or cite the tool, you can refer to the following publication: \")]),_vm._m(1),_c('h2',[_c('b-icon',{attrs:{\"icon\":\"database\"}}),_vm._v(\" Data Sources\")],1),_c('p',[_vm._v(\" APIs by the following projects are used to retrieve the literature meta-data and citation information. \")]),_vm._m(2),_c('h2',[_c('b-icon',{attrs:{\"icon\":\"tools\"}}),_vm._v(\" Similar Tools\")],1),_vm._m(3),_vm._m(4),_c('h2',[_c('b-icon',{attrs:{\"icon\":\"card-account-mail\"}}),_vm._v(\" Contact\")],1),_vm._m(5),_vm._m(6),_vm._m(7)])])])])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('p',[_c('em',[_vm._v(\"PURE suggest\")]),_vm._v(\" is a scientific literature search tool that, starting from some seed papers, suggests scientific publications through citations/references. \")])\n},function (){var _vm=this,_c=_vm._self._c;return _c('ul',[_c('li',[_vm._v(\" Beck, F. and Krause, C., 2022. Visually Explaining Publication Ranks in Citation-based Literature Search with PURE suggest. In EuroVis 2022 - Posters. DOI: \"),_c('a',{attrs:{\"href\":\"https://diglib.eg.org/handle/10.2312/evp20221110\"}},[_vm._v(\"10.2312/evp.20221110\")]),_vm._v(\". [\"),_c('a',{attrs:{\"href\":\"https://diglib.eg.org/bitstream/handle/10.2312/evp20221110/019-021.pdf\"}},[_vm._v(\"PDF\")]),_vm._v(\"] \")])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('ul',[_c('li',[_c('a',{attrs:{\"href\":\"https://opencitations.net/\"}},[_vm._v(\"OpenCitations\")])]),_c('li',[_c('a',{attrs:{\"href\":\"https://www.crossref.org/\"}},[_vm._v(\"CrossRef\")])])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('p',[_c('em',[_vm._v(\"PURE suggest\")]),_vm._v(\" is not the first of its kind, but other tools are available that also provide a visually supported literature search through citation links. Try them out and decide yourself which one you like best! \")])\n},function (){var _vm=this,_c=_vm._self._c;return _c('ul',[_c('li',[_c('a',{attrs:{\"href\":\"https://www.citationgecko.com/\"}},[_vm._v(\"Citation Gecko\")])]),_c('li',[_c('a',{attrs:{\"href\":\"https://www.connectedpapers.com\"}},[_vm._v(\"Connected Papers\")])]),_c('li',[_c('a',{attrs:{\"href\":\"https://inciteful.xyz/\"}},[_vm._v(\"Inciteful\")])]),_c('li',[_c('a',{attrs:{\"href\":\"https://www.researchrabbit.ai/\"}},[_vm._v(\"Research Rabbit\")])])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('p',[_c('em',[_vm._v(\"PURE suggest\")]),_vm._v(\" has been created by:\")])\n},function (){var _vm=this,_c=_vm._self._c;return _c('p',[_c('a',{attrs:{\"href\":\"https://github.com/fabian-beck\"}},[_vm._v(\"Fabian Beck\")]),_vm._v(\" \"),_c('br'),_vm._v(\" University of Bamberg \"),_c('br'),_vm._v(\" 96047 Bamberg, Germany \"),_c('br'),_c('a',{attrs:{\"href\":\"mailto:fabian.beck@uni-bamberg.de\"}},[_vm._v(\"fabian.beck@uni-bamberg.de\")])])\n},function (){var _vm=this,_c=_vm._self._c;return _c('p',[_vm._v(\" Thanks a lot to all other contributors, especially \"),_c('a',{attrs:{\"href\":\"https://github.com/cedrickrause\"}},[_vm._v(\"Cedric Krause\")]),_vm._v(\". \")])\n}]\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./AboutPage.vue?vue&type=template&id=f6286bb4&scoped=true&\"\nvar script = {}\nimport style0 from \"./AboutPage.vue?vue&type=style&index=0&id=f6286bb4&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f6286bb4\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"card\",attrs:{\"id\":\"keyboardControls\"}},[_c('header',{staticClass:\"card-header has-background-light\"},[_c('p',{staticClass:\"card-header-title\"},[_c('b-icon',{attrs:{\"icon\":\"keyboard-outline\"}}),_vm._v(\"Keyboard Controls \")],1)]),_c('div',{staticClass:\"card-content\"},[_c('div',{staticClass:\"content\"},[_c('section',[_c('p',[_vm._v(\" You can use the following keyboard shortcuts to control the application. \")]),_c('h2',[_vm._v(\"General\")]),_c('ul',{staticClass:\"keys\"},[_c('li',[_c('b-icon',{attrs:{\"icon\":\"alpha-b-box-outline\"}}),_vm._v(\" Jump to \\\"Boost\\\" input field \")],1),_c('li',[_c('b-icon',{attrs:{\"icon\":\"alpha-a-box-outline\"}}),_vm._v(\" Jump to \\\"Add\\\" input field \")],1),_c('li',[_c('b-icon',{attrs:{\"icon\":\"alpha-s-box-outline\"}}),_vm._v(\" Open \\\"Search\\\" dialog \")],1),_c('li',[_c('b-icon',{attrs:{\"icon\":\"alpha-u-box-outline\"}}),_vm._v(\" Update selected publications (if publications are waiting) \")],1),_c('li',[_c('b-icon',{attrs:{\"icon\":\"alpha-f-box-outline\"}}),_vm._v(\" Switch on/off filtering of suggestions \")],1),_c('li',[_c('b-icon',{attrs:{\"icon\":\"arrow-left-bold-box-outline\"}}),_vm._v(\" Jump to first publication of \\\"Selected\\\" \")],1),_c('li',[_c('b-icon',{attrs:{\"icon\":\"arrow-right-bold-box-outline\"}}),_vm._v(\" Jump to first publication of \\\"Suggested\\\" \")],1),_c('li',[_c('b-icon',{attrs:{\"icon\":\"arrow-down-bold-box-outline\"}}),_vm._v(\" Move one publication down (if one is active) \")],1),_c('li',[_c('b-icon',{attrs:{\"icon\":\"arrow-up-bold-box-outline\"}}),_vm._v(\" Move one publication up (if one is active) \")],1),_c('li',[_c('b-icon',{attrs:{\"icon\":\"keyboard-esc\"}}),_vm._v(\" Escape input field or active publication \")],1),_c('li',[_c('b-icon',{attrs:{\"icon\":\"alpha-c-box-outline\"}}),_vm._v(\" Clear session\")],1)]),_c('h2',[_vm._v(\"Active Publication\")]),_c('p',[_vm._v(\"If a publication is marked as active:\")]),_c('ul',{staticClass:\"keys\"},[_c('li',[_c('b-icon',{attrs:{\"icon\":\"plus-box-outline\"}}),_vm._v(\" Add publication to selection \")],1),_c('li',[_c('b-icon',{attrs:{\"icon\":\"minus-box-outline\"}}),_vm._v(\" Exclude publication from selection/suggestion \")],1),_c('li',[_c('b-icon',{attrs:{\"icon\":\"alpha-d-box-outline\"}}),_vm._v(\" Open \\\"DOI\\\" link \")],1),_c('li',[_c('b-icon',{attrs:{\"icon\":\"alpha-t-box-outline\"}}),_vm._v(\" Show abstract\")],1),_c('li',[_c('b-icon',{attrs:{\"icon\":\"alpha-o-box-outline\"}}),_vm._v(\" Open \\\"Open access\\\" link \")],1),_c('li',[_c('b-icon',{attrs:{\"icon\":\"alpha-g-box-outline\"}}),_vm._v(\" Open \\\"Google Scholar\\\" link \")],1),_c('li',[_c('b-icon',{attrs:{\"icon\":\"alpha-x-box-outline\"}}),_vm._v(\" Export as BibTeX citation \")],1)]),_c('h2',[_vm._v(\"Citation Network\")]),_c('ul',{staticClass:\"keys\"},[_c('li',[_c('b-icon',{attrs:{\"icon\":\"alpha-m-box-outline\"}}),_vm._v(\" Toggle mode of citation network visualization between \"),_c('em',[_vm._v(\"timeline\")]),_vm._v(\" and \"),_c('em',[_vm._v(\"clusters\")])],1)])])])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./KeyboardControlsPage.vue?vue&type=template&id=9ae87360&scoped=true&\"\nvar script = {}\nimport style0 from \"./KeyboardControlsPage.vue?vue&type=style&index=0&id=9ae87360&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9ae87360\",\n  null\n  \n)\n\nexport default component.exports","import { useSessionStore } from \"./stores/session.js\";\r\nimport { useInterfaceStore } from \"./stores/interface.js\";\r\n\r\nexport function onKey(e) {\r\n    const sessionStore = useSessionStore();\r\n    const interfaceStore = useInterfaceStore();\r\n    if (\r\n        e.ctrlKey ||\r\n        e.shiftKey ||\r\n        e.metaKey ||\r\n        (e.repeat && !(e.key === \"ArrowDown\" || e.key === \"ArrowUp\"))\r\n    ) {\r\n        return;\r\n    }\r\n    if (\r\n        interfaceStore.isLoading ||\r\n        interfaceStore.isOverlay ||\r\n        (interfaceStore.isSearchPanelShown &&\r\n            document.activeElement.nodeName != \"INPUT\") ||\r\n        interfaceStore.isAboutPageShown ||\r\n        interfaceStore.isKeyboardControlsShown\r\n    ) {\r\n        e.preventDefault();\r\n        return;\r\n    }\r\n    if ((document.activeElement.nodeName === \"INPUT\" && document.activeElement.type === \"text\")\r\n        || document.activeElement.className.includes(\"input\") && document.activeElement.className.includes(\"boost\")) {\r\n        if (e.key === \"Enter\" && document.activeElement.className.includes(\"boost\")) {\r\n            sessionStore.updateScores();\r\n            e.preventDefault();\r\n            return;\r\n        }\r\n        if (e.key === \"Escape\") {\r\n            document.activeElement.blur();\r\n        }\r\n        return;\r\n    }\r\n    if (e.key === \"a\") {\r\n        e.preventDefault();\r\n        sessionStore.clearActivePublication(\"setting focus on text field\");\r\n        document.getElementsByClassName(\"input add-publication\")[0].focus();\r\n        return;\r\n    }\r\n    if (e.key === \"s\") {\r\n        e.preventDefault();\r\n        interfaceStore.isSearchPanelShown = true;\r\n        return;\r\n    }\r\n    if (sessionStore.isEmpty) return;\r\n    if (e.key === \"c\") {\r\n        e.preventDefault();\r\n        sessionStore.clearSession();\r\n    } else if (e.key === \"Escape\") {\r\n        e.preventDefault();\r\n        document.activeElement.blur();\r\n        sessionStore.clearActivePublication(\"escape key\");\r\n    } else if (e.key === \"b\") {\r\n        e.preventDefault();\r\n        sessionStore.clearActivePublication(\"setting focus on text field\");\r\n        document.getElementsByClassName(\"input boost\")[0].focus();\r\n    } else if (e.key === \"u\") {\r\n        e.preventDefault();\r\n        sessionStore.updateQueued();\r\n    } else if (e.key === \"f\") {\r\n        e.preventDefault();\r\n        interfaceStore.isFilterPanelShown = !interfaceStore.isFilterPanelShown;\r\n    } else if (e.key === \"m\") {\r\n        e.preventDefault();\r\n        interfaceStore.isNetworkClusters = !interfaceStore.isNetworkClusters;\r\n    } else if (e.key === \"ArrowLeft\") {\r\n        e.preventDefault();\r\n        interfaceStore.activatePublicationComponent(\r\n            document\r\n                .getElementById(\"selected\")\r\n                .getElementsByClassName(\"publication-component\")[0]\r\n        );\r\n    } else if (e.key === \"ArrowRight\") {\r\n        e.preventDefault();\r\n        interfaceStore.activatePublicationComponent(\r\n            document\r\n                .getElementById(\"suggested\")\r\n                .getElementsByClassName(\"publication-component\")[0]\r\n        );\r\n    } else if (sessionStore.activePublication) {\r\n        if (e.key === \"ArrowDown\" || e.key === \"ArrowUp\") {\r\n            e.preventDefault();\r\n            const activePublicationComponent = document.getElementsByClassName(\r\n                \"publication-component active\"\r\n            )[0];\r\n            try {\r\n                interfaceStore.activatePublicationComponent(\r\n                    e.key === \"ArrowDown\"\r\n                        ? activePublicationComponent.parentNode.nextSibling.getElementsByClassName(\"publication-component\")[0]\r\n                        : activePublicationComponent.parentNode.previousSibling.getElementsByClassName(\"publication-component\")[0]\r\n                );\r\n            } catch (error) {\r\n                console.log(\"Could not activate next/previous publication.\")\r\n            }\r\n        } else if (e.key === \"+\") {\r\n            e.preventDefault();\r\n            const doi = sessionStore.activePublication.doi;\r\n            sessionStore.queueForSelected(doi);\r\n        } else if (e.key === \"-\") {\r\n            e.preventDefault();\r\n            const doi = sessionStore.activePublication.doi;\r\n            sessionStore.queueForExcluded(doi);\r\n        } else if (e.key === \"d\") {\r\n            e.preventDefault();\r\n            window.open(sessionStore.activePublication.doiUrl);\r\n        } else if (\r\n            e.key === \"t\" &&\r\n            sessionStore.activePublication.abstract\r\n        ) {\r\n            e.preventDefault();\r\n            interfaceStore.showAbstract(sessionStore.activePublication);\r\n        } else if (\r\n            e.key === \"o\" &&\r\n            sessionStore.activePublication.oaLink\r\n        ) {\r\n            e.preventDefault();\r\n            window.open(sessionStore.activePublication.oaLink);\r\n        } else if (e.key === \"g\") {\r\n            e.preventDefault();\r\n            window.open(sessionStore.activePublication.gsUrl);\r\n        } else if (e.key === \"x\") {\r\n            e.preventDefault();\r\n            sessionStore.exportSingleBibtex(\r\n                sessionStore.activePublication\r\n            );\r\n        }\r\n    }\r\n}","<template>\r\n  <div id=\"app\">\r\n    <HeaderPanel id=\"header\" />\r\n    <div\r\n      id=\"main\"\r\n      @click=\"sessionStore.clearActivePublication('clicked anywhere')\"\r\n      :class=\"{ 'network-expanded': interfaceStore.isNetworkExpanded }\"\r\n    >\r\n      <SelectedPublicationsComponent id=\"selected\" />\r\n      <SuggestedPublicationsComponent id=\"suggested\" />\r\n      <NetworkVisComponent id=\"network\" :svgWidth=\"1500\" :svgHeight=\"600\" />\r\n    </div>\r\n    <QuickAccessBar id=\"quick-access\" class=\"is-hidden-desktop\" />\r\n    <SearchPanel />\r\n    <b-modal v-model=\"interfaceStore.isAboutPageShown\">\r\n      <AboutPage />\r\n    </b-modal>\r\n    <b-modal v-model=\"interfaceStore.isKeyboardControlsShown\">\r\n      <KeyboardControlsPage />\r\n    </b-modal>\r\n    <b-loading\r\n      :is-full-page=\"true\"\r\n      v-model=\"interfaceStore.isLoading\"\r\n      :can-cancel=\"false\"\r\n    ></b-loading>\r\n  </div>\r\n</template>\r\n\r\n<!---------------------------------------------------------------------------------->\r\n\r\n<script>\r\nimport { useSessionStore } from \"./stores/session.js\";\r\nimport { useInterfaceStore } from \"./stores/interface.js\";\r\n\r\nimport HeaderPanel from \"./components/HeaderPanel.vue\";\r\nimport SelectedPublicationsComponent from \"./components/SelectedPublicationsComponent.vue\";\r\nimport SuggestedPublicationsComponent from \"./components/SuggestedPublicationsComponent.vue\";\r\nimport NetworkVisComponent from \"./components/NetworkVisComponent.vue\";\r\nimport QuickAccessBar from \"./components/QuickAccessBar.vue\";\r\nimport SearchPanel from \"./components/SearchPanel.vue\";\r\nimport AboutPage from \"./components/AboutPage.vue\";\r\nimport KeyboardControlsPage from \"./components/KeyboardControlsPage.vue\";\r\n\r\nimport { onKey } from \"./Keys.js\";\r\n\r\nexport default {\r\n  name: \"App\",\r\n  setup() {\r\n    const sessionStore = useSessionStore();\r\n    const interfaceStore = useInterfaceStore();\r\n    return { sessionStore, interfaceStore };\r\n  },\r\n  components: {\r\n    HeaderPanel,\r\n    SelectedPublicationsComponent,\r\n    SuggestedPublicationsComponent,\r\n    NetworkVisComponent,\r\n    QuickAccessBar,\r\n    SearchPanel,\r\n    AboutPage,\r\n    KeyboardControlsPage,\r\n  },\r\n  created() {\r\n    window.addEventListener(\"keydown\", onKey);\r\n  },\r\n  mounted() {\r\n    window.onbeforeunload = () => {\r\n      window.scrollTo(0, 0);\r\n      // triggers a prompt before closing/reloading the page\r\n      if (!this.sessionStore.isEmpty) return \"\";\r\n      return null;\r\n    };\r\n  },\r\n  beforeDestroy() {\r\n    document.removeEventListener(\"keydown\", this.onKey);\r\n  },\r\n};\r\n</script>\r\n\r\n<!---------------------------------------------------------------------------------->\r\n\r\n<style lang=\"scss\">\r\n$block-spacing: 0.5rem;\r\n$box-padding: 1rem;\r\n\r\n@import \"~bulma\";\r\n@import \"~buefy/src/scss/buefy\";\r\n\r\n#app {\r\n  display: grid;\r\n  grid-template-areas:\r\n    \"header\"\r\n    \"main\";\r\n  height: 100vh;\r\n  grid-template-rows: max-content auto;\r\n\r\n  & #header {\r\n    grid-area: header;\r\n  }\r\n\r\n  & #main {\r\n    grid-area: main;\r\n    margin: 0.5vw;\r\n    display: grid;\r\n    grid-template-areas:\r\n      \"selected suggested\"\r\n      \"vis vis\";\r\n    height: calc(100% - 1vw);\r\n    overflow: auto;\r\n    grid-template-columns: 50fr 50fr;\r\n    grid-template-rows: auto 35vh;\r\n    gap: 0.5vw;\r\n\r\n    &.network-expanded {\r\n      grid-template-rows: auto 60vh;\r\n    }\r\n\r\n    & #selected {\r\n      grid-area: selected;\r\n      overflow-y: hidden;\r\n    }\r\n\r\n    & #suggested {\r\n      grid-area: suggested;\r\n      overflow-y: hidden;\r\n    }\r\n\r\n    & #network {\r\n      grid-area: vis;\r\n    }\r\n\r\n    & .box {\r\n      margin: 0;\r\n      padding: min(0.5vw, 1rem);\r\n    }\r\n  }\r\n\r\n  & .compact-button {\r\n    background: transparent;\r\n    color: $white;\r\n    border-color: $white;\r\n    height: 1.5rem;\r\n    margin-right: 0 !important;\r\n    margin-left: 1rem;\r\n    padding: 0.5rem;\r\n\r\n    &:hover {\r\n      color: $light;\r\n      border-color: $light;\r\n    }\r\n  }\r\n}\r\n\r\n// placed outside the #app scope to apply to tooltips also\r\n.key {\r\n  text-decoration: underline;\r\n}\r\n\r\n.unknown {\r\n  color: $danger;\r\n}\r\n\r\n.dialog .modal-card {\r\n  max-width: 720px;\r\n}\r\n\r\n@include touch {\r\n  #app {\r\n    display: block;\r\n    margin-bottom: 5rem;\r\n\r\n    & #main {\r\n      display: block;\r\n      margin: 0;\r\n      overflow: scroll;\r\n      height: auto;\r\n\r\n      & .box {\r\n        margin: 0.25rem;\r\n        padding: 0.5rem;\r\n      }\r\n\r\n      & #selected {\r\n        min-height: 20rem;\r\n      }\r\n\r\n      & #suggested {\r\n        min-height: 20rem;\r\n      }\r\n\r\n      & #network .box {\r\n        min-height: 70vh;\r\n      }\r\n\r\n      & .level-left + .level-right {\r\n        margin-top: 0.5rem;\r\n      }\r\n\r\n      /* Empty space for quick access buttons; used \"::after\" instead of plain margin-bottom as workaround for Chrome */\r\n      &::after {\r\n        content: \"\";\r\n        min-height: 5rem;\r\n        display: block;\r\n      }\r\n    }\r\n\r\n    #quick-access {\r\n      position: fixed;\r\n      bottom: 0.5rem;\r\n      width: 100%;\r\n      text-align: center;\r\n      z-index: 100;\r\n    }\r\n  }\r\n\r\n  // placed outside the #app scope to apply to tooltips also\r\n  .key {\r\n    text-decoration: none;\r\n  }\r\n\r\n  .modal .modal-content {\r\n    max-height: calc(100vh - 90px);\r\n  }\r\n\r\n  .modal-close {\r\n    right: 5px;\r\n    top: 5px;\r\n  }\r\n}\r\n\r\n@media screen and (min-width: 2400px) {\r\n  #app #main {\r\n    grid-template-areas: \"selected suggested vis\";\r\n    grid-template-columns: 50fr 50fr 75fr;\r\n    grid-template-rows: auto;\r\n\r\n    &.network-expanded {\r\n      grid-template-columns: 50fr 50fr 125fr;\r\n      grid-template-rows: auto;\r\n    }\r\n  }\r\n}\r\n</style>","import mod from \"-!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=5dffdb56&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&id=5dffdb56&prod&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\r\nimport App from './App.vue'\r\nimport packageInfo from './../package.json';\r\n\r\nimport { createPinia, PiniaVuePlugin } from 'pinia'\r\nVue.use(PiniaVuePlugin)\r\nconst pinia = createPinia()\r\n\r\nimport '@mdi/font/css/materialdesignicons.css'\r\nimport Buefy from 'buefy'\r\nVue.use(Buefy, { defaultIconPack: 'mdi' })\r\n\r\nimport VueTippy, { TippyComponent } from \"vue-tippy\";\r\nVue.use(VueTippy, {\r\n  maxWidth: 'min(400px,70vw)'\r\n});\r\n// eslint-disable-next-line vue/multi-word-component-names\r\nVue.component(\"tippy\", TippyComponent);\r\n\r\nVue.config.productionTip = false;\r\n\r\nVue.prototype.$appName = \"PURE suggest\";\r\nVue.prototype.$appNameHtml = '<span class=\"has-text-primary\">PURE&nbsp;</span><span class=\"has-text-info\">suggest</span>';\r\nVue.prototype.$appSubtitle = \"Citation-based literature search\"\r\nVue.prototype.$version = packageInfo.version;\r\n\r\nnew Vue({\r\n  render: h => h(App),\r\n  pinia,\r\n}).$mount('#app')","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkpure\"] = self[\"webpackChunkpure\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [998], function() { return __webpack_require__(9373); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["render","_vm","this","_c","_self","attrs","class","interfaceStore","isNetworkExpanded","on","$event","sessionStore","clearActivePublication","staticClass","model","value","isAboutPageShown","callback","$$v","$set","expression","isKeyboardControlsShown","isLoading","staticRenderFns","useInterfaceStore","defineStore","state","loadingToast","undefined","isOverlay","isNetworkClusters","isFilterPanelShown","searchQuery","isSearchPanelShown","feedbackInvitationShown","getters","isMobile","window","innerWidth","actions","clear","scrollTo","startLoading","endLoading","close","updateLoadingToast","message","type","Toast","indefinite","showAbstract","publication","console","log","_this","onClose","activatePublicationComponent","document","getElementById","doi","Dialog","title","abstract","hasIcon","icon","confirmText","canCancel","onConfirm","onCancel","showMessage","showToastMessage","showImportantMessage","showErrorMessage","errorMessage","duration","error","showConfirmDialog","confirm","showFeedbackInvitation","Snackbar","cancelText","onAction","openFeedback","openSearch","query","open","publicationComponent","focus","data","async","cachedFetch","url","processData","fetchParameters","JSON","parse","LZString","localStorage","Error","cannotLoadFromCacheError","response","fetch","ok","status","json","stringify","i","randomStoredUrl","Object","keys","Math","floor","random","length","removeItem","error2","error3","clearCache","Publication","constructor","toLowerCase","doiUrl","titleHighlighted","year","author","authorShort","authorOrcid","container","volume","issue","page","oaLink","citationDois","referenceDois","citationCount","referenceCount","boostMatches","boostKeywords","boostFactor","score","scoreColor","citationsPerYear","isSurvey","isHighlyCited","isNew","isUnnoted","isOpenAccess","isActive","isLinkedToActive","isSelected","isRead","wasFetched","authorArray","split","replace","source_title","forEach","word","mappedWord","test","toUpperCase","TITLE_WORD_MAP","_","cleanTitle","match","oa_link","reference","referenceDoi","push","citation","citationDoi","max","CURRENT_YEAR","headers","authorization","replaceAll","subtitle","indexOf","cleanedTitle","created","gsUrl","exec","toFixed","updateScore","titleFragments","boostKeyword","index","alternativeKeyword","titleFragment","substring","flat","join","lightness","toBibtex","protectAcronyms","s","s2","detectedAcronyms","slice","includes","bibString","hasTag","TAGS","some","tag","getMetaString","string","name","static","publicationList","sort","a","b","Date","getFullYear","removeHtmlTags","charAt","trim","Filter","yearStart","yearEnd","matchesString","isSpecificYearActive","yearNumeric","isYearActive","Number","matchesYearStart","yearStartNumeric","matchesYearEnd","yearEndNumeric","matchesYear","matchesTag","matches","saveAsFile","filename","mime","blob","Blob","navigator","msSaveOrOpenBlob","msSaveBlob","elem","createElement","href","URL","createObjectURL","download","body","appendChild","click","removeChild","scrollToTargetAdjusted","element","offsetY","elementPosition","getBoundingClientRect","top","offsetPosition","pageYOffset","behavior","shuffle","array","seed","x","sin","t","m","useSessionStore","selectedPublications","selectedQueue","excludedPublicationsDois","excludedQueue","suggestion","maxSuggestions","boostKeywordString","activePublication","readPublicationsDois","Set","filter","addQuery","selectedPublicationsDois","asDois","selectedPublicationsCount","excludedPublicationsCount","suggestedPublications","publications","suggestedPublicationsFiltered","concat","publicationsFiltered","yearMax","map","yearMin","min","unreadSuggestionsCount","keyword","isKeywordLinkedToActive","uniqueBoostKeywords","isUpdatable","isEmpty","isExcluded","isQueuingForSelected","isQueuingForExcluded","getSelectedPublicationByDoi","removeFromExcludedPublication","excludedDoi","setBoostKeywordString","updateScores","queueForSelected","dois","Array","isArray","queueForExcluded","seletedDoi","removeFromQueues","clearQueues","addPublicationsToSelection","updateSuggestions","publicationsLoaded","Promise","all","fetchData","computeSuggestions","incrementSuggestedPublicationCounter","counter","doiList","sourceDoi","citingPublication","filteredSuggestions","values","preloadSuggestions","publicationsLoadedCount","suggestedPublication","has","totalSuggestions","sortPublications","loadMoreSuggestions","setActivePublication","selectedPublication","add","activatePublicationComponentByDoi","source","loadSession","session","selected","boost","excluded","clearSession","exportSession","importSession","file","fileReader","FileReader","onload","content","result","readAsText","loadExample","exportAllBibtex","exportBibtex","exportSingleBibtex","bib","scopedSlots","_u","key","fn","domProps","_s","$appNameHtml","proxy","directives","rawName","_v","$appSubtitle","_m","setup","props","component","stopPropagation","updateQueued","ref","highlight","components","HighlightableInput","text","style","_l","addPublication","activatePublication","_e","active","linkedToActive","unread","queuing","activate","apply","arguments","chevronType","endsWith","refocus","button","toLocaleString","_k","keyCode","$emit","computed","methods","PublicationComponent","watch","deep","handler","onNextActivatedScroll","scrollToActivated","block","inline","BoostKeywordsComponent","PublicationListComponent","mounted","after","filterString","updateFilter","clearFilterString","filterYearStart","filterYearEnd","filterTag","inactive","nativeOn","RECT_SIZE","ENLARGE_FACTOR","margin","SIMULATION_ALPHA","graph","nodes","links","simulation","svg","svgHeight","svgWidth","node","link","label","select","call","d3","that","append","initForces","force","id","distance","strength","y","plot","restart","initGraph","updateNodes","updateLinks","updateYearLabels","publicationNodes","keywordNodes","frequency","target","internal","attr","d","classed","updatePublicationNodes","updateKeywordNodes","maxWidth","allowHTML","internalFactor","g","selectAll","tick","y1","y2","x2","classes","keywordNodeDrag","keywordNodeClick","yearX","event","toggleMode","isComponentActive","suggested","network","updateActiveButton","rect","cancel","preventDefault","search","composing","searchResults","filteredSearchResults","results","addAllPublications","addedPublications","addAndClose","PublicationSearch","simplifiedQuery","items","item","DOI","computeTitleSimilarity","stopwords","equivalentWordCounter","wordCounter","normalizedTitle","setTimeout","reset","$version","script","onKey","e","ctrlKey","shiftKey","metaKey","repeat","activeElement","nodeName","className","blur","getElementsByClassName","activePublicationComponent","parentNode","nextSibling","previousSibling","HeaderPanel","SelectedPublicationsComponent","SuggestedPublicationsComponent","NetworkVisComponent","QuickAccessBar","SearchPanel","AboutPage","KeyboardControlsPage","beforeDestroy","Vue","PiniaVuePlugin","pinia","createPinia","Buefy","defaultIconPack","VueTippy","TippyComponent","packageInfo","h","App","$mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","loaded","__webpack_modules__","deferred","O","chunkIds","priority","notFulfilled","Infinity","fulfilled","j","every","splice","r","n","getter","__esModule","definition","o","defineProperty","enumerable","get","globalThis","Function","obj","prop","prototype","hasOwnProperty","nmd","paths","children","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}